---
title: Integruotų kanalų mokėjimų apžvalga
description: Šioje temoje pateikiama informacija apie „Dynamics 365 Commerce“ integruoto kanalo mokėjimus.
author: rubendel
ms.date: 09/17/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 7b99b5f7b5b972d41e0831995bde69e9041369b9
ms.sourcegitcommit: cabd991fda2bfcabb55db84c225b24a7bb061631
ms.translationtype: HT
ms.contentlocale: lt-LT
ms.lasthandoff: 05/12/2021
ms.locfileid: "6028016"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="f68bc-103">Integruotų kanalų mokėjimų apžvalga</span><span class="sxs-lookup"><span data-stu-id="f68bc-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="f68bc-104">Šioje temoje pateikiama informacija apie „Dynamics 365 Commerce“ integruoto kanalo mokėjimus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="f68bc-105">Ji apima išsamų palaikomų scenarijų sąrašą, informaciją apie funkcijas, sąranką bei trikčių diagnostiką ir kai kurių tipiškų problemų aprašymus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="f68bc-106">Pagrindiniai terminai</span><span class="sxs-lookup"><span data-stu-id="f68bc-106">Key terms</span></span>

| <span data-ttu-id="f68bc-107">Semestras</span><span class="sxs-lookup"><span data-stu-id="f68bc-107">Term</span></span> | <span data-ttu-id="f68bc-108">Aprašas</span><span class="sxs-lookup"><span data-stu-id="f68bc-108">Description</span></span> |
|---|---|
| <span data-ttu-id="f68bc-109">Atpažinimo ženklas</span><span class="sxs-lookup"><span data-stu-id="f68bc-109">Token</span></span> | <span data-ttu-id="f68bc-110">Duomenų seka, kurią kaip nuorodą pateikia mokėjimo procesorius.</span><span class="sxs-lookup"><span data-stu-id="f68bc-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="f68bc-111">Atpažinimo ženklai gali nurodyti mokėjimo kortelių numerius, mokėjimų autorizavimą ir ankstesnius mokėjimus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="f68bc-112">Atpažinimo ženklai yra svarbūs, nes jie padeda apsaugoti konfidencialius duomenis elektroninio kasos aparato (EKA) sistemoje.</span><span class="sxs-lookup"><span data-stu-id="f68bc-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="f68bc-113">Kartais jie taip pat vadinami *nuorodomis*.</span><span class="sxs-lookup"><span data-stu-id="f68bc-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="f68bc-114">Kortelės atpažinimo ženklas</span><span class="sxs-lookup"><span data-stu-id="f68bc-114">Card token</span></span> | <span data-ttu-id="f68bc-115">Atpažinimo ženklas, kurį mokėjimo procesorius pateikia saugoti EKA sistemoje.</span><span class="sxs-lookup"><span data-stu-id="f68bc-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="f68bc-116">Kortelės atpažinimo ženklą gali naudoti tik jį gavęs prekybininkas.</span><span class="sxs-lookup"><span data-stu-id="f68bc-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="f68bc-117">Kortelių atpažinimo ženklai kartais taip pat vadinami *kortelių nuorodomis*.</span><span class="sxs-lookup"><span data-stu-id="f68bc-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="f68bc-118">Autorizavimo („auth“) atpažinimo ženklas</span><span class="sxs-lookup"><span data-stu-id="f68bc-118">Authorization (auth) token</span></span> | <span data-ttu-id="f68bc-119">Unikalus ID, kurį mokėjimo procesas pateikia kaip dalį atsakymo, kurį siunčia EKA sistemai po to, kai EKA sistema sukuria autorizavimo užklausą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="f68bc-120">Autorizavimo atpažinimo ženklą galima naudoti vėliau, jei procesorius iškviečiamas atlikti tokius veiksmus kaip autorizavimo atšaukimas arba anuliavimas.</span><span class="sxs-lookup"><span data-stu-id="f68bc-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="f68bc-121">Tačiau dažniausiai jis naudojamas norint fiksuoti lėšas, kai įvykdytas užsakymas arba baigta operacija.</span><span class="sxs-lookup"><span data-stu-id="f68bc-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="f68bc-122">Autorizavimo atpažinimo ženklai kartais taip pat vadinami *autorizavimo nuorodomis*.</span><span class="sxs-lookup"><span data-stu-id="f68bc-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="f68bc-123">Atpažinimo ženklo fiksavimas</span><span class="sxs-lookup"><span data-stu-id="f68bc-123">Capture token</span></span> | <span data-ttu-id="f68bc-124">Nuoroda, kurią mokėjimo procesorius pateikia EKA sistemai, kai atsiskaitymas yra baigtas arba užfiksuotas.</span><span class="sxs-lookup"><span data-stu-id="f68bc-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="f68bc-125">Tada fiksavimo atpažinimo ženklą galima naudoti norint nurodyti mokėjimo fiksavimą vėlesnėse operacijose, pvz., grąžinimo užklausose.</span><span class="sxs-lookup"><span data-stu-id="f68bc-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="f68bc-126">Kortelės nėra</span><span class="sxs-lookup"><span data-stu-id="f68bc-126">Card not present</span></span> | <span data-ttu-id="f68bc-127">Frazė, nurodanti mokėjimo operacijas, atliekamas nepateikiant faktinės kortelės.</span><span class="sxs-lookup"><span data-stu-id="f68bc-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="f68bc-128">Pavyzdžiui, šios operacijos gali būti vykdomos elektroninės prekybos arba skambučių centro scenarijuose.</span><span class="sxs-lookup"><span data-stu-id="f68bc-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="f68bc-129">Atliekant šias operacijas, su mokėjimais susijusi informacija įvedama neautomatiniu būdu el. prekybos svetainėje, skambučių centro sraute arba EKA ar mokėjimo terminale.</span><span class="sxs-lookup"><span data-stu-id="f68bc-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="f68bc-130">Kortelė yra</span><span class="sxs-lookup"><span data-stu-id="f68bc-130">Card present</span></span> | <span data-ttu-id="f68bc-131">Frazė, nurodanti mokėjimo operacijas, kurias atliekant faktinė kortelė pateikiama naudojama mokėjimo terminale, sujungtame su „Microsoft Dynamics 365“ EKA sistema.</span><span class="sxs-lookup"><span data-stu-id="f68bc-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="f68bc-132">Apžvalga</span><span class="sxs-lookup"><span data-stu-id="f68bc-132">Overview</span></span>

<span data-ttu-id="f68bc-133">Paprastai frazė *integruoto kanalo mokėjimai* nurodo galimybę kurti užsakymą viename kanale ir vykdyti jį kitame kanale.</span><span class="sxs-lookup"><span data-stu-id="f68bc-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="f68bc-134">Svarbiausia integruoto kanalo ypatybė – mokėjimo informacijos ir likusios užsakymo informacijos išsaugojimas bei mokėjimo informacijos naudojimas, kai užsakymas atšaukiamas arba apdorojamas kitame kanale.</span><span class="sxs-lookup"><span data-stu-id="f68bc-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="f68bc-135">Klasikinis pavyzdys yra scenarijus „Pirkimas internetu, atsiėmimas parduotuvėje“.</span><span class="sxs-lookup"><span data-stu-id="f68bc-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="f68bc-136">Tokiu atveju mokėjimo informacija yra įtraukiama, kai užsakymas sukuriamas internete.</span><span class="sxs-lookup"><span data-stu-id="f68bc-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="f68bc-137">Tada informacija atšaukiama EKA, kad kliento mokėjimo kortelė būtų apmokestinta paėmimo metu.</span><span class="sxs-lookup"><span data-stu-id="f68bc-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="f68bc-138">Visus scenarijus, aprašytus šioje temoje, galima įgyvendinti naudojant standartinį mokėjimų programinės įrangos kūrimo rinkinį (SDK), kuris pateikiamas kartu su „Commerce“.</span><span class="sxs-lookup"><span data-stu-id="f68bc-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="f68bc-139">[„Dynamics 365“ mokėjimo jungtis, skirta „Adyen“](/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3), pateikia parengtą naudoti kiekvieno čia aprašyto scenarijaus įdiegtį.</span><span class="sxs-lookup"><span data-stu-id="f68bc-139">The [Dynamics 365 Payment Connector for Adyen](/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="f68bc-140">Būtinieji komponentai</span><span class="sxs-lookup"><span data-stu-id="f68bc-140">Prerequisites</span></span>

<span data-ttu-id="f68bc-141">Kiekvienam šioje temoje aprašytam scenarijui reikalinga mokėjimo jungtis, palaikanti integruoto kanalo mokėjimus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="f68bc-142">Parengta naudoti „Adyen“ jungtis taip pat gali būti naudojama, nes ji palaiko scenarijus, kurie galimi naudojant mokėjimų SDK.</span><span class="sxs-lookup"><span data-stu-id="f68bc-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="f68bc-143">Norėdami daugiau informacijos apie tai, kaip nustatyti mokėjimų jungtis, ir apie „Retail“ SDK bendrai rasite apsilankę [pagrindiniame „Retail“, skirtos IT profesionalams ir kūrėjams, puslapyje](/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span><span class="sxs-lookup"><span data-stu-id="f68bc-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="f68bc-144">Palaikomos versijos</span><span class="sxs-lookup"><span data-stu-id="f68bc-144">Supported versions</span></span>

<span data-ttu-id="f68bc-145">Šioje temoje aprašytos integruoto kanalo galimybės išleistos kaip „Microsoft Dynamics 365 for Retail“ 8.1.3 versijos dalis.</span><span class="sxs-lookup"><span data-stu-id="f68bc-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="f68bc-146">Tipo „Kortelė yra“ ir „kortelės nėra“ jungtys</span><span class="sxs-lookup"><span data-stu-id="f68bc-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="f68bc-147">Mokėjimų SDK priklauso nuo dviejų mokėjimo programų kūrimo sąsajų (API) rinkinių.</span><span class="sxs-lookup"><span data-stu-id="f68bc-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="f68bc-148">Pirmas API rinkinys pavadintas **iPaymentProcessor**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="f68bc-149">Jis naudojamas taikant tipo „kortelės nėra“ jungtis, kurias galima naudoti skambučių centruose ir su „Microsoft Dynamics“ elektroninės prekybos platforma.</span><span class="sxs-lookup"><span data-stu-id="f68bc-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="f68bc-150">Norėdami daugiau informacijos apie sąsają **iPaymentProcessor** žr. mokėjimus apimančią dokumentaciją [Mokėjimo jungties ir mokėjimo įrenginio diegimas](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf).</span><span class="sxs-lookup"><span data-stu-id="f68bc-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="f68bc-151">Antras API rinkinys pavadintas **iNamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="f68bc-152">Jis palaiko tipo „kortelė yra“ mokėjimo integravimo, naudojančio mokėjimo terminalą, diegimą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="f68bc-153">Norėdami gauti daugiau informacijos apie sąsają **„iNamedRequestHandler”** sąsają, žr. [Mokėjimų integravimo į mokėjimo terminalą kūrimas](/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span><span class="sxs-lookup"><span data-stu-id="f68bc-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="f68bc-154">Nustatymas ir konfigūracija</span><span class="sxs-lookup"><span data-stu-id="f68bc-154">Setup and configuration</span></span>

<span data-ttu-id="f68bc-155">Būtini toliau nurodyti komponentai ir nustatymo veiksmai.</span><span class="sxs-lookup"><span data-stu-id="f68bc-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="f68bc-156">**„eCommerce“ integracija:** norint, kad būtų palaikomi scenarijai, kai užsakymas pateikiamas internetinėje parduotuvėje, reikalinga integracija su „Commerce“.</span><span class="sxs-lookup"><span data-stu-id="f68bc-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="f68bc-157">Norėdami daugiau informacijos apie „Retail e-Commerce“ SDK, žr. [„e-Commerce“ platformos programinės įrangos kūrimo rinkinys (SDK)](/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span><span class="sxs-lookup"><span data-stu-id="f68bc-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="f68bc-158">Demonstracinėje aplinkoje nuorodos parduotuvė palaiko integruoto mokėjimo scenarijus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="f68bc-159">**Mokėjimų internetu konfigūracija:** internetinio kanalo sąranka turi apimti mokėjimo jungtį, kuri buvo atnaujinta, kad palaikytų integruoto kanalo mokėjimus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="f68bc-160">Taip pat galima naudoti parengtą naudoti mokėjimo jungtį.</span><span class="sxs-lookup"><span data-stu-id="f68bc-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="f68bc-161">Informacijos apie tai, kaip konfigūruoti „Adyen“ mokėjimo jungtį, skirtą internetinėms parduotuvėms, žr. [„Adyen“ mokėjimo jungtis](/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span><span class="sxs-lookup"><span data-stu-id="f68bc-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="f68bc-162">Reikia ne tik atlikti šioje temoje aprašytus „eCommerce“ sąrankos veiksmus, bet ir „Adyen“ jungties parametruose nustatyti parametro **Leisti įrašyti informaciją Galima įrašyti informaciją apie elektroninėje prekyboje** vertę **True**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="f68bc-163">**Daugiakanalių mokėjimų konfigūracija:** operacijų skyriuje eikite į **„Retail and Commerce“ \> Būstinės sąranka \> Parametrai \> Bendrai naudojami „Commerce“ parametrai**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="f68bc-164">Tada skirtuke **Integruotas kanalas** nustatykite parinkties **Naudoti integruoto kanalo mokėjimus** vertę **Taip**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span> <span data-ttu-id="f68bc-165">Prekybos versijose 10.0.12 ir naujesnėse šie parametrai yra **Funkcijų valdymo** darbo srityje.</span><span class="sxs-lookup"><span data-stu-id="f68bc-165">In Commerce versions 10.0.12 and later, this setting is in the **Feature Management** workspace.</span></span> <span data-ttu-id="f68bc-166">Pasirinkite **Vieno kanalo mokėjimai** funkciją ir paspauskite **Įjungti dabar**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-166">Select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="f68bc-167">**Mokėjimo paslaugos:** skambučių centras naudoja numatytąją mokėjimo jungtį puslapyje **Mokėjimo paslaugos**, kad apdorotų mokėjimus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-167">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="f68bc-168">Siekiant palaikyti tokius scenarijus „Pirkimas skambučių centre, atsiėmimas parduotuvėje“, ši numatytoji mokėjimo jungtis turi būti „Adyen“ mokėjimo jungtis arba mokėjimo jungtis, kuri atitinka integruoto kanalo mokėjimų vykdymo reikalavimus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-168">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="f68bc-169">**EFT paslauga:** mokėjimo terminale atliekami mokėjimai turi būti nustatyti aparatinės įrangos profilio „FastTab“**EFT paslauga**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-169">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="f68bc-170">„Adyen“ jungtis iš karto palaiko integruoto kanalo mokėjimus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-170">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="f68bc-171">Kitos mokėjimo jungtys, palaikančios sąsają **iNamedRequestHandler**, taip pat gali būti naudojamos, jei jos palaiko integruoto kanalo mokėjimus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-171">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="f68bc-172">**Mokėjimo jungties pasiekiamumas:** kai užsakymas atšaukiamas, į mokėjimo priemonės eilutes, kurios buvo atšauktos kartu su užsakymu, įtraukiamas mokėjimo jungties, kuri buvo naudojama kuriant su tuo užsakymu susijusius autorizavimus, pavadinimas.</span><span class="sxs-lookup"><span data-stu-id="f68bc-172">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="f68bc-173">Kai užsakymas įvykdomas, mokėjimų SDK bando naudoti tą pačią jungtį, kuri buvo naudojama pradiniam autorizavimui sukurti.</span><span class="sxs-lookup"><span data-stu-id="f68bc-173">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="f68bc-174">Todėl jungtį, kurios prekybininko ypatybės sutampa, turi pavykti fiksuoti.</span><span class="sxs-lookup"><span data-stu-id="f68bc-174">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="f68bc-175">**Kortelių tipai:** kad integruoto kanalo scenarijai veiktų tinkamai, kiekvieno kanalo priemonių tipų sąranka turi būti tokia pati ir ją turi būti galima naudoti integruotame kanale.</span><span class="sxs-lookup"><span data-stu-id="f68bc-175">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="f68bc-176">Ši sąranka apima apmokėjimo būdo ID ir kortelės tipo ID.</span><span class="sxs-lookup"><span data-stu-id="f68bc-176">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="f68bc-177">Pvz., jei internetinės parduotuvės sąrankoje priemonės tipo **Kortelės** ID yra **2** , mažmeninės parduotuvės sąrankoje jos ID turi būti toks pat.</span><span class="sxs-lookup"><span data-stu-id="f68bc-177">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="f68bc-178">Tas pats reikalavimas taikomas kortelės tipo ID.</span><span class="sxs-lookup"><span data-stu-id="f68bc-178">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="f68bc-179">Jei internetinėje parduotuvėje kortelės numeris **12** nustatytas kaip **VISA**, mažmeninės prekybos parduotuvėje turi būti nustatytas toks pat ID.</span><span class="sxs-lookup"><span data-stu-id="f68bc-179">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 
- <span data-ttu-id="f68bc-180">„ Retail Modern POS“ „Windows“ ar „Android“ su įdiegta kompiuterinės įrangos stotimi -arba-</span><span class="sxs-lookup"><span data-stu-id="f68bc-180">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="f68bc-181">Modernus POS iOS ar debesies POS su sujungta bendrinta kompiuterinės įrangos stotimi.</span><span class="sxs-lookup"><span data-stu-id="f68bc-181">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="f68bc-182">Pagrindinis principas, palaikantis integruoto kanalo mokėjimus</span><span class="sxs-lookup"><span data-stu-id="f68bc-182">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="f68bc-183">Mokėjimo jungtys ir mokėjimo procesoriai naudoja atpažinimo ženklus (arba nuorodas), kad nurodytų su kortelių mokėjimais susijusias sąveikas.</span><span class="sxs-lookup"><span data-stu-id="f68bc-183">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="f68bc-184">Pavyzdžiui, kai pateikiama mokėjimo autorizavimo užklausa, pateikiama nuoroda į tą autorizavimą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-184">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="f68bc-185">Todėl autorizavimą galima nurodyti vėliau, kai vykdymo metu fiksuojamos lėšos.</span><span class="sxs-lookup"><span data-stu-id="f68bc-185">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="f68bc-186">Šis autorizavimas yra unikalus prekybininkui, mokėjimo surinkėjui ir procesoriui.</span><span class="sxs-lookup"><span data-stu-id="f68bc-186">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="f68bc-187">Jei internete sukurtas užsakymas paimamas parduotuvėje, reikia nuskaityti ir naudoti tą pačią to užsakymo mokėjimo informaciją.</span><span class="sxs-lookup"><span data-stu-id="f68bc-187">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="f68bc-188">Kai pradinė informacija pateikiama kaip užklausos dalis siekiant fiksuoti mokėjimą pagal pradinį autorizavimą, mokėjimo procesorius galės apdoroti užklausą ir užfiksuoti apmokėjimą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-188">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="f68bc-189">Norint tinkamai nurodyti internetinį užsakymą, taip pat turi būti pasiekiama tipo „kortelės nėra“ mokėjimo jungtis, kuri palaiko tą patį procesorių.</span><span class="sxs-lookup"><span data-stu-id="f68bc-189">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="f68bc-190">Tokiu būdu EKA sistemoje gali būti vienas procesorius, skirtas tipo „kortelė yra“ mokėjimams, tačiau ji taip pat gali turėti prieigą prie kitų mokėjimo jungčių, kad galėtų įvykdyti užsakymus, kurie sukuriami kituose kanaluose naudojant skirtingus mokėjimo procesorius.</span><span class="sxs-lookup"><span data-stu-id="f68bc-190">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="f68bc-191">Palaikomi scenarijai</span><span class="sxs-lookup"><span data-stu-id="f68bc-191">Supported scenarios</span></span>

<span data-ttu-id="f68bc-192">Palaikomi toliau nurodyti integruoto kanalo mokėjimo scenarijai.</span><span class="sxs-lookup"><span data-stu-id="f68bc-192">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="f68bc-193">Pirkimas internetu, atsiėmimas parduotuvėje</span><span class="sxs-lookup"><span data-stu-id="f68bc-193">Buy online, pick up in store</span></span>
- <span data-ttu-id="f68bc-194">Pirkimas skambučių centre, atsiėmimas parduotuvėje</span><span class="sxs-lookup"><span data-stu-id="f68bc-194">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="f68bc-195">Pirkimas A parduotuvėje, atsiėmimas B parduotuvėje</span><span class="sxs-lookup"><span data-stu-id="f68bc-195">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="f68bc-196">Pirkimas A parduotuvėje, siuntimas klientui</span><span class="sxs-lookup"><span data-stu-id="f68bc-196">Buy in store A, ship to customer</span></span>

    > [!NOTE]
    > <span data-ttu-id="f68bc-197">Skambučio centre esantys mokėjimai, kuriuos susieti su „įprasta“ mokėjimo funkcija, turi būti pažymėti kaip **Išankstinis mokėjimas** = **Taip**, kad būtų atspindėta suma, kuri turi būti sumokėta, kai atšaukiamas užsakymas EKA.</span><span class="sxs-lookup"><span data-stu-id="f68bc-197">Payments made in the call center that map to the "Normal" payment function must be marked as **Prepay** = **Yes** to be reflected in the amount due when recalling the order in the POS.</span></span> <span data-ttu-id="f68bc-198">Ne išankstinio mokėjimo „įprasto“ tipo mokėjimai yra neatpažįstami, kai atšaukiamas mokėjimas EKA.</span><span class="sxs-lookup"><span data-stu-id="f68bc-198">Non-prepay payments of type "Normal" are not recognized when the order is recalled in POS.</span></span> 

<span data-ttu-id="f68bc-199">Taip pat palaikomi šių scenarijų variantai.</span><span class="sxs-lookup"><span data-stu-id="f68bc-199">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="f68bc-200">Pavyzdžiui, internetiniame užsakyme gali būti ir eilučių, kurios bus išsiųstos klientui, ir eilučių, kurios bus paimtos parduotuvėje.</span><span class="sxs-lookup"><span data-stu-id="f68bc-200">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="f68bc-201">Visos užsakymo vykdymo parinktys palaikomos naudojant integruoto kanalo mokėjimus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-201">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="f68bc-202">Tolesniuose skyriuose aprašomi kiekvieno scenarijaus veiksmai ir rodoma, kaip vykdyti scenarijų naudojant demonstracinius duomenis.</span><span class="sxs-lookup"><span data-stu-id="f68bc-202">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="f68bc-203">Pirkimas internetu, atsiėmimas parduotuvėje</span><span class="sxs-lookup"><span data-stu-id="f68bc-203">Buy online, pick up in store</span></span>

<span data-ttu-id="f68bc-204">Prieš pradėdami įsitikinkite, kad įvykdytos toliau nurodytos būtinosios sąlygos.</span><span class="sxs-lookup"><span data-stu-id="f68bc-204">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="f68bc-205">Turite nuorodos parduotuvę, kurioje sukonfigūruota „Adyen“ jungtis.</span><span class="sxs-lookup"><span data-stu-id="f68bc-205">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="f68bc-206">**Daugiakanalių mokėjimų** parinktis, esanti puslapyje **Bendrai naudojami „Commerce“ parametrai**, nustatoma į **Tiesa**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-206">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span> <span data-ttu-id="f68bc-207">Paskutinėse versijose šie parametrai perkelti į **Funkcijos valdymas** darbo sritį, kurioje galite pasirinkti **Vieno kanalo mokėjimai** funkciją ir paspausti **Įjungti dabar**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-207">In later versions this settng is moved to the **Feature Management** workspace where you can select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="f68bc-208">„Adyen“ mokėjimo jungtis sukonfigūruota ;Houston: EKA registre.</span><span class="sxs-lookup"><span data-stu-id="f68bc-208">The Adyen payment connector is configured for the Houston POS register.</span></span>
- <span data-ttu-id="f68bc-209">„ Retail Modern POS“ „Windows“ ar „Android“ su įdiegta kompiuterinės įrangos stotimi -arba-</span><span class="sxs-lookup"><span data-stu-id="f68bc-209">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="f68bc-210">Modernus POS iOS ar debesies POS su sujungta bendrinta kompiuterinės įrangos stotimi.</span><span class="sxs-lookup"><span data-stu-id="f68bc-210">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

<span data-ttu-id="f68bc-211">Norėdami vykdyti scenarijų atlikite toliau nurodytus veiksmus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-211">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="f68bc-212">Nuorodos parduotuvėje sukurkite parduotuvėje paimamą užsakymą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-212">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="f68bc-213">Įsitikinkite, kad pasirinkote parduotuvę **Houston**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-213">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="f68bc-214">Atlikite atsiskaitymo veiksmus ir sumokėkite naudodami tikrinimo kredito kortelės numerį.</span><span class="sxs-lookup"><span data-stu-id="f68bc-214">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="f68bc-215">Tikrinimo kredito kortelių numerius galite rasti puslapyje [„Adyen“ tikrinimo kortelių numeriai](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span><span class="sxs-lookup"><span data-stu-id="f68bc-215">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="f68bc-216">„Commerce“ naudokite paketinę užduotį **Sinchronizuoti užsakymus** ir paskirstymo grafiką **P-001**, kad galėtumėte sukurti užsakymus operacijų skyriuje.</span><span class="sxs-lookup"><span data-stu-id="f68bc-216">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="f68bc-217">EKA darbo pradžios puslapyje pasirinkite operaciją **Paimtini užsakymai**, kad peržiūrėtumėte parduotuvėje paimtinus užsakymus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-217">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="f68bc-218">Pasirinkite vieną ar kelias eilutes iš užsakymo, kuris buvo sukurtas nuorodos parduotuvėje, tada pasirinkite **Paimti**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-218">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="f68bc-219">Užsakymas nuskaitomas iš operacijų biuro.</span><span class="sxs-lookup"><span data-stu-id="f68bc-219">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="f68bc-220">Kai užsakymo eilutės informacija nuskaitoma iš operacijų biuro ir aptinkama kortelė, kurią galima naudoti integruotame kanale, pranešama apie galimą mokėjimo būdą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-220">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="f68bc-221">Pasirinkite **Naudoti galimą mokėjimo būdą**, kad atliktumėte operaciją naudodami kortelės informaciją, kuri buvo įvesta nuorodos parduotuvėje.</span><span class="sxs-lookup"><span data-stu-id="f68bc-221">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="f68bc-222">Užsakymo eilutės įkeliamos į operacijos puslapį, o balansas yra 0 (nulis).</span><span class="sxs-lookup"><span data-stu-id="f68bc-222">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="f68bc-223">Pasirinkite skirtuką **Mokėjimai**, kad peržiūrėtumėte priemonės eilutę, kuri buvo nuskaityta iš internetinio užsakymo.</span><span class="sxs-lookup"><span data-stu-id="f68bc-223">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="f68bc-224">Pasirinkite bet kokį mokėjimo būdą, kad atliktumėte operaciją.</span><span class="sxs-lookup"><span data-stu-id="f68bc-224">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="f68bc-225">Pirkimas skambučių centre, atsiėmimas parduotuvėje</span><span class="sxs-lookup"><span data-stu-id="f68bc-225">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="f68bc-226">„Commerce“, puslapyje **Klientų aptarnavimas**, ieškos juostoje įveskite **Karen Berg**, tada pasirinkite **Ieškoti**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-226">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="f68bc-227">Ieškos rezultatuose pasirinkite **Karen Berg**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-227">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="f68bc-228">Kai Karen bus įkelta į puslapį **Klientų aptarnavimas**, pasirinkite **Naujas pardavimo užsakymas**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-228">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="f68bc-229">Naujame pardavimo užsakymo puslapyje pasirinkite **Antraštė**, kad peržiūrėtumėte užsakymo antraštę.</span><span class="sxs-lookup"><span data-stu-id="f68bc-229">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="f68bc-230">Puslapyje **Užsakymo antraštė** nustatykite vietą į **Centrinė**, o sandėlį – į **Houston**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-230">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="f68bc-231">Skirtuke **Pristatymas** nustatykite kliento paėmimo lauką **Pristatymo būdas** į vertę **60**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-231">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="f68bc-232">Pasirinkite **Eilutės**, tada į užsakymą įtraukite vieną ar daugiau eilučių.</span><span class="sxs-lookup"><span data-stu-id="f68bc-232">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="f68bc-233">Pasirinkite **Baigti**, kad prasidėtų užsakymo vykdymo užbaigimo eiga.</span><span class="sxs-lookup"><span data-stu-id="f68bc-233">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="f68bc-234">Slinkite žemyn į mokėjimų skiltį, pasirinkite **Įtraukti**, tada pasirinkite eilutę, kurioje nustatytas mokėjimo būdo tipas **Kortelės**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-234">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="f68bc-235">Norėdami įtraukti mokėjimą kortele, pasirinkite pliuso ženklą (**+**).</span><span class="sxs-lookup"><span data-stu-id="f68bc-235">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="f68bc-236">Įveskite tikrinimo kredito kortelės numerio informaciją, kuri nurodyta puslapyje [„Adyen“ tikrinimo kortelių numeriai](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), tada pasirinkite **OK**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-236">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="f68bc-237">Jei įvesto numerio kortelės prekės ženklas skiriasi nuo prekės ženklo, pasirinkto inicijuojant mokėjimą, mokėjimas vis tiek bus įvykdytas.</span><span class="sxs-lookup"><span data-stu-id="f68bc-237">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="f68bc-238">Tačiau jis bus užregistruotas paskyrose, susietose su kortelės prekės ženklu, kurį pasirinkote atlikdami 10 veiksmą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-238">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="f68bc-239">Dar kartą pasirinkite **OK**, kad uždarytumėte dialogo langą **Užsakymo įvykdymo mokėjimai**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-239">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="f68bc-240">Puslapyje **Pardavimo užsakymo suvestinė** pasirinkite **Pateikti**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-240">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="f68bc-241">EKA darbo pradžios puslapyje pasirinkite operaciją **Paimtini užsakymai**, kad peržiūrėtumėte parduotuvėje paimtinus užsakymus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-241">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="f68bc-242">Pasirinkite vieną ar kelias eilutes iš užsakymo, kuris buvo sukurtas nuorodos parduotuvėje, tada pasirinkite **Paimti**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-242">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="f68bc-243">Užsakymas nuskaitomas iš operacijų biuro.</span><span class="sxs-lookup"><span data-stu-id="f68bc-243">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="f68bc-244">Kai užsakymo eilutės informacija nuskaitoma iš operacijų biuro ir aptinkama kortelė, kurią galima naudoti integruotame kanale, pranešama apie galimą mokėjimo būdą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-244">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="f68bc-245">Pasirinkite **Naudoti galimą mokėjimo būdą**, kad atliktumėte operaciją naudodami kortelės informaciją, kuri buvo įvesta nuorodos parduotuvėje.</span><span class="sxs-lookup"><span data-stu-id="f68bc-245">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="f68bc-246">Užsakymo eilutės įkeliamos į operacijos puslapį, o balansas yra 0 (nulis).</span><span class="sxs-lookup"><span data-stu-id="f68bc-246">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="f68bc-247">Pasirinkite skirtuką **Mokėjimai**, kad peržiūrėtumėte priemonės eilutę, kuri buvo nuskaityta iš internetinio užsakymo.</span><span class="sxs-lookup"><span data-stu-id="f68bc-247">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="f68bc-248">Pasirinkite bet kokį mokėjimo būdą, kad atliktumėte operaciją.</span><span class="sxs-lookup"><span data-stu-id="f68bc-248">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="f68bc-249">Pirkimas A parduotuvėje, atsiėmimas B parduotuvėje</span><span class="sxs-lookup"><span data-stu-id="f68bc-249">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="f68bc-250">Paleiskite parduotuvės „Houston“ EKA.</span><span class="sxs-lookup"><span data-stu-id="f68bc-250">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="f68bc-251">Puslapyje **Operacija** įtraukite Karen Berg į operaciją naudodami skaitmenų klaviatūrą, kad įvestumėte **2001.**</span><span class="sxs-lookup"><span data-stu-id="f68bc-251">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="f68bc-252">Į operaciją įtraukite vieną ar daugiau eilučių.</span><span class="sxs-lookup"><span data-stu-id="f68bc-252">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="f68bc-253">Pasirinkite **Užsakymai**, kad peržiūrėtumėte užsakymo parinktis.</span><span class="sxs-lookup"><span data-stu-id="f68bc-253">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="f68bc-254">Pasirinkite **Paimti viską**, tada, kai jus paragins, pasirinkite **Kliento užsakymas**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-254">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="f68bc-255">Ieškos juostoje įveskite **Seattle**, tada pasirinkite paėmimo parduotuvę **Seattle**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-255">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="f68bc-256">Pasirinkite **OK**, kad esamą datą patvirtintumėte kaip paėmimo datą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-256">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="f68bc-257">Pasirinkite **Mokėti kortele,** kad inicijuotumėte mokėjimą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-257">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="f68bc-258">Naudodami kortelę įmokėkite mokėtiną depozito sumą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-258">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="f68bc-259">Užbaikite depozito mokėjimą mokėjimo terminale.</span><span class="sxs-lookup"><span data-stu-id="f68bc-259">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="f68bc-260">Sumokėję depozitą pasirinkite parinktį naudoti tą pačią kortelę vykdymo metu ir palaukite, kol užsakymas bus įvykdytas.</span><span class="sxs-lookup"><span data-stu-id="f68bc-260">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="f68bc-261">Paleiskite parduotuvės „Seattle“ EKA.</span><span class="sxs-lookup"><span data-stu-id="f68bc-261">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="f68bc-262">EKA darbo pradžios puslapyje pasirinkite operaciją **Paimtini užsakymai**, kad peržiūrėtumėte parduotuvėje paimtinus užsakymus.</span><span class="sxs-lookup"><span data-stu-id="f68bc-262">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="f68bc-263">Pasirinkite vieną ar kelias eilutes iš užsakymo, kuris buvo sukurtas nuorodos parduotuvėje, tada pasirinkite **Paimti**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-263">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="f68bc-264">Užsakymas nuskaitomas iš operacijų biuro.</span><span class="sxs-lookup"><span data-stu-id="f68bc-264">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="f68bc-265">Kai užsakymo eilutės informacija nuskaitoma iš operacijų biuro ir aptinkama kortelė, kurią galima naudoti integruotame kanale, pranešama apie galimą mokėjimo būdą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-265">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="f68bc-266">Pasirinkite **Naudoti galimą mokėjimo būdą**, kad atliktumėte operaciją naudodami kortelės informaciją, kuri buvo įvesta nuorodos parduotuvėje.</span><span class="sxs-lookup"><span data-stu-id="f68bc-266">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="f68bc-267">Užsakymo eilutės įkeliamos į operacijos puslapį, o balansas yra 0 (nulis).</span><span class="sxs-lookup"><span data-stu-id="f68bc-267">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="f68bc-268">Pasirinkite skirtuką **Mokėjimai**, kad peržiūrėtumėte priemonės eilutę, kuri buvo nuskaityta iš internetinio užsakymo.</span><span class="sxs-lookup"><span data-stu-id="f68bc-268">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="f68bc-269">Pasirinkite bet kokį mokėjimo būdą, kad atliktumėte operaciją.</span><span class="sxs-lookup"><span data-stu-id="f68bc-269">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="f68bc-270">Pirkimas A parduotuvėje, siuntimas klientui</span><span class="sxs-lookup"><span data-stu-id="f68bc-270">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="f68bc-271">Paleiskite parduotuvės „Houston“ EKA.</span><span class="sxs-lookup"><span data-stu-id="f68bc-271">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="f68bc-272">Puslapyje **Operacija** įtraukite Karen Berg į operaciją naudodami skaitmenų klaviatūrą, kad įvestumėte **2001.**</span><span class="sxs-lookup"><span data-stu-id="f68bc-272">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="f68bc-273">Į operaciją įtraukite vieną ar daugiau eilučių.</span><span class="sxs-lookup"><span data-stu-id="f68bc-273">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="f68bc-274">Pasirinkite **Užsakymai**, kad peržiūrėtumėte užsakymo parinktis.</span><span class="sxs-lookup"><span data-stu-id="f68bc-274">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="f68bc-275">Pasirinkite **Siųsti viską**, tada, kai jus paragins, pasirinkite **Kliento užsakymas**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-275">Select **Ship all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="f68bc-276">Siuntimo metodo puslapyje pasirinkite **Standartinis pristatymas per naktį**, o tada pasirinkite **Gerai**, kad patvirtintumėte šios dienos datą, kaip siuntimo datą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-276">In the shipping method page, select **Standard overnight**, and then select **OK** to accept today's date as the shipping date.</span></span> 
7. <span data-ttu-id="f68bc-277">Pasirinkite **OK**, kad esamą datą patvirtintumėte kaip paėmimo datą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-277">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="f68bc-278">Pasirinkite **Mokėti kortele,** kad inicijuotumėte mokėjimą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-278">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="f68bc-279">Naudodami kortelę įmokėkite mokėtiną depozito sumą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-279">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="f68bc-280">Užbaikite depozito mokėjimą mokėjimo terminale.</span><span class="sxs-lookup"><span data-stu-id="f68bc-280">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="f68bc-281">Sumokėję depozitą pasirinkite parinktį naudoti tą pačią kortelę vykdymo metu ir palaukite, kol užsakymas bus įvykdytas.</span><span class="sxs-lookup"><span data-stu-id="f68bc-281">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="f68bc-282">Kai užsakymas paimamas, supakuojamas ir operacijų biure išrašoma jo SF, EKA pateikta mokėjimo informacija bus naudojama prekių, gabenamų klientui, lėšoms fiksuoti.</span><span class="sxs-lookup"><span data-stu-id="f68bc-282">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="f68bc-283">Išsami scenarijaus informacija</span><span class="sxs-lookup"><span data-stu-id="f68bc-283">Scenario details</span></span>

<span data-ttu-id="f68bc-284">Be pagrindinių scenarijų, kurie čia aprašyti, atlikti keli mokėjimų SDK patobulinimai, kad būtų palaikomi integruoto kanalo mokėjimai.</span><span class="sxs-lookup"><span data-stu-id="f68bc-284">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="f68bc-285">EKA</span><span class="sxs-lookup"><span data-stu-id="f68bc-285">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="f68bc-286">Vienkartinis perbraukimas kortele / kortelės įstatymas kliento užsakymuose</span><span class="sxs-lookup"><span data-stu-id="f68bc-286">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="f68bc-287">Prieš įdiegiant integruoto kanalo mokėjimų funkciją, kai kliento užsakymai, apimantys depozitus, buvo kuriame EKA, klientams reikėjo perbraukti kortele (arba ją įstatyti) du kartus: vieną kartą – norint sumokėti depozitą, o kitą kartą – norint sukurti kortelės atpažinimo ženklą, kuris toliau bus naudojamas vykdant užsakymą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-287">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="f68bc-288">Kai integruoto kanalo atpažinimo ženklų funkcija įjungta, klientai turi perbraukti kortele tik vieną kartą, kad sumokėtų depozitą ir patvirtintų mokėtiną sumą už prekių užsakymą, kuris bus įvykdytas vėliau.</span><span class="sxs-lookup"><span data-stu-id="f68bc-288">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="f68bc-289">Vykdymo metu fiksuojamos patvirtintos lėšos.</span><span class="sxs-lookup"><span data-stu-id="f68bc-289">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="f68bc-290">Prieš integruoto kanalo atpažinimo ženklų funkcijos įtraukimą buvo kuriamas tik pasikartojantis kortelių atpažinimo ženklas, skirtas toliau vykdyti užsakymą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-290">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="f68bc-291">Todėl laukiančio vykdymo lėšos nebūdavo patvirtinamos; kadangi tos lėšos nebuvo sulaikomos šiuo konkrečiu tikslu, buvo mažiau tikėtina, kad bus užfiksuotos vėliau.</span><span class="sxs-lookup"><span data-stu-id="f68bc-291">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="f68bc-292">Vienkartinis perbraukimas kortele nepalaikomas „Retail 8.1.3 versijoje.</span><span class="sxs-lookup"><span data-stu-id="f68bc-292">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="f68bc-293">8.1.3 versijoje kliento užsakymai naudoja tą patį srautą, kuris buvo naudojamas prieš integruoto kanalo atpažinimo ženklų funkcijos įtraukimą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-293">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="f68bc-294">Kortelės, kurios negali išduoti pasikartojančių kortelių atpažinimo ženklų</span><span class="sxs-lookup"><span data-stu-id="f68bc-294">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="f68bc-295">Kai kurių kortų negalima naudoti atliekant integruoto kanalo mokėjimus, nes jos nepalaiko pasikartojančių kortelių atpažinimo ženklų išdavimo.</span><span class="sxs-lookup"><span data-stu-id="f68bc-295">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="f68bc-296">Kai užsakymas sukuriamas EKA, jei depozitas sumokamas naudojant kortelę, kuri nepalaiko pasikartojančių kortelių atpažinimo ženklų, naudojamas ankstesnis kortelės atpažinimo ženklų srautas.</span><span class="sxs-lookup"><span data-stu-id="f68bc-296">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="f68bc-297">Todėl klientas, norintis pateikti mokėjimą, kuris bus toliau naudojamas vykdant užsakymą, turi pateikti antrą kortelę.</span><span class="sxs-lookup"><span data-stu-id="f68bc-297">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="f68bc-298">Jei antra kortelė nepalaiko pasikartojančių kortelių atpažinimo ženklų, atpažinimo ženklo veiksmas bus atmestas ir kasininkas bus paragintas paprašyti kliento pateikti kitą kortelę.</span><span class="sxs-lookup"><span data-stu-id="f68bc-298">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="f68bc-299">Kitos kortelės naudojimas</span><span class="sxs-lookup"><span data-stu-id="f68bc-299">Using a different card</span></span>

<span data-ttu-id="f68bc-300">Klientas, kuris atvyksta į parduotuvę paimti užsakymo, gali naudoti kitą kortelę.</span><span class="sxs-lookup"><span data-stu-id="f68bc-300">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="f68bc-301">Kai užsakymo paėmimo metu kasininkas gauna paraginimą **Naudoti galimą mokėjimo būdą**, kasininkas gali paklausti, ar klientas nori naudoti tą pačią kortelę.</span><span class="sxs-lookup"><span data-stu-id="f68bc-301">When the cashier receives the **Use available payment method** prompt at the time of order pickup, the cashier can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="f68bc-302">Jei klientas prarado kortelę, kuri buvo naudojama kuriant užsakymą, ir nori apmokėti užsakymą naudodamas kitą kortelę, kasininkas gali pasirinkti **Naudoti kitą mokėjimo būdą**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-302">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="f68bc-303">Jei klientas vėliau grįžta paimti daugiau to paties užsakymo prekių ir pradinės kortelės autorizacija vis dar galioja, kasininkas gali dar kartą paklausti, ar klientas nori naudoti šią kortelę.</span><span class="sxs-lookup"><span data-stu-id="f68bc-303">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="f68bc-304">Negaliojančios autorizacijos</span><span class="sxs-lookup"><span data-stu-id="f68bc-304">Invalid authorizations</span></span>

<span data-ttu-id="f68bc-305">Jei kortelė, naudota kuriant užsakymą, nebegalioja, kai produktai pasirenkami paimti, mokėjimo fiksavimo užklausa nepavyks.</span><span class="sxs-lookup"><span data-stu-id="f68bc-305">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="f68bc-306">Tada EKA mokėjimo jungtis bandys sukurti naują autorizaciją ir fiksuoti naudodama tą pačią kortelės informaciją.</span><span class="sxs-lookup"><span data-stu-id="f68bc-306">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="f68bc-307">Jei nauja autorizacija arba fiksavimas nepavyksta, kasininkui bus pranešta, kad mokėjimo nepavyko apdoroti.</span><span class="sxs-lookup"><span data-stu-id="f68bc-307">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="f68bc-308">Tada kasininkas turi gauti naują kliento mokėjimą.</span><span class="sxs-lookup"><span data-stu-id="f68bc-308">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="f68bc-309">Keli galimi mokėjimai</span><span class="sxs-lookup"><span data-stu-id="f68bc-309">Multiple available payments</span></span>

<span data-ttu-id="f68bc-310">Kai paimamas užsakymas, kuriame yra kelios mokėjimo priemonės ir kelios eilutės, pirmiausia kasininkas gauna raginimą **Naudoti galimą mokėjimo būdą**.</span><span class="sxs-lookup"><span data-stu-id="f68bc-310">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="f68bc-311">Jei galima naudoti kelias korteles, kai kasininkas pasirenka **Naudoti galimą mokėjimo būdą**, esamos kortelės mokėjimo priemonių eilutės bus fiksuojamos tol, kol sumokėtas balansas už tuo metu paimamas prekes.</span><span class="sxs-lookup"><span data-stu-id="f68bc-311">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="f68bc-312">Kasininkas negalės pasirinkti kortelės, kuri turėtų būti naudojama paimamoms prekėms apmokėti.</span><span class="sxs-lookup"><span data-stu-id="f68bc-312">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="f68bc-313">Susijusios temos</span><span class="sxs-lookup"><span data-stu-id="f68bc-313">Related topics</span></span>

- [<span data-ttu-id="f68bc-314">DUK apie mokėjimus</span><span class="sxs-lookup"><span data-stu-id="f68bc-314">Payments FAQ</span></span>](/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="f68bc-315">„Dynamics 365“ mokėjimo jungtis, skirta sprendimui „Adyen“</span><span class="sxs-lookup"><span data-stu-id="f68bc-315">Dynamics 365 Payment Connector for Adyen</span></span>](/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [<span data-ttu-id="f68bc-316">Sukonfigūruokite „BOPIS“ „Dynamics 365 Commerce“ vertinamoje aplinkoje</span><span class="sxs-lookup"><span data-stu-id="f68bc-316">Configure BOPIS in a Dynamics 365 Commerce evaluation environment</span></span>](./cpe-bopis.md)



[!INCLUDE[footer-include](../includes/footer-banner.md)]