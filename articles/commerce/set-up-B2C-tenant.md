---
title: „Commerce” B2C nuomotojo sąranka
description: Šioje temoje aprašoma, kaip nustatyti „Azure Active Directory“ („Azure AD“) verslo ir vartotojų (B2C) nuomotojus, skirtus vartotojo svetainės autentifikavimui „Dynamics 365 Commerce“.
author: BrianShook
ms.date: 03/17/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.region: Global
ms.search.industry: retail
ms.author: brshoo
ms.search.validFrom: 2020-02-13
ms.dyn365.ops.version: ''
ms.openlocfilehash: f062f40c9eb883d02c4a0ee06c797ed1b0b22665
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: lt-LT
ms.lasthandoff: 03/31/2021
ms.locfileid: "5794000"
---
# <a name="set-up-a-b2c-tenant-in-commerce"></a><span data-ttu-id="706bb-103">„Commerce” B2C nuomotojo sąranka</span><span class="sxs-lookup"><span data-stu-id="706bb-103">Set up a B2C tenant in Commerce</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="706bb-104">Šioje temoje aprašoma, kaip nustatyti „Azure Active Directory“ („Azure AD“) verslo ir vartotojų (B2C) nuomotojus, skirtus vartotojo svetainės autentifikavimui „Dynamics 365 Commerce“.</span><span class="sxs-lookup"><span data-stu-id="706bb-104">This topic describes how to set up your Azure Active Directory (Azure AD) business-to-consumer (B2C) tenants for user site authentication in Dynamics 365 Commerce.</span></span>

<span data-ttu-id="706bb-105">„Dynamics 365 Commerce“ naudoja „Azure AD“ B2C, kad palaikytų vartotojo kredencialus ir autentifikavimo srautus.</span><span class="sxs-lookup"><span data-stu-id="706bb-105">Dynamics 365 Commerce uses Azure AD B2C to support user credential and authentication flows.</span></span> <span data-ttu-id="706bb-106">Vartotojas gali prisiregistruoti, prisijungti ir iš naujo nustatyti savo slaptažodį naudodamas šiuos srautus.</span><span class="sxs-lookup"><span data-stu-id="706bb-106">A user can sign up, sign in, and reset their password through these flows.</span></span> <span data-ttu-id="706bb-107">„Azure AD“ B2C saugoma vartotojo slapto autentifikavimo informacija, pvz., vartotojo vardas ir slaptažodis.</span><span class="sxs-lookup"><span data-stu-id="706bb-107">Azure AD B2C stores sensitive user authentication information, such as username and password.</span></span> <span data-ttu-id="706bb-108">Vartotoje įraše B2C nuomotojuje bus saugomas arba B2C vietos sąskaitos įrašas arba B2C socialinės tapatybės teikimo įrankio įrašas.</span><span class="sxs-lookup"><span data-stu-id="706bb-108">The user record in the B2C tenant will store either a B2C local account record or a B2C social identity provider record.</span></span> <span data-ttu-id="706bb-109">Šie B2C įrašai bus susieti su kliento įrašu „Commerce“ aplinkoje.</span><span class="sxs-lookup"><span data-stu-id="706bb-109">These B2C records will link back to the customer record in the Commerce environment.</span></span>

> [!WARNING] 
> <span data-ttu-id="706bb-110">„Azure AD B2C” panaikins senus (senstelėjusius) vartotojų srautus 2021 m. rugpjūčio mėnesio 1 d.</span><span class="sxs-lookup"><span data-stu-id="706bb-110">Azure AD B2C will retire old (legacy) user flows by August 1, 2021.</span></span> <span data-ttu-id="706bb-111">Todėl turėtumėte planuoti perkelti savo vartotojų srautus į naują rekomenduojamą versiją.</span><span class="sxs-lookup"><span data-stu-id="706bb-111">Therefore, you should plan to migrate your user flows to the new recommended version.</span></span> <span data-ttu-id="706bb-112">Nauja versija suteikia lygiavertiškas bei naujas funkcijas.</span><span class="sxs-lookup"><span data-stu-id="706bb-112">The new version provides feature parity and new features.</span></span> <span data-ttu-id="706bb-113">„Commerce” 10.0.15 arba naujesnės versijos modulių biblioteka turi būti naudojama su rekomenduojamais B2C vartotojų srautais.</span><span class="sxs-lookup"><span data-stu-id="706bb-113">The module library for Commerce version 10.0.15 or higher should be used with the recommended B2C user flows.</span></span> <span data-ttu-id="706bb-114">Daugiau informacijos rasite [„Azure Active Directory B2C” vartotojų srautai](https://docs.microsoft.com/azure/active-directory-b2c/user-flow-overview).</span><span class="sxs-lookup"><span data-stu-id="706bb-114">For more information, see [User flows in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/user-flow-overview).</span></span>
 
 > [!NOTE]
 > <span data-ttu-id="706bb-115">Į „Commerce” vertinimo aplinkas yra iš anksto įkeltas „Azure AD B2C” nuomotojas demonstraciniais tikslais.</span><span class="sxs-lookup"><span data-stu-id="706bb-115">Commerce evaluation environments come with a pre-loaded Azure AD B2C tenant for demonstration purposes.</span></span> <span data-ttu-id="706bb-116">Vertinimo aplinkose nėra būtina įkelti savo „Azure AD B2C” nuomotojo atliekant žemiau nurodytus veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-116">Loading your own Azure AD B2C tenant using the steps below is not required for evaluation environments.</span></span>

## <a name="create-or-link-to-an-existing-aad-b2c-tenant-in-the-azure-portal"></a><span data-ttu-id="706bb-117">Kūrimas arba susiejimas su esamu AAD B2C nuomotoju „Azure“ portale</span><span class="sxs-lookup"><span data-stu-id="706bb-117">Create or link to an existing AAD B2C tenant in the Azure portal</span></span>

1. <span data-ttu-id="706bb-118">Prisijunkite prie [„Azure“ portalo](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="706bb-118">Sign in to the [Azure portal](https://portal.azure.com/).</span></span>
1. <span data-ttu-id="706bb-119">„Azure“ portalo meniu pasirinkite **Kurti išteklius**.</span><span class="sxs-lookup"><span data-stu-id="706bb-119">From the Azure portal menu, select **Create a resource**.</span></span> <span data-ttu-id="706bb-120">Įsitikinkite, kad naudojate prenumeratą ir katalogą, kurie bus susieti su jūsų „Commerce“ aplinka.</span><span class="sxs-lookup"><span data-stu-id="706bb-120">Be sure to use the subscription and directory that will be connected with your Commerce environment.</span></span>

    ![Išteklių „Azure“ portale kūrimas](./media/B2CImage_1.png)

1. <span data-ttu-id="706bb-122">Eikite į **Tapatybė \> „Azure Active Directory“ B2C**.</span><span class="sxs-lookup"><span data-stu-id="706bb-122">Go to **Identity \> Azure Active Directory B2C**.</span></span>
1. <span data-ttu-id="706bb-123">Kai būsite puslapyje **Kurti naują B2C nuomotoją arba susieti su esamu nuomotoju**, pasirinkite vieną iš toliau apteiktų parinkčių, kuri geriausiai atitinka jūsų įmonės poreikius.</span><span class="sxs-lookup"><span data-stu-id="706bb-123">Once on the **Create New B2C Tenant or Link to existing Tenant** page, use one of the options below that best suits your company's needs:</span></span>

    - <span data-ttu-id="706bb-124">**Kurti naują „Azure AD“ B2C nuomotoją**: naudokite šią parinktį, kad sukurtumėte naują AAD B2C nuomotoją.</span><span class="sxs-lookup"><span data-stu-id="706bb-124">**Create a new Azure AD B2C Tenant**: Use this option to create a new AAD B2C tenant.</span></span>
        1. <span data-ttu-id="706bb-125">Pasirinkite **Kurti naują „Azure AD“ B2C nuomotoją**.</span><span class="sxs-lookup"><span data-stu-id="706bb-125">Select **Create a new Azure AD B2C Tenant**.</span></span>
        1. <span data-ttu-id="706bb-126">Dalyje **Organizacijos pavadinimas** įveskite organizacijos pavadinimą.</span><span class="sxs-lookup"><span data-stu-id="706bb-126">Under **Organization name**, enter the organization name.</span></span>
        1. <span data-ttu-id="706bb-127">Dalyje **Pradinis domeno pavadinimas** įveskite pradinį domeno pavadinimą.</span><span class="sxs-lookup"><span data-stu-id="706bb-127">Under **Initial domain name**, enter the initial domain name.</span></span>
        1. <span data-ttu-id="706bb-128">Dalyje **Šalis arba regionas** pasirinkite šalį arba regioną.</span><span class="sxs-lookup"><span data-stu-id="706bb-128">For **Country or region**, select the country or region.</span></span>
        1. <span data-ttu-id="706bb-129">Pasirinkite **Kurti**, kad sukurtumėte nuomotoją.</span><span class="sxs-lookup"><span data-stu-id="706bb-129">Select **Create** to create the tenant.</span></span>

     ![Naujo „Azure AD“ nuomotojo kūrimas](./media/B2CImage_2.png)

     - <span data-ttu-id="706bb-131">**Susieti esamą „Azure AD“ B2C nuomotoją su mano „Azure“ prenumerata**: naudokite šią parinktį, jei jau turite „Azure AD“ B2C nuomininką, su kuriuo norite susieti.</span><span class="sxs-lookup"><span data-stu-id="706bb-131">**Link an existing Azure AD B2C Tenant to my Azure subscription**: Use this option if you already have an Azure AD B2C tenant you want to link to.</span></span>
        1. <span data-ttu-id="706bb-132">Pasirinkite **Susieti esamą „Azure AD“ B2C nuomotoją su mano Azure prenumerata**.</span><span class="sxs-lookup"><span data-stu-id="706bb-132">Select **Link an existing Azure AD B2C Tenant to my Azure subscription**.</span></span>
        1. <span data-ttu-id="706bb-133">Jei **„Azure AD“ B2C nuomotojas**, pasirinkite atitinkamą B2C nuomotoją.</span><span class="sxs-lookup"><span data-stu-id="706bb-133">For **Azure AD B2C Tenant**, select the appropriate B2C tenant.</span></span> <span data-ttu-id="706bb-134">Jei pasirinkimo lauke rodomas pranešimas „Nerasta tinkamų B2C nuomotojų“, neturite tinkamo B2C nuomotojo ir turite sukurti naują.</span><span class="sxs-lookup"><span data-stu-id="706bb-134">If the message "No eligible B2C Tenants found" appears in the selection box, you do not have an existing eligible B2C tenant and will need to create a new one.</span></span>
        1. <span data-ttu-id="706bb-135">Jei **Išteklių grupė**, pasirinkite **Kurti naują**.</span><span class="sxs-lookup"><span data-stu-id="706bb-135">For **Resource group**, select **Create new**.</span></span> <span data-ttu-id="706bb-136">Įveskite išteklių grupės, kurioje bus nuomotojas, **Pavadinimas**, pasirinkite **Išteklių grupės vieta**, tada pasirinkite **Kurti**.</span><span class="sxs-lookup"><span data-stu-id="706bb-136">Enter a **Name** for the resource group that will contain the tenant, select the **Resource group location**, and then select **Create**.</span></span>

    ![Esamo „Azure AD“ B2C nuomotojo susiejimas su „Azure“ prenumerata](./media/B2CImage_3.png)

1. <span data-ttu-id="706bb-138">Kai sukuriamas naujas „Azure AD“ B2C katalogas (tai gali užtrukti kelias akimirkas), ataskaitų srityje bus pradėtas rodyti saitas į ataskaitų sritį.</span><span class="sxs-lookup"><span data-stu-id="706bb-138">Once the new Azure AD B2C directory is created (this may take a few moments), a link to the new directory will appear on the dashboard.</span></span> <span data-ttu-id="706bb-139">Šis saitas nukreips jus į puslapį „Sveiki atvykę į „Azure Active Directory“ B2C“.</span><span class="sxs-lookup"><span data-stu-id="706bb-139">This link will direct you to the "Welcome to Azure Active Directory B2C" page.</span></span>

    ![Susiejimas su nauju AAD katalogu](./media/B2CImage_4.png)

> [!NOTE]
> <span data-ttu-id="706bb-141">Jei turite kelias savo „Azure“ sąskaitos prenumeratas arba nustatėte B2C nuomotoją nesusiedami su aktyvia prenumerata, nesusiejant su aktyvia prenumerata, juosta **Trikčių diagnostika** jus nukreips, kad susietumėte nuomotoją su prenumerata.</span><span class="sxs-lookup"><span data-stu-id="706bb-141">If you have multiple subscriptions within your Azure account or have set up the B2C tenant without linking to an active subscription, a **Troubleshoot** banner will direct you to link the tenant to a subscription.</span></span> <span data-ttu-id="706bb-142">Pasirinkite trikčių diagnostikos pranešimą ir sekite instrukcijas, kad išspręstumėte prenumeratos problemą.</span><span class="sxs-lookup"><span data-stu-id="706bb-142">Select the troubleshooting message and follow the instructions to resolve the subscription issue.</span></span>

<span data-ttu-id="706bb-143">Šiame vaizde parodytas „Azure AD“ B2C **Trikčių diagnostika** juosta.</span><span class="sxs-lookup"><span data-stu-id="706bb-143">The following image shows an example of an Azure AD B2C **Troubleshoot** banner.</span></span>

![Įspėjimas, rodantis, kad kataloge nėra aktyvios prenumeratos](./media/B2CImage_5.png)

## <a name="create-the-b2c-application"></a><span data-ttu-id="706bb-145">B2C programos kūrimas</span><span class="sxs-lookup"><span data-stu-id="706bb-145">Create the B2C application</span></span>

<span data-ttu-id="706bb-146">Sukūrus B2C nuomotoją, naujam jūsų „Azure AD B2C” nuomotojui bus sukurta B2C programa, skirta sąveikauti su „Commerce“.</span><span class="sxs-lookup"><span data-stu-id="706bb-146">Once the B2C tenant has been created, you will create a B2C application within your new Azure AD B2C tenant to interact with Commerce.</span></span>

<span data-ttu-id="706bb-147">Norėdami sukurti B2C programą, atlikite tolesnius veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-147">To create the B2C application, follow these steps.</span></span>

1. <span data-ttu-id="706bb-148">„Azure“ portale pasirinkite **Programų registracijos**, o tada pasirinkite **Nauja registracija**.</span><span class="sxs-lookup"><span data-stu-id="706bb-148">In the Azure portal, select **App registrations**, and then select **New registration**.</span></span>
1. <span data-ttu-id="706bb-149">Dalyje **Pavadinimas** įveskite „Azure AD B2C” programai suteikiamą pavadinimą.</span><span class="sxs-lookup"><span data-stu-id="706bb-149">Under **Name**, enter the name to give this Azure AD B2C application.</span></span>
1. <span data-ttu-id="706bb-150">Dalyje **Palaikomi abonementų tipai** pasirinkite **Abonementai bet kuriame tapatybės teikėjo arba organizacijos kataloge (vartotojų su vartotojų srautais autentifikavimui)**.</span><span class="sxs-lookup"><span data-stu-id="706bb-150">Under **Supported account types**, select **Accounts in any identity provider or organizational directory (for authenticating users with user flows)**.</span></span>
1. <span data-ttu-id="706bb-151">Dalyje **Peradresavimo URI** įveskite jūsų paskirto atsakymo URL kaip **Žiniatinklio** tipą.</span><span class="sxs-lookup"><span data-stu-id="706bb-151">For **Redirect URI**, enter your dedicated reply URLs as type **Web**.</span></span> <span data-ttu-id="706bb-152">Daugiau informacijos apie atsakymo URL ir kaip juos formatuoti, rasite [Atsakymo URL](#reply-urls) žemiau.</span><span class="sxs-lookup"><span data-stu-id="706bb-152">For information on reply URLs and how to format them, see [Reply URLs](#reply-urls) below.</span></span>
1. <span data-ttu-id="706bb-153">Dalyje **Teisės** pasirinkite **Suteikti administratoriaus sutikimą „OpenID” ir prieigos neprisijungus teisėms**.</span><span class="sxs-lookup"><span data-stu-id="706bb-153">For **Permissions**, select **Grant admin consent to openid and offline_access permissions**.</span></span>
1. <span data-ttu-id="706bb-154">Pasirinkite **Registruotis**.</span><span class="sxs-lookup"><span data-stu-id="706bb-154">Select **Register**.</span></span>
1. <span data-ttu-id="706bb-155">Pasirinkite naujai sukurtą programą ir pereikite į **Autentifikavimo** meniu.</span><span class="sxs-lookup"><span data-stu-id="706bb-155">Select the newly-created application and navigate to the **Authentication** menu.</span></span> <span data-ttu-id="706bb-156">Čia galite įtraukti papildomus **Peradresavimo URL**, jeigu jų reikia (dabar arba vėliau).</span><span class="sxs-lookup"><span data-stu-id="706bb-156">Here you can add additional **Redirect URIs** if needed (now or later).</span></span> <span data-ttu-id="706bb-157">Pereikite prie kito veiksmo, jei šiuo metu jie nereikalingi.</span><span class="sxs-lookup"><span data-stu-id="706bb-157">Continue to the next step if not currently needed.</span></span>
1. <span data-ttu-id="706bb-158">Dalyje **Netiesioginis suteikiamas** pasirinkite tiek **Prieigos atpažinimo ženklus**, tiek **ID atpažinimo ženklus**, kad įgalintumėte juos programai.</span><span class="sxs-lookup"><span data-stu-id="706bb-158">Under **Implicit grant**, select both **Access tokens** and **ID tokens** to enable them for the application.</span></span> <span data-ttu-id="706bb-159">Pasirinkite **Įrašyti**.</span><span class="sxs-lookup"><span data-stu-id="706bb-159">Select **Save**.</span></span>
1. <span data-ttu-id="706bb-160">Eikite į „Azure” portalo **Apžvalgos** meniu ir nukopijuokite **Programos (kliento) ID**.</span><span class="sxs-lookup"><span data-stu-id="706bb-160">Go to the **Overview** menu of the Azure portal and copy the **Application (client) ID**.</span></span> <span data-ttu-id="706bb-161">Pasižymėkite šį ID, nes jis bus reikalingas kitiems nustatymo veiksmams (toliau nurodytą kaip **Kliento GUID**).</span><span class="sxs-lookup"><span data-stu-id="706bb-161">Note this ID for later setup steps (referenced later as the **Client GUID**).</span></span>

<span data-ttu-id="706bb-162">Papildomų nuorodų apie „Azure AD B2C” programos registracijas rasite [Nauja programų registracijų patirtis „Azure Active Directory B2C”](https://docs.microsoft.com/azure/active-directory-b2c/app-registrations-training-guide)</span><span class="sxs-lookup"><span data-stu-id="706bb-162">For additional reference on App Registrations in Azure AD B2C, please see [The new App registrations experience for Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/app-registrations-training-guide)</span></span>

### <a name="reply-urls"></a><span data-ttu-id="706bb-163">Atsakymo URL</span><span class="sxs-lookup"><span data-stu-id="706bb-163">Reply URLs</span></span>

<span data-ttu-id="706bb-164">Atsakymo URL yra svarbūs, nes jie suteikia leidžiamų grąžinimo domenų sąrašą, kai jūsų svetainė reikalauja „Azure AD“ B2C, kad būtų autentifikuotas vartotojas.</span><span class="sxs-lookup"><span data-stu-id="706bb-164">Reply URLs are important as they provide an allow list of the return domains when your site calls Azure AD B2C to authenticate a user.</span></span> <span data-ttu-id="706bb-165">Tai leidžia autentifikuoti vartotoją grąžinti į domeną, iš kurio jis prisijungė (jūsų svetainės domenas).</span><span class="sxs-lookup"><span data-stu-id="706bb-165">This permits the return of the authenticated user back to the domain from which they are signing into (your site domain).</span></span> 

<span data-ttu-id="706bb-166">Lauke **Atsakymo URL** ekrane **„Azure AD“ B2c – programos \> Nauja programa** turite įtraukti atskiras eilutes tiek svetainės domenui, tiek (kai jūsų aplinka paruošta) „Commerce“ sugeneruotam URL.</span><span class="sxs-lookup"><span data-stu-id="706bb-166">In the **Reply URL** box on the **Azure AD B2c - Applications \> New application** screen, you need to add separate lines for both your site domain and (once your environment is provisioned) the Commerce-generated URL.</span></span> <span data-ttu-id="706bb-167">Šie URL turi visada naudoti tinkamą URL formatą ir jie turi būti tik pagrindiniai URL (nėra pasvirųjų brūkšnių ar maršrutų).</span><span class="sxs-lookup"><span data-stu-id="706bb-167">These URLs must always use a valid URL format and must be base URLs only (no trailing forward slashes or paths).</span></span> <span data-ttu-id="706bb-168">Tada eilutę ``/_msdyn365/authresp`` reikia pridėti prie pagrindinių URL, kaip tolesniuose pavyzdžiuose.</span><span class="sxs-lookup"><span data-stu-id="706bb-168">The string ``/_msdyn365/authresp`` then needs to be appended to the base URLs, as in the following examples.</span></span>

- <span data-ttu-id="706bb-169">``https://www.fabrikam.com/_msdyn365/authresp`` (Domenas turi visiškai sutapti su „E-commerce“ domenu.</span><span class="sxs-lookup"><span data-stu-id="706bb-169">``https://www.fabrikam.com/_msdyn365/authresp`` (The domain should match the e-commerce domain completely.</span></span> <span data-ttu-id="706bb-170">Jei turite kelis domenus, turite įtraukti šį URL į kiekvieną domeną.)</span><span class="sxs-lookup"><span data-stu-id="706bb-170">If you have multiple domains, you need to add this URL for each domain.)</span></span>
- ``https://fabrikam-prod.commerce.dynamics.com/_msdyn365/authresp``

## <a name="create-user-flow-policies"></a><span data-ttu-id="706bb-171">Vartotojo srauto strategijų kūrimas</span><span class="sxs-lookup"><span data-stu-id="706bb-171">Create user flow policies</span></span>

<span data-ttu-id="706bb-172">Vartotojų srautai yra strategijos, kurias „Azure AD“ B2C naudoja, kad suteiktų saugą prisiregistravimą, prisijungimą, profilio redagavimą ir pamiršto slaptažodžio keitimą.</span><span class="sxs-lookup"><span data-stu-id="706bb-172">User flows are the policies Azure AD B2C uses to provide secure sign in, sign up, edit profile, and forget password user experiences.</span></span> <span data-ttu-id="706bb-173">„Dynamics 365 Commerce“ naudoja šiuos srautus, kad galėtų atlikti strategijos veiksmus, skirtus sąveikauti „Azure AD“ B2C nuomotoju.</span><span class="sxs-lookup"><span data-stu-id="706bb-173">Dynamics 365 Commerce uses these flows to perform the policy actions to interact with the Azure AD B2C tenant.</span></span> <span data-ttu-id="706bb-174">Kai vartotojas sąveikauja su šiomis strategijomis, jis nukreipiami į „Azure AD“ B2C nuomotoją, kad atliktų veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-174">When a user interacts with these policies, they are redirected to the Azure AD B2C tenant to perform the actions.</span></span>

<span data-ttu-id="706bb-175">„Azure AD“ B2C pateikiami trys pagrindiniai vartotojo srautų tipai:</span><span class="sxs-lookup"><span data-stu-id="706bb-175">Azure AD B2C provides three basic user flow types:</span></span>
- <span data-ttu-id="706bb-176">Prisiregistravimas ir prisijungimas</span><span class="sxs-lookup"><span data-stu-id="706bb-176">Sign up and sign in</span></span>
- <span data-ttu-id="706bb-177">Profilio redagavimas</span><span class="sxs-lookup"><span data-stu-id="706bb-177">Profile editing</span></span>
- <span data-ttu-id="706bb-178">Slaptažodžio nustatymas iš naujo</span><span class="sxs-lookup"><span data-stu-id="706bb-178">Password reset</span></span>

<span data-ttu-id="706bb-179">Galite pasirinkti naudoti numatytuosius vartotojo srautus, kuriuos siūlo „Azure AD“ ir kurie bus rodomi AAD B2C puslapyje.</span><span class="sxs-lookup"><span data-stu-id="706bb-179">You can choose to use the default user flows provided by Azure AD, which will display a page hosted by AAD B2C.</span></span> <span data-ttu-id="706bb-180">Arba galite sukurti HTML puslapį, kad galėtumėte valdyti šios vartotojo srauto patirties apipavidalinimą.</span><span class="sxs-lookup"><span data-stu-id="706bb-180">Alternately, you can create an HTML page to control the look and feel of these user flow experiences.</span></span> 

<span data-ttu-id="706bb-181">Norėdami tinkinti vartotojo strategijos puslapius su „Dynamics 365 Commerce“ platformoje sukurtais puslapiais, skaitykite [Pasirinktinių puslapių nustatymas vartotojų prisijungimui](custom-pages-user-logins.md).</span><span class="sxs-lookup"><span data-stu-id="706bb-181">To customize the user policy pages with pages built in Dynamics 365 Commerce, see [Set up custom pages for user logins](custom-pages-user-logins.md).</span></span> <span data-ttu-id="706bb-182">Daugiau informacijos žr. [Vartotojų patirties sąsajos tinkinimas „Azure Active Directory“ B2C](https://docs.microsoft.com/azure/active-directory-b2c/tutorial-customize-ui).</span><span class="sxs-lookup"><span data-stu-id="706bb-182">For additional information, see [Customize the interface of user experiences in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/tutorial-customize-ui).</span></span>

### <a name="create-a-sign-up-and-sign-in-user-flow-policy"></a><span data-ttu-id="706bb-183">Prisiregistravimo ir prisijungimo vartotojo srauto strategijos kūrimas</span><span class="sxs-lookup"><span data-stu-id="706bb-183">Create a sign up and sign in user flow policy</span></span>

<span data-ttu-id="706bb-184">Norėdami sukurti prisiregistravimo ir prisijungimo vartotojo srauto strategiją, atlikite šiuos veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-184">To create a sign up and sign in user flow policy, follow these steps.</span></span>

1. <span data-ttu-id="706bb-185">„Azure“ portale kairiojoje naršymo srityje pasirinkite **Vartotojo srautai (strategijos)**.</span><span class="sxs-lookup"><span data-stu-id="706bb-185">In the Azure portal, select **User flows (policies)** in the left navigation pane.</span></span>
1. <span data-ttu-id="706bb-186">Puslapyje **„Azure AD“ B2C – vartotojo srautai (strategijos)** pasirinkite **Naujas vartotojo srautas**.</span><span class="sxs-lookup"><span data-stu-id="706bb-186">On the **Azure AD B2C – User flows (policies)** page, select **New User Flow**.</span></span>
1. <span data-ttu-id="706bb-187">Pasirinkite **Registravimosi ir prisijungimo** strategiją, o tada pasirinkite **Rekomenduojamą** versiją.</span><span class="sxs-lookup"><span data-stu-id="706bb-187">Select the **Sign up and sign in** policy, and then select the **Recommended** version.</span></span>
1. <span data-ttu-id="706bb-188">Dalyje **Pavadinimas** įveskite strategijos pavadinimą.</span><span class="sxs-lookup"><span data-stu-id="706bb-188">Under **Name**, enter a policy name.</span></span> <span data-ttu-id="706bb-189">Šis pavadinimas bus rodomas su prievardžiu, kurį priskyrė portalas (pavyzdžiui, „B2C_1_“).</span><span class="sxs-lookup"><span data-stu-id="706bb-189">This name will display afterwards with a prefix the portal assigns (for example, "B2C_1_").</span></span>
1. <span data-ttu-id="706bb-190">Dalyje **Tapatybės teikimo įrankiai** pažymėkite atitinkamą žymės langelį.</span><span class="sxs-lookup"><span data-stu-id="706bb-190">Under **Identity providers**, select the appropriate check box.</span></span>
1. <span data-ttu-id="706bb-191">Dalyje **Kelių faktorių autentifikavimas** atlikite pasirinkimą pagal savo įmonę.</span><span class="sxs-lookup"><span data-stu-id="706bb-191">Under **Multifactor Authentication**, select the appropriate choice for your company.</span></span> 
1. <span data-ttu-id="706bb-192">Dalyje **Vartotojo atributai ir pretenzijos** pasirinkite pasirinktis, kad būtų galima rinkti atributus arba grąžinti pretenzijas, kaip tinkama.</span><span class="sxs-lookup"><span data-stu-id="706bb-192">Under **User attributes and claims**, select options to collect attributes or return claims as appropriate.</span></span> <span data-ttu-id="706bb-193">„Commerce“ reikia nustatyti tolesnes numatytąsias parinktis:</span><span class="sxs-lookup"><span data-stu-id="706bb-193">Commerce requires the following default options:</span></span>

    | <span data-ttu-id="706bb-194">**Rinkti atributą**</span><span class="sxs-lookup"><span data-stu-id="706bb-194">**Collect  attribute**</span></span> | <span data-ttu-id="706bb-195">**Grąžinti pretenziją**</span><span class="sxs-lookup"><span data-stu-id="706bb-195">**Return  claim**</span></span> |
    | ---------------------- | ----------------- |
    | <span data-ttu-id="706bb-196">El. pašto adresas</span><span class="sxs-lookup"><span data-stu-id="706bb-196">Email Address</span></span>          | <span data-ttu-id="706bb-197">El. pašto adresai</span><span class="sxs-lookup"><span data-stu-id="706bb-197">Email Addresses</span></span>   |
    | <span data-ttu-id="706bb-198">Vardas</span><span class="sxs-lookup"><span data-stu-id="706bb-198">Given Name</span></span>             | <span data-ttu-id="706bb-199">Vardas</span><span class="sxs-lookup"><span data-stu-id="706bb-199">Given Name</span></span>        |
    |                        | <span data-ttu-id="706bb-200">Tapatybės teikėjas</span><span class="sxs-lookup"><span data-stu-id="706bb-200">Identity Provider</span></span> |
    | <span data-ttu-id="706bb-201">Pavardė</span><span class="sxs-lookup"><span data-stu-id="706bb-201">Surname</span></span>                | <span data-ttu-id="706bb-202">Pavardė</span><span class="sxs-lookup"><span data-stu-id="706bb-202">Surname</span></span>           |
    |                        | <span data-ttu-id="706bb-203">Vartotojo objekto ID</span><span class="sxs-lookup"><span data-stu-id="706bb-203">User’s Object ID</span></span>  |

1. <span data-ttu-id="706bb-204">Pasirinkite **Kurti**.</span><span class="sxs-lookup"><span data-stu-id="706bb-204">Select **Create**.</span></span>

<span data-ttu-id="706bb-205">Tolesniame vaizde pateikiamas „Azure AD“ B2C prisiregistravimo ir prisijungimo vartotojo srauto pavyzdys.</span><span class="sxs-lookup"><span data-stu-id="706bb-205">The following image is an example of the Azure AD B2C sign up and sign in user flow.</span></span>

![Prisiregistravimo ir prisijungimo strategijos parametrai](./media/B2CImage_11.png)

<span data-ttu-id="706bb-207">Tolesniame paveiksle rodoma parinktis **Vykdyti vartotojo srautą** „Azure AD“ B2C prisiregistravimo ir prisijungimo vartotojo sraute.</span><span class="sxs-lookup"><span data-stu-id="706bb-207">The following image shows the **Run user flow** option in the Azure AD B2C sign up and sign in user flow.</span></span>

![Vartotojo srauto vykdymo parinktis strategijos sraute](./media/B2CImage_23.png)
   
### <a name="create-a-profile-editing-user-flow-policy"></a><span data-ttu-id="706bb-209">Profilio redagavimo vartotojo srauto strategijos kūrimas</span><span class="sxs-lookup"><span data-stu-id="706bb-209">Create a profile editing user flow policy</span></span>

<span data-ttu-id="706bb-210">Norėdami sukurti profilio redagavimo vartotojo srauto strategiją, atlikite šiuos veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-210">To create a profile editing user flow policy, follow these steps.</span></span>

1. <span data-ttu-id="706bb-211">„Azure“ portale kairiojoje naršymo srityje pasirinkite **Vartotojo srautai (strategijos)**.</span><span class="sxs-lookup"><span data-stu-id="706bb-211">In the Azure portal, select **User flows (policies)** in the left navigation pane.</span></span>
1. <span data-ttu-id="706bb-212">Puslapyje **„Azure AD“ B2C – vartotojo srautai (strategijos)** pasirinkite **Naujas vartotojo srautas**.</span><span class="sxs-lookup"><span data-stu-id="706bb-212">On the **Azure AD B2C – User flows (policies)** page, select **New User Flow**.</span></span>
1. <span data-ttu-id="706bb-213">Pasirinkite **Profilio redagavimas**, o tada pasirinkite **Rekomenduojamą** versiją.</span><span class="sxs-lookup"><span data-stu-id="706bb-213">Select **Profile editing**, and then select the **Recommended** version.</span></span>
1. <span data-ttu-id="706bb-214">Dalyje **Pavadinimas** įveskite profilio redagavimo vartotojo srautą.</span><span class="sxs-lookup"><span data-stu-id="706bb-214">Under **Name**, enter the profile editing user flow.</span></span> <span data-ttu-id="706bb-215">Šis pavadinimas bus rodomas su prievardžiu, kurį priskyrė portalas (pavyzdžiui, „B2C_1_“).</span><span class="sxs-lookup"><span data-stu-id="706bb-215">This name will display afterwards with a prefix the portal assigns (for example, "B2C_1_").</span></span>
1. <span data-ttu-id="706bb-216">Dalyje **Tapatybės teikėjai** pasirinkite **El. pašto prisijungimas**.</span><span class="sxs-lookup"><span data-stu-id="706bb-216">Under **Identity providers**, select **Email SignIn**.</span></span>
1. <span data-ttu-id="706bb-217">Dalyje **Vartotojo atributai** pažymėkite bet kurį iš šių žymės langelių:</span><span class="sxs-lookup"><span data-stu-id="706bb-217">Under **User attributes**, select the following check boxes:</span></span>
    - <span data-ttu-id="706bb-218">**El. pašto adresai** (tik **Grąžinti pretenziją**)</span><span class="sxs-lookup"><span data-stu-id="706bb-218">**Email Addresses** (**Return claim** only)</span></span>
    - <span data-ttu-id="706bb-219">**Vardas** (**Rinkti atributą** ir **Grąžinti pretenziją**)</span><span class="sxs-lookup"><span data-stu-id="706bb-219">**Given Name** (**Collect attribute** and **Return claim**)</span></span>
    - <span data-ttu-id="706bb-220">**Tapatybės teikimo įrankis** (tik **Grąžinti pretenziją** )</span><span class="sxs-lookup"><span data-stu-id="706bb-220">**Identity Provider** (**Return claim** only)</span></span>
    - <span data-ttu-id="706bb-221">**Pavardę** (**Rinkti atributą** ir **Grąžinti pretenziją**)</span><span class="sxs-lookup"><span data-stu-id="706bb-221">**Surname** (**Collect attribute** and **Return claim**)</span></span>
    - <span data-ttu-id="706bb-222">**Vartotojo objekto ID** (tik **Grąžinti pretenziją**)</span><span class="sxs-lookup"><span data-stu-id="706bb-222">**User's Object ID** (**Return claim** only)</span></span>
1. <span data-ttu-id="706bb-223">Pasirinkite **Kurti**.</span><span class="sxs-lookup"><span data-stu-id="706bb-223">Select **Create**.</span></span>

<span data-ttu-id="706bb-224">Tolesniame paveiksle pateiktas „Azure AD“ B2C profilio redagavimo vartotojo srauto pavyzdys.</span><span class="sxs-lookup"><span data-stu-id="706bb-224">The following image shows an example of the Azure AD B2C profile editing user flow.</span></span>

![Profilio redagavimo vartotojo srauto kūrimas](./media/B2CImage_12.png)

### <a name="create-a-password-reset-user-flow-policy"></a><span data-ttu-id="706bb-226">Slaptažodžio nustatymo iš naujo vartotojo srauto strategijos kūrimas</span><span class="sxs-lookup"><span data-stu-id="706bb-226">Create a password reset user flow policy</span></span>

<span data-ttu-id="706bb-227">Norėdami sukurti slaptažodžio nustatymo iš naujo vartotojo srauto strategiją, atlikite šiuos veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-227">To create a password reset user flow policy, follow these steps.</span></span>

1. <span data-ttu-id="706bb-228">„Azure“ portale kairiojoje naršymo srityje pasirinkite **Vartotojo srautai (strategijos)**.</span><span class="sxs-lookup"><span data-stu-id="706bb-228">In the Azure portal, select **User flows (policies)** in the left navigation pane.</span></span>
1. <span data-ttu-id="706bb-229">Puslapyje **„Azure AD“ B2C – vartotojo srautai (strategijos)** pasirinkite **Naujas vartotojo srautas**.</span><span class="sxs-lookup"><span data-stu-id="706bb-229">On the **Azure AD B2C – User flows (policies)** page, select **New User Flow**.</span></span>
1. <span data-ttu-id="706bb-230">Pasirinkite **Slaptažodžio nustatymas iš naujo**, o tada pasirinkite **Rekomenduojamą** versiją.</span><span class="sxs-lookup"><span data-stu-id="706bb-230">Select **Password Reset**, and then select the **Recommended** version.</span></span>
1. <span data-ttu-id="706bb-231">Dalyje **Pavadinimas** įveskite slaptažodžio nustatymo iš naujo vartotojo srauto pavadinimą.</span><span class="sxs-lookup"><span data-stu-id="706bb-231">Under **Name**, enter a name for the password reset user flow.</span></span>
1. <span data-ttu-id="706bb-232">Dalyje **Tapatybės teikimo įrankiai** pasirinkite **Iš naujo nustatyti slaptažodį naudojant el. pašto adresą**.</span><span class="sxs-lookup"><span data-stu-id="706bb-232">Under **Identity providers**, select **Reset password using email address**.</span></span>
1. <span data-ttu-id="706bb-233">Pasirinkite **Kurti**.</span><span class="sxs-lookup"><span data-stu-id="706bb-233">Select **Create**.</span></span>
1. <span data-ttu-id="706bb-234">Dalyje **Programos teiginiai** pažymėkite bet kurį iš šių žymės langelių:</span><span class="sxs-lookup"><span data-stu-id="706bb-234">Under **Application claims**, select the following check boxes:</span></span>
    - <span data-ttu-id="706bb-235">**El. pašto adresai**</span><span class="sxs-lookup"><span data-stu-id="706bb-235">**Email addresses**</span></span>
    - <span data-ttu-id="706bb-236">**Vardas**</span><span class="sxs-lookup"><span data-stu-id="706bb-236">**Given Name**</span></span>
    - <span data-ttu-id="706bb-237">**Pavardė**</span><span class="sxs-lookup"><span data-stu-id="706bb-237">**Surname**</span></span>
    - <span data-ttu-id="706bb-238">**Vartotojo objekto ID**</span><span class="sxs-lookup"><span data-stu-id="706bb-238">**User's Object ID**</span></span>
1. <span data-ttu-id="706bb-239">Pasirinkite **Kurti**.</span><span class="sxs-lookup"><span data-stu-id="706bb-239">Select **Create**.</span></span>

<span data-ttu-id="706bb-240">Toliau pateiktame paveiksle parodyta, kur nustatyti **Nustatyti iš naujo slaptažodį naudojant el. pašto adresą** „Azure AD“ B2C vartotojo slaptažodžio nustatymo iš naujo sraute.</span><span class="sxs-lookup"><span data-stu-id="706bb-240">The following image shows where to set **Reset Password using mail address** in the Azure AD B2C password reset user flow.</span></span>

![„Nustatyti iš naujo slaptažodį naudojant el. pašto adresą“ nustatymas slaptažodžio nustatymo iš naujo strategijoje](./media/B2CImage_13.png)

## <a name="add-social-identity-providers-optional"></a><span data-ttu-id="706bb-242">Socialinės tapatybės teikimo įrankio įtraukimas (pasirinktinai)</span><span class="sxs-lookup"><span data-stu-id="706bb-242">Add social identity providers (Optional)</span></span>

<span data-ttu-id="706bb-243">Socialinės tapatybės teikimo įrankis leidžia vartotojams naudotis savo socialinėmis sąskaitomis autentifikavimo tikslais.</span><span class="sxs-lookup"><span data-stu-id="706bb-243">Social identity providers allow users to use their social accounts for authentication.</span></span> <span data-ttu-id="706bb-244">Socialinės tapatybės teikimo įrankio autentifikavimo įtraukimas yra pasirinktinis „Dynamics 365 Commerce“.</span><span class="sxs-lookup"><span data-stu-id="706bb-244">Adding social identity provider authentication is optional in Dynamics 365 Commerce.</span></span> 

<span data-ttu-id="706bb-245">Jei nėra įtrauktas socialinės tapatybės teikimo įrankio autentifikavimas, numatytieji „Azure AD“ B2C profiliai bus pagrindiniai vartotojų bazės profiliai.</span><span class="sxs-lookup"><span data-stu-id="706bb-245">If social identity provider authentication is not added, the default Azure AD B2C profiles will be the main profiles for your user base.</span></span> <span data-ttu-id="706bb-246">Vartotojai pasirinks savo vartotojo vardą (pageidaujamą el. pašto adresą) ir nustatys slaptažodį.</span><span class="sxs-lookup"><span data-stu-id="706bb-246">Users will select their own username (their preferred email address) and set a password.</span></span> <span data-ttu-id="706bb-247">„Azure AD“ B2C autentifikuos vartotojus tiesiogiai.</span><span class="sxs-lookup"><span data-stu-id="706bb-247">Azure AD B2C will authenticate users directly.</span></span> 

<span data-ttu-id="706bb-248">Jei įtrauktas socialinės tapatybės teikimo įrankio autentifikavimas ir vartotojas pasirenka vieną iš siūlomų socialinės tapatybės teikimo įrankių, šis objektas vis dar yra sukurtas „Azure AD“ B2C nuomotojuje.</span><span class="sxs-lookup"><span data-stu-id="706bb-248">If social identity provider authentication is added and a user chooses one of the social identity providers offered, an entity is still created in the Azure AD B2C tenant.</span></span> <span data-ttu-id="706bb-249">„Azure AD“ B2C autentifikuos vartotojo kredencialus naudodama socialinės tapatybė teikimo įrankį,</span><span class="sxs-lookup"><span data-stu-id="706bb-249">Azure AD B2C will then authenticate the user's credentials with the social identity provider.</span></span>

> [!NOTE]
> <span data-ttu-id="706bb-250">Tapatybės teikimo įrankio prisijungimas sukuria įrašą B2C nuomotojuje, tačiau kitu formatu, nei vietos sąskaitos, nes jis iškviečia išorinę socialinės tapatybės teikimo įrankio nuorodą autentifikavimui.</span><span class="sxs-lookup"><span data-stu-id="706bb-250">The identity provider sign in creates a record in the B2C tenant, but in a different format than local accounts since it will call the external social identity provider reference for authentication.</span></span> <span data-ttu-id="706bb-251">Vartotojas gali naudoti tą patį el. pašto adresą visiems socialinės tapatybės teikimo įrankiams, t. y. el. pašto vartotojo vardas, naudojamas autentifikavimui, negali būti unikalus nuomotojui.</span><span class="sxs-lookup"><span data-stu-id="706bb-251">The user can use the same email address across social identity providers, meaning that the email username used for authentication may not be unique to the tenant.</span></span> <span data-ttu-id="706bb-252">„Azure AD“ B2C užtikrins tik tai, kad vartotojas turi unikalų el. pašto adresą vietos B2C sąskaitose.</span><span class="sxs-lookup"><span data-stu-id="706bb-252">Azure AD B2C will only enforce that users have a unique email address on local B2C accounts.</span></span>

<span data-ttu-id="706bb-253">Prieš pridėdami socialinės tapatybės teikimo įrankį autentifikavimo tikslu, turite eiti į tapatybės teikimo įrankio portalą ir nustatyti tapatybės teikimo įrankio programą, kaip nurodyta „Azure AD B2C“ dokumentuose.</span><span class="sxs-lookup"><span data-stu-id="706bb-253">Before you can add a social identity provider for authentication, you must go to the identity provider's portal and set up an identity provider application as instructed in the Azure AD B2C documentation.</span></span> <span data-ttu-id="706bb-254">Saitų į dokumentus sąrašas pateiktas toliau.</span><span class="sxs-lookup"><span data-stu-id="706bb-254">A list of links to the documentation is provided below.</span></span>

- [<span data-ttu-id="706bb-255">„Amazon“</span><span class="sxs-lookup"><span data-stu-id="706bb-255">Amazon</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-amzn-app)
- [<span data-ttu-id="706bb-256">Azure AD(Vienas nuomotojas)</span><span class="sxs-lookup"><span data-stu-id="706bb-256">Azure AD (Single Tenant)</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-oidc-azure-active-directory)
- [<span data-ttu-id="706bb-257">„Microsoft“ abonementas</span><span class="sxs-lookup"><span data-stu-id="706bb-257">Microsoft Account</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-msa-app)
- [<span data-ttu-id="706bb-258">Facebook</span><span class="sxs-lookup"><span data-stu-id="706bb-258">Facebook</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-fb-app)
- [<span data-ttu-id="706bb-259">GitHub</span><span class="sxs-lookup"><span data-stu-id="706bb-259">GitHub</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-github-app)
- [<span data-ttu-id="706bb-260">Google</span><span class="sxs-lookup"><span data-stu-id="706bb-260">Google</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-goog-app)
- [<span data-ttu-id="706bb-261">„LinkedIn“</span><span class="sxs-lookup"><span data-stu-id="706bb-261">LinkedIn</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-li-app)
- [<span data-ttu-id="706bb-262">OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="706bb-262">OpenID Connect</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-oidc-idp)
- [<span data-ttu-id="706bb-263">„Twitter“</span><span class="sxs-lookup"><span data-stu-id="706bb-263">Twitter</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-twitter-app)

### <a name="add-and-set-up-a-social-identity-provider"></a><span data-ttu-id="706bb-264">Socialinės tapatybės teikimo įrankio įtraukimas ir nustatymas</span><span class="sxs-lookup"><span data-stu-id="706bb-264">Add and set up a social identity provider</span></span>

<span data-ttu-id="706bb-265">Norėdami įtraukti ir nustatyti socialinės tapatybės teikimo įrankį, atlikite tolesnius veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-265">To add and set up a social identity provider, follow these steps.</span></span>  

1. <span data-ttu-id="706bb-266">„Azure“ portale eikite į **Tapatybės teikimo įrankiai**.</span><span class="sxs-lookup"><span data-stu-id="706bb-266">In the Azure portal, navigate to **Identity Providers**.</span></span>
1. <span data-ttu-id="706bb-267">Pasirinkite **Įtraukti**.</span><span class="sxs-lookup"><span data-stu-id="706bb-267">Select **Add**.</span></span> <span data-ttu-id="706bb-268">Rodomas langas **Įtraukti tapatybės teikimo įrankį**.</span><span class="sxs-lookup"><span data-stu-id="706bb-268">The **Add identity provider** screen appears.</span></span>
1. <span data-ttu-id="706bb-269">Dalyje **Pavadinimas** įveskite pavadinimą, kuris bus rodomas vartotojams prisijungimo ekrane.</span><span class="sxs-lookup"><span data-stu-id="706bb-269">Under **Name**, enter the name to be displayed to users on your sign in screen.</span></span>
1. <span data-ttu-id="706bb-270">Dalyje **Tapatybės teikimo įrankio tipas** iš sąrašo pasirinkite tapatybės teikimo įrankį.</span><span class="sxs-lookup"><span data-stu-id="706bb-270">Under **Identity provider type**, select an identity provider from the list.</span></span>
1. <span data-ttu-id="706bb-271">Pasirinkite **Gerai**.</span><span class="sxs-lookup"><span data-stu-id="706bb-271">Select **OK**.</span></span>
1. <span data-ttu-id="706bb-272">Pasirinkite **Nustatyti šį tapatybės teikimo įrankį**, kad būtų atidarytas ekranas **Nustatyti socialinės tapatybės teikimo įrankį**.</span><span class="sxs-lookup"><span data-stu-id="706bb-272">Select **Set up this identity provider** to access the **Set up the social identity provider** screen.</span></span>
1. <span data-ttu-id="706bb-273">Dalyje **Kliento ID** įveskite kliento ID, gautą iš tapatybės teikimo įrankio programos sąrankos.</span><span class="sxs-lookup"><span data-stu-id="706bb-273">Under **Client ID**, enter the client ID as obtained from the identity provider application setup.</span></span>
1. <span data-ttu-id="706bb-274">Dalyje **Kliento paslaptis** įveskite kliento paslaptį, gautą iš tapatybės teikimo įrankio programos sąrankos.</span><span class="sxs-lookup"><span data-stu-id="706bb-274">Under **Client secret**, enter the client secret as obtained from the identity provider application setup.</span></span>
1. <span data-ttu-id="706bb-275">Vartotojo prisiregistravimo ir prisijungimo srauto strategijų pridėjimas:</span><span class="sxs-lookup"><span data-stu-id="706bb-275">Attach user flow for sign in sign up policies:</span></span>
1. <span data-ttu-id="706bb-276">Eikite į **„Azure AD“ B2C – vartotojo srautai (strategijos) \> {jūsų prisiregistravimo ir prisijungimo strategija} \> Tapatybės teikimo įrankiai**.</span><span class="sxs-lookup"><span data-stu-id="706bb-276">Go to **Azure AD B2C – User flows (policies) \> {your sign-in sign-up policy} \> Identity providers**.</span></span>
1. <span data-ttu-id="706bb-277">Norėdami pridėti prisiregistravimo / prisijungimo vartotojo srauto strategiją, pasirinkit kiekvieną tapatybės teikimo įrankį, kurį nustatėte savo sąskaitoje.</span><span class="sxs-lookup"><span data-stu-id="706bb-277">To attach the sign in/sign up user flow policy, select each identity provider you have set up for your account.</span></span> <span data-ttu-id="706bb-278">Norėdami tai atlikti, pasirinkite **Vykdyti vartotoją srautą** kiekvienam tapatybės teikimo įrankiui.</span><span class="sxs-lookup"><span data-stu-id="706bb-278">To test these, select **Run user flow** for each identity provider.</span></span> <span data-ttu-id="706bb-279">Naujame skirtuke bus rodomas registravimosi puslapis, kuriame rodomas naujo tapatybės teikimo įrankio langelis.</span><span class="sxs-lookup"><span data-stu-id="706bb-279">A new tab will display the sign-in page displaying the new identity provider selection box.</span></span>

<span data-ttu-id="706bb-280">Tolesniame paveiksle pateikiami ekranų **Įtraukti tapatybės teikimo įrankį** ir **Nustatyti socialinės tapatybės teikimo įrankį** „Azure AD“ B2C.</span><span class="sxs-lookup"><span data-stu-id="706bb-280">The following image shows examples of the **Add identity provider** and **Set up the social identity provider** screens in Azure AD B2C.</span></span>

![Socialinės tapatybės teikimo įrankio įtraukimas į programą](./media/B2CImage_14.png)

<span data-ttu-id="706bb-282">Tolesniame paveiksle pateiktas pavyzdys, kaip pasirinkti tapatybės teikimo įrankius „Azure AD“ B2C puslapyje **Tapatybės teikimo įrankiai**.</span><span class="sxs-lookup"><span data-stu-id="706bb-282">The following image shows an example of how to select identity providers on the Azure AD B2C **Identity Providers** page.</span></span>

![Kiekvieno socialinės tapatybės teikimo įrankio pasirinkimas siekiant įjungti strategiją](./media/B2CImage_16.png)

<span data-ttu-id="706bb-284">Toliau pateiktame paveikslėlyje parodytas numatytojo prisijungimo ekrano, kuriame rodomas socialinės tapatybės teikimo įrankio prisijungimo mygtukas, pavyzdys.</span><span class="sxs-lookup"><span data-stu-id="706bb-284">The following image shows an example of a default sign-in screen with a social identity provider sign-in button displayed.</span></span>

> [!NOTE]
> <span data-ttu-id="706bb-285">Jeigu savo vartotojo srautams naudojate pasirinktinius puslapius, įtaisytus „Commerce”, naudojant „Commerce” modulių bibliotekos išplėtimo funkcijas reikės įtraukti socialinės tapatybės teikėjams skirtus mygtukus.</span><span class="sxs-lookup"><span data-stu-id="706bb-285">If using the custom pages built in Commerce for your user flows, the buttons for social identity providers will need to be added using the extensibility features of the Commerce module library.</span></span> <span data-ttu-id="706bb-286">Be to, kai nustatote savo programas su konkrečiu socialinės tapatybės teikėju, kai kuriais atvejais URL ar konfigūracijos eilutės gali skirti didžiąsias ir mažąsias raides.</span><span class="sxs-lookup"><span data-stu-id="706bb-286">Additionally, when setting up your applications with a specific social identity provider, in some cases URL or configuration strings may be case sensitive.</span></span> <span data-ttu-id="706bb-287">Norėdami gauti daugiau informacijos, vadovaukitės savo socialinės tapatybės teikėjo ryšio instrukcijomis.</span><span class="sxs-lookup"><span data-stu-id="706bb-287">Refer to your social identity provider's connection instructions for more information.</span></span>
 
![Numatytojo prisijungimo ekrano su rodomu socialinės tapatybės teikimo įrankio mygtuku pavyzdys](./media/B2CImage_17.png)

## <a name="update-commerce-headquarters-with-the-new-azure-ad-b2c-information"></a><span data-ttu-id="706bb-289">„Commerce“ būstinės naujinimas su nauja „Azure AD B2C“ informacija</span><span class="sxs-lookup"><span data-stu-id="706bb-289">Update Commerce headquarters with the new Azure AD B2C information</span></span>

<span data-ttu-id="706bb-290">Kai užbaigiami pirmiau nurodyti „Azure AD“ B2C paruošimo veiksmai, „Azure AD“ B2C programą reikia užregistruoti jūsų „Dynamics 365 Commerce“ aplinkoje.</span><span class="sxs-lookup"><span data-stu-id="706bb-290">Once the Azure AD B2C provisioning steps above are completed, the Azure AD B2C application must be registered in your Dynamics 365 Commerce environment.</span></span>

<span data-ttu-id="706bb-291">Norėdami atnaujinti būstinę su naują „Azure AD“ B2C informaciją, atlikite tolesnius veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-291">To update headquarters with the new Azure AD B2C information, follow these steps.</span></span>

1. <span data-ttu-id="706bb-292">„Commerce“ eikite į **„Commerce“ bendrinti parametrai** ir kairiajame meniu pasirinkite **Tapatybės teikimo įrankiai**.</span><span class="sxs-lookup"><span data-stu-id="706bb-292">In Commerce, go to **Commerce Shared Parameters** and select **Identity Providers** in the left menu.</span></span>
1. <span data-ttu-id="706bb-293">Dalyje **Tapatybės teikimo įrankiai** atlikite tolesnius veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-293">Under **Identity Providers**, do the following:</span></span>
    1. <span data-ttu-id="706bb-294">Lauke **Leidėjas** įveskite tapatybės teikimo įrankio leidėjo URL.</span><span class="sxs-lookup"><span data-stu-id="706bb-294">In the **Issuer** box, enter the identity provider issuer URL.</span></span> <span data-ttu-id="706bb-295">Norėdami rasti savo leidėjo URL, žr. [Leidėjo URL gavimas](#obtain-issuer-url) toliau.</span><span class="sxs-lookup"><span data-stu-id="706bb-295">To find your issuer URL, see [Obtain issuer URL](#obtain-issuer-url) below.</span></span>
    1. <span data-ttu-id="706bb-296">Lauke **Pavadinimas** įveskite savo leidėjo įrašo pavadinimą.</span><span class="sxs-lookup"><span data-stu-id="706bb-296">In the **Name** box, enter a name for your issuer record.</span></span>
    1. <span data-ttu-id="706bb-297">Lauke **Tipas** įveskite **„Azure AD“ B2C (id_token)**.</span><span class="sxs-lookup"><span data-stu-id="706bb-297">In the **Type** box, enter **Azure AD B2C (id_token)**.</span></span>
1. <span data-ttu-id="706bb-298">Dalyje **Pasikliaujančios šalys** su anksčiau pasirinktu B2C tapatybės teikimo įrankiu atlikite tolesnius veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-298">Under **Relying Parties**, with the above B2C identity provider item selected, do the following:</span></span>
    1. <span data-ttu-id="706bb-299">Lauke **KlientoID** įveskite B2C programos ID.</span><span class="sxs-lookup"><span data-stu-id="706bb-299">In the **ClientID** box, enter your B2C application ID.</span></span> <span data-ttu-id="706bb-300">Tai galite rasti savo B2C programos ypatybių puslapio lauke **Programos ID**.</span><span class="sxs-lookup"><span data-stu-id="706bb-300">You can find this in the **Application ID** box of your B2C application's properties page.</span></span>
    1. <span data-ttu-id="706bb-301">Lauke **Tipas** įveskite **Viešas**.</span><span class="sxs-lookup"><span data-stu-id="706bb-301">In the **Type** box, enter **Public**.</span></span>
    1. <span data-ttu-id="706bb-302">Lauke **Vartotojo tipas** įveskite **Klientas**.</span><span class="sxs-lookup"><span data-stu-id="706bb-302">In the **User Type** box, enter **Customer**.</span></span>
1. <span data-ttu-id="706bb-303">Veiksmų srityje pasirinkite **Įrašyti**.</span><span class="sxs-lookup"><span data-stu-id="706bb-303">On the action pane, select **Save**.</span></span>
1. <span data-ttu-id="706bb-304">„Commerce“ ieškos lauke ieškokite **Paskirstymo grafikas**</span><span class="sxs-lookup"><span data-stu-id="706bb-304">In the Commerce search box, search for **Distribution schedule**</span></span>
1. <span data-ttu-id="706bb-305">Puslapio **Paskirstymo grafikai** kairiajame naršymo meniu pasirinkite užduotį **1110 visuotinė konfigūracija**.</span><span class="sxs-lookup"><span data-stu-id="706bb-305">In the left navigation menu of the **Distribution schedules** page, select job **1110 Global configuration**.</span></span>
1. <span data-ttu-id="706bb-306">Veiksmų srityje pasirinkite **Vykdyti dabar**.</span><span class="sxs-lookup"><span data-stu-id="706bb-306">On the action pane, select **Run Now**.</span></span>

### <a name="obtain-issuer-url"></a><span data-ttu-id="706bb-307">Leidėjo URL gavimas</span><span class="sxs-lookup"><span data-stu-id="706bb-307">Obtain issuer URL</span></span>

<span data-ttu-id="706bb-308">Norėdami gauti savo tapatybės teikimo įrankio leidėjo URL, atlikite tolesnius veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-308">To obtain your identity provider issuer URL, follow these steps.</span></span>
1. <span data-ttu-id="706bb-309">„Azure” portalo puslapyje „Azure AD B2C” pereikite prie savo **Registravimosi ir prisijungimo** vartotojo srauto.</span><span class="sxs-lookup"><span data-stu-id="706bb-309">On the Azure AD B2C page of the Azure portal, navigate to your **Sign up and sign in** user flow.</span></span>
1. <span data-ttu-id="706bb-310">Kairiajame naršymo meniu pasirinkite **Puslapio maketai**, o tada dalyje **Maketo pavadinimas** pasirinkite **Bendras registravimosi arba prisijungimo puslapis** ir **Vykdyti vartotojo srautą**.</span><span class="sxs-lookup"><span data-stu-id="706bb-310">Select **Page layouts** in the left navigation menu, under **Layout name** select **Unified sign up or sign in page**, and then select **Run user flow**.</span></span>
1. <span data-ttu-id="706bb-311">Įsitikinkite, kad jūsų programa nustatyta į jūsų aukščiau sukurtą numatomą „Azure AD B2C” programą, ir tada antraštėje **Vykdyti vartotojo srautą** pasirinkite saitą, kuriame yra „``.../.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``”.</span><span class="sxs-lookup"><span data-stu-id="706bb-311">Make sure your application is set to your intended Azure AD B2C application created above, and then select the link under the **Run user flow** header that includes ``.../.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``.</span></span>
1. <span data-ttu-id="706bb-312">Metaduomenų puslapis rodomas jūsų naršyklės skirtuke Nukopijuokite tapatybės teikėjo išdavėjo URL (**„išdavėjo” reikšmę**).</span><span class="sxs-lookup"><span data-stu-id="706bb-312">A metadata page is displayed in your browser tab. Copy the identity provider issuer URL (the value for **"issuer"**).</span></span>
   - <span data-ttu-id="706bb-313">Pavyzdys: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span><span class="sxs-lookup"><span data-stu-id="706bb-313">Example: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span></span>
 
<span data-ttu-id="706bb-314">**ARBA**: Norėdami sukurti tą patį metaduomenų URL rankiniu būdu, atlikite šiuos veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-314">**OR**: To construct the same metadata URL manually, do the following steps.</span></span>

1. <span data-ttu-id="706bb-315">Sukurkite metaduomenų adreso URL toliau nurodytu formatu, naudodami savo B2C nuomotoją ir strategiją:``https://<B2CTENANTNAME>.b2clogin.com/<B2CTENANTNAME>.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``</span><span class="sxs-lookup"><span data-stu-id="706bb-315">Create a metadata address URL in the following format using your B2C tenant and policy: ``https://<B2CTENANTNAME>.b2clogin.com/<B2CTENANTNAME>.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``</span></span>
    - <span data-ttu-id="706bb-316">Pavyzdys: ``https://d365plc.b2clogin.com/d365plc.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=B2C_1_signinup``.</span><span class="sxs-lookup"><span data-stu-id="706bb-316">Example: ``https://d365plc.b2clogin.com/d365plc.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=B2C_1_signinup``.</span></span>
1. <span data-ttu-id="706bb-317">Į naršyklės adresų juostą įveskite metaduomenų adreso URL.</span><span class="sxs-lookup"><span data-stu-id="706bb-317">Enter the metadata address URL into a browser address bar.</span></span>
1. <span data-ttu-id="706bb-318">Metaduomenyse kopijuokite tapatybės teikimo įrankio leidėjo URL (**„leidėjo“** reikšmę).</span><span class="sxs-lookup"><span data-stu-id="706bb-318">In the metadata, copy the identity provider issuer URL (the value for **"issuer"**).</span></span>
    - <span data-ttu-id="706bb-319">Pavyzdys: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span><span class="sxs-lookup"><span data-stu-id="706bb-319">Example: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span></span>

## <a name="configure-your-b2c-tenant-in-commerce-site-builder"></a><span data-ttu-id="706bb-320">Konfigūruokite B2C nuomotoją „Commerce“ svetainių daryklėje</span><span class="sxs-lookup"><span data-stu-id="706bb-320">Configure your B2C tenant in Commerce site builder</span></span>

<span data-ttu-id="706bb-321">Kai jūsų „Azure AD B2C“ nuomotojo sąranka baigta, turite sukonfigūruoti B2C nuomininką „Commerce“ svetainių rengyklėje.</span><span class="sxs-lookup"><span data-stu-id="706bb-321">Once setup of your Azure AD B2C tenant is completed, you must configure the B2C tenant in Commerce site builder.</span></span> <span data-ttu-id="706bb-322">Konfigūracijos veiksmai apima B2C programos informacijos iš „Azure“ portalo surinkimą, tos į B2C programos informacijos įvedimą į svetainių daryklę, ir B2C programos susiejimą su jūsų svetaine ir kanalu.</span><span class="sxs-lookup"><span data-stu-id="706bb-322">Configuration steps include collecting B2C application information from the Azure portal, entering that B2C application information into site builder, and then associating the B2C application with your site and channel.</span></span>

### <a name="collect-the-required-application-information"></a><span data-ttu-id="706bb-323">Reikiamos programos informacijos surinkimas</span><span class="sxs-lookup"><span data-stu-id="706bb-323">Collect the required application information</span></span>

<span data-ttu-id="706bb-324">Norėdami surinkti reikiamą programos informaciją, atlikite tolesnius veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-324">To collect the required application information, follow these steps.</span></span>

1. <span data-ttu-id="706bb-325">„Azure“ portale eikite į **Pagrindinis \> „Azure AD“ B2C – programos**.</span><span class="sxs-lookup"><span data-stu-id="706bb-325">In the Azure portal, go to **Home \> Azure AD B2C - Applications**.</span></span>
1. <span data-ttu-id="706bb-326">Pasirinkite programą, tada kairiojoje naršymo srityje pasirinkite **Ypatybes**, kad gautumėte programos informaciją.</span><span class="sxs-lookup"><span data-stu-id="706bb-326">Select your application, and then in the left navigation pane select **Properties** to obtain the application details.</span></span>
1. <span data-ttu-id="706bb-327">Laukelyje **Programos ID** patikrinkite B2C programos, sukurtos jūsų B2C nuomotojuje, programos ID.</span><span class="sxs-lookup"><span data-stu-id="706bb-327">From the **Application ID** box, collect the application ID of the B2C application created in your B2C tenant.</span></span> <span data-ttu-id="706bb-328">Tai vėliau bus įvesta kaip **Kliento GUID** svetainių rengyklėje.</span><span class="sxs-lookup"><span data-stu-id="706bb-328">This will later be entered as the **Client GUID** in site builder.</span></span>
1. <span data-ttu-id="706bb-329">Dalyje **Atsakymo URL** surinkite atsakymo URL.</span><span class="sxs-lookup"><span data-stu-id="706bb-329">Under **Reply URL**, collect the reply URL.</span></span>
1. <span data-ttu-id="706bb-330">Eikite į **Pagrindinis \> „Azure AD“ B2C – vartotojo srautus (strategijos)**, tada surinkite kiekvieno vartotojo srauto strategijos pavadinimus.</span><span class="sxs-lookup"><span data-stu-id="706bb-330">Go to **Home \> Azure AD B2C – User flows (policies)**, and then collect the names of each user flow policy.</span></span>

<span data-ttu-id="706bb-331">Toliau pateiktame paveikslėlyje parodytas puslapio **„Azure AD“ B2C – programos** pavyzdys.</span><span class="sxs-lookup"><span data-stu-id="706bb-331">The following image shows an example of the **Azure AD B2C - Applications** page.</span></span>

![Perėjimas į B2C programą nuomotojuje](./media/B2CImage_19.png)

<span data-ttu-id="706bb-333">Toliau pateiktame paveikslėlyje parodytas programos puslapio **Ypatybės**, esančio „Azure AD“ B2C, pavyzdys.</span><span class="sxs-lookup"><span data-stu-id="706bb-333">The following image shows an example of an application **Properties** page in Azure AD B2C.</span></span> 

![Programos ID kopijavimas iš B2C programos ypatybių](./media/B2CImage_21.png)

<span data-ttu-id="706bb-335">Toliau pateiktame paveikslėlyje parodytas vartotojo srauto strategijų puslapyje **„Azure AD“ B2C – vartotojo srautai (strategijos)** pavyzdys.</span><span class="sxs-lookup"><span data-stu-id="706bb-335">The following image shows an example of user flow policies on the **Azure AD B2C – User flows (policies)** page.</span></span>

![Visų B2C strategijos srautų pavadinimų rinkimas](./media/B2CImage_22.png)

### <a name="enter-your-aad-b2c-tenant-application-information-into-commerce"></a><span data-ttu-id="706bb-337">AAD B2C nuomotojo programos informacijos įvedimas „Commerce“</span><span class="sxs-lookup"><span data-stu-id="706bb-337">Enter your AAD B2C tenant application information into Commerce</span></span>

<span data-ttu-id="706bb-338">Prieš susiedami B2C nuomotoją su savo svetaine (-ėmis), įveskite „Azure AD“ B2C nuomotojo informaciją į „Commerce“ svetainių daryklę.</span><span class="sxs-lookup"><span data-stu-id="706bb-338">You must enter details of the Azure AD B2C tenant into Commerce site builder before associating the B2C tenant with your site(s).</span></span>

<span data-ttu-id="706bb-339">Norėdami įtraukti AAD B2C nuomotojo programos informaciją į „Commerce“, atlikite toliau nurodytus veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-339">To add your AAD B2C tenant application information to Commerce, follow these steps.</span></span>

1. <span data-ttu-id="706bb-340">Prisijunkite kaip administratorius prie savo aplinkos „Commerce“ svetainių daryklėje.</span><span class="sxs-lookup"><span data-stu-id="706bb-340">Sign in as an administrator to Commerce site builder for your environment.</span></span>
1. <span data-ttu-id="706bb-341">Kairiojoje naršymo srityje pasirinkite ir išskleiskite **Nuomotojo parametrai**.</span><span class="sxs-lookup"><span data-stu-id="706bb-341">In the left navigation pane, select **Tenant Settings**  to expand it.</span></span>
1. <span data-ttu-id="706bb-342">Dalyje **Nuomotojo parametrai** pasirinkite **B2C parametrai**.</span><span class="sxs-lookup"><span data-stu-id="706bb-342">Under **Tenant Settings**, select **B2C Settings**.</span></span> 
1. <span data-ttu-id="706bb-343">Pagrindiniame lange šalia **B2C programos** pasirinkite **Valdyti**.</span><span class="sxs-lookup"><span data-stu-id="706bb-343">In the main window next **B2C Applications**, select **Manage**.</span></span> <span data-ttu-id="706bb-344">(Jei jūsų nuomotojas yra įtrauktas į B2C programų sąrašą, jį jau įtraukė ir administratorius.</span><span class="sxs-lookup"><span data-stu-id="706bb-344">(If your tenant appears in the B2C Applications list, then it was already added by an administrator.</span></span> <span data-ttu-id="706bb-345">Patikrinkite, ar tolesnio 6 veiksmo elementai sutampa su jūsų B2C programa.)</span><span class="sxs-lookup"><span data-stu-id="706bb-345">Verify that the items in step 6 below match your B2C Application.)</span></span>
1. <span data-ttu-id="706bb-346">Pasirinkite **Įtraukti B2C programą**.</span><span class="sxs-lookup"><span data-stu-id="706bb-346">Select **Add B2C Application**.</span></span>
1. <span data-ttu-id="706bb-347">Į rodomą formą įveskite toliau nurodytus privalomus elementus naudodami reikšmes iš B2C nuomotojo ir programos.</span><span class="sxs-lookup"><span data-stu-id="706bb-347">Enter the following required items in the form displayed, using values from your B2C tenant and application.</span></span> <span data-ttu-id="706bb-348">Neprivalomus laukus (be žvaigždutės) galima palikti tuščius.</span><span class="sxs-lookup"><span data-stu-id="706bb-348">Fields that are not required (those without an asterisk) may be left blank.</span></span>

    - <span data-ttu-id="706bb-349">**Programos pavadinimas**: jūsų B2C programos pavadinimas, pavyzdžiui, „Fabrikam B2C“.</span><span class="sxs-lookup"><span data-stu-id="706bb-349">**Application Name**: The name for your B2C Application, for example "Fabrikam B2C".</span></span>
    - <span data-ttu-id="706bb-350">**Nuomotojo pavadinimas:** B2C nuomotojo pavadinimas (pvz.: naudokite „fabrikam”, jei B2C nuomotojo domenas rodomas kaip „fabrikam.onmicrosoft.com”).</span><span class="sxs-lookup"><span data-stu-id="706bb-350">**Tenant Name**: The name of your B2C tenant (for example, use "fabrikam" if the domain appears as "fabrikam.onmicrosoft.com" for the B2C tenant).</span></span> 
    - <span data-ttu-id="706bb-351">**Pamiršto slaptažodžio strategijos ID**: pamiršto slaptažodžio vartotojo srauto strategijos ID, pavyzdžiui, „B2C_1_PasswordReset“.</span><span class="sxs-lookup"><span data-stu-id="706bb-351">**Forget Password Policy ID**: The forget password user flow policy ID, for example "B2C_1_PasswordReset".</span></span>
    - <span data-ttu-id="706bb-352">**Registracijos / prisijungimo strategijos ID**: registracija ir prisijungimas vartotojo srauto strategijos ID, pavyzdžiui, „B2C_1_signup_signin“.</span><span class="sxs-lookup"><span data-stu-id="706bb-352">**Signup Signin Policy ID**: The sign up and sign in user flow policy ID, for example "B2C_1_signup_signin".</span></span>
    - <span data-ttu-id="706bb-353">**Kliento GUID**: B2C programos ID, pavyzdžiui, „22290eb2-c52e-42e9-8b35-a2b0a3bcb9e6“.</span><span class="sxs-lookup"><span data-stu-id="706bb-353">**Client GUID**: The B2C application ID, for example "22290eb2-c52e-42e9-8b35-a2b0a3bcb9e6".</span></span>
    - <span data-ttu-id="706bb-354">**Redaguoti profilio strategijos ID**: profilį redaguojančio vartojo srauto strategijos ID, pavyzdžiui, „B2C_1A_ProfileEdit“.</span><span class="sxs-lookup"><span data-stu-id="706bb-354">**Edit Profile Policy ID**: The profile editing user flow policy ID, for example "B2C_1A_ProfileEdit".</span></span>

1. <span data-ttu-id="706bb-355">Pasirinkite **Gerai**.</span><span class="sxs-lookup"><span data-stu-id="706bb-355">Select **OK**.</span></span> <span data-ttu-id="706bb-356">Dabar sąraše turėtumėte matyti savo B2C programos pavadinimą.</span><span class="sxs-lookup"><span data-stu-id="706bb-356">You should now see the name of your B2C application appear in the list.</span></span>
1. <span data-ttu-id="706bb-357">Pasirinkite **Įrašyti**, kad įrašytumėte pakeitimus.</span><span class="sxs-lookup"><span data-stu-id="706bb-357">Select **Save** to save your changes.</span></span>

### <a name="associate-the-b2c-application-to-your-site-and-channel"></a><span data-ttu-id="706bb-358">B2C programos susiejimas su svetaine ir kanalu</span><span class="sxs-lookup"><span data-stu-id="706bb-358">Associate the B2C application to your site and channel</span></span>

> [!WARNING]
> <span data-ttu-id="706bb-359">Jei jūsų svetainė jau yra susieta su B2C programa, keičiant į kitą B2C programą, bus pašalintos esamos rekomendacijos, nustatytos vartotojams, kurie jau yra prisiregistravę prie šios aplinkos.</span><span class="sxs-lookup"><span data-stu-id="706bb-359">If your site is already associated with a B2C application, changing to a different B2C application will remove the current references established for users already signed up in this environment.</span></span> <span data-ttu-id="706bb-360">Pakeitus, bet kokie kredencialai, susieti su šiuo metu priskirta B2C programa, nebus prieinami vartotojams.</span><span class="sxs-lookup"><span data-stu-id="706bb-360">If changed, any credentials associated with the currently-assigned B2C application will not be available to users.</span></span> 
> 
> <span data-ttu-id="706bb-361">Atnaujinkite B2C programą, tik jei kanalo B2C programą nustatote pirmą kartą arba jei ketinate turėti vartotojų su naujais prisijungimo prie šio kanalo kredencialais naudojant naują B2C programą.</span><span class="sxs-lookup"><span data-stu-id="706bb-361">Only update the B2C application if you are setting up the channel's B2C application for the first time or if you intend to have users re-sign up with new credentials to this channel with the new B2C application.</span></span> <span data-ttu-id="706bb-362">Būkite atsargūs susiedami kanalus su B2C programomis ir duokite aiškius pavadinimus programoms.</span><span class="sxs-lookup"><span data-stu-id="706bb-362">Take caution when associating channels to B2C applications, and name applications clearly.</span></span> <span data-ttu-id="706bb-363">Jei kanalas nėra susiejamas su B2C programa atliekant tolesnius veiksmus, vartotojai, prisijungiantys prie tokio kanalo, kad patektų į jūsų svetainę, bus įvesti į B2C programą, rodomą kaip **numatytoji** B2C programų sąraše **Nuomotojo parametrai \> B2C parametrai**.</span><span class="sxs-lookup"><span data-stu-id="706bb-363">If a channel is not associated to a B2C application in the steps below, users signing into that channel for your site will be entered into the B2C application showing as **default** in the **Tenant Settings \> B2C Settings** list of B2C applications.</span></span>

<span data-ttu-id="706bb-364">Norėdami susieti B2C programą su svetainę ir kanalu, atlikite tolesnius veiksmus.</span><span class="sxs-lookup"><span data-stu-id="706bb-364">To associate the B2C application to your site and channel, follow these steps.</span></span>

1. <span data-ttu-id="706bb-365">Eikite į savo svetainę „Commerce“ svetainių daryklėje.</span><span class="sxs-lookup"><span data-stu-id="706bb-365">Navigate to your site in Commerce site builder.</span></span>
1. <span data-ttu-id="706bb-366">Kairiojoje naršymo srityje pasirinkite ir išskleiskite **Svetainės parametrai**.</span><span class="sxs-lookup"><span data-stu-id="706bb-366">In the left navigation pane, select **Site Settings** to expand it.</span></span>
1. <span data-ttu-id="706bb-367">Po **Svetainės parametrai** pasirinkite **Kanalai**.</span><span class="sxs-lookup"><span data-stu-id="706bb-367">Below **Site Settings**, select **Channels**.</span></span>
1. <span data-ttu-id="706bb-368">Pagrindiniame lange, dalyje **Kanalai** pasirinkite savo kanalą.</span><span class="sxs-lookup"><span data-stu-id="706bb-368">In the main window under **Channels**, select your channel.</span></span>
1. <span data-ttu-id="706bb-369">Kanalo ypatybių srityje dešinėje pusėje pasirinkite savo B2C programos pavadinimą iš išskleidžiamojo meniu **Pasirinkti B2C programą**.</span><span class="sxs-lookup"><span data-stu-id="706bb-369">In the channel properties pane on the right, select your B2C application name from the **Select B2C Application** drop down menu.</span></span>
1. <span data-ttu-id="706bb-370">Pasirinkite **Uždaryti**, tada pasirinkite **Įrašyti ir publikuoti**.</span><span class="sxs-lookup"><span data-stu-id="706bb-370">Select **Close**, and then select **Save and Publish**.</span></span>

## <a name="additional-b2c-information"></a><span data-ttu-id="706bb-371">Papildoma B2C informacija</span><span class="sxs-lookup"><span data-stu-id="706bb-371">Additional B2C information</span></span>

### <a name="customer-migration"></a><span data-ttu-id="706bb-372">Kliento perkėlimas</span><span class="sxs-lookup"><span data-stu-id="706bb-372">Customer migration</span></span>

<span data-ttu-id="706bb-373">Jei ketinate perkelti kliento įrašus iš ankstesnės tapatybės teikimo įrankio platformos, dirbkite su „Dynamics 365 Commerce“ komanda, kad peržiūrėtumėte savo klientų perkėlimo poreikius.</span><span class="sxs-lookup"><span data-stu-id="706bb-373">If you are considering migrating customer records from a previous identity provider platform, please work with the Dynamics 365 Commerce team to review your customer migration needs.</span></span>

<span data-ttu-id="706bb-374">Norėdami gauti daugiau „Azure AD“ B2C dokumentų apie klientų perkėlimą, žr. [Vartotojų perkėlimas į „Azure Active Directory“ B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-user-migration).</span><span class="sxs-lookup"><span data-stu-id="706bb-374">For additional Azure AD B2C documentation on customer migration, see [Migrate users to Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-user-migration).</span></span>

### <a name="custom-policies"></a><span data-ttu-id="706bb-375">Pasirinktinės strategijos</span><span class="sxs-lookup"><span data-stu-id="706bb-375">Custom policies</span></span>

<span data-ttu-id="706bb-376">Norėdami gauti daugiau informacijos apie „Azure AD“ B2C sąveikas ir strategijos srautus be to, kas siūloma standartinėse B2C strategijose, žr. [Pasirinktinės strategijos „Azure Active Directory“ B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-overview-custom).</span><span class="sxs-lookup"><span data-stu-id="706bb-376">For additional information regarding customizing Azure AD B2C interactions and policy flows beyond what is offered by B2C standard policies, see [Custom policies in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-overview-custom).</span></span> 

### <a name="secondary-admin"></a><span data-ttu-id="706bb-377">Antrinis administratorius</span><span class="sxs-lookup"><span data-stu-id="706bb-377">Secondary admin</span></span>

<span data-ttu-id="706bb-378">Pasirinktinio antrinio administratoriaus sąskaita gali būti įtraukta į jūsų B2C nuomotojo skyrių **Vartotojai**.</span><span class="sxs-lookup"><span data-stu-id="706bb-378">An optional, secondary administrator account can be added in the **Users** section of your B2C tenant.</span></span> <span data-ttu-id="706bb-379">Tai gali būti tiesioginė sąskaita arba bendroji sąskaita.</span><span class="sxs-lookup"><span data-stu-id="706bb-379">This can be a direct account or a general account.</span></span> <span data-ttu-id="706bb-380">Jei reikia bendrinti sąskaitą su komandos ištekliais, galima sukurti bendrąją sąskaitą.</span><span class="sxs-lookup"><span data-stu-id="706bb-380">If you need to share an account across team resources, a common account can also be created.</span></span> <span data-ttu-id="706bb-381">Atsižvelgiant į tai, kad „Azure AD“ B2C saugomi duomenys yra jautrūs, bendroji sąskaita turi būti atidžiai stebima pagal jūsų įmonės saugumo praktiką.</span><span class="sxs-lookup"><span data-stu-id="706bb-381">Due to the sensitivity of the data stored in Azure AD B2C, a common account should be monitored closely per your company's security practices.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="706bb-382">Papildomi ištekliai</span><span class="sxs-lookup"><span data-stu-id="706bb-382">Additional resources</span></span>

[<span data-ttu-id="706bb-383">Jūsų domeno vardo konfigūravimas</span><span class="sxs-lookup"><span data-stu-id="706bb-383">Configure your domain name</span></span>](configure-your-domain-name.md)

[<span data-ttu-id="706bb-384">Talpinkite naują e-komercijos nuomotoją</span><span class="sxs-lookup"><span data-stu-id="706bb-384">Deploy a new e-commerce tenant</span></span>](deploy-ecommerce-site.md)

[<span data-ttu-id="706bb-385">Sukurkite e-komercijos saitą</span><span class="sxs-lookup"><span data-stu-id="706bb-385">Create an e-commerce site</span></span>](create-ecommerce-site.md)

[<span data-ttu-id="706bb-386">Susiekite „Dynamics 365 Commerce“ saitą su interneto kanalu</span><span class="sxs-lookup"><span data-stu-id="706bb-386">Associate a Dynamics 365 Commerce site with an online channel</span></span>](associate-site-online-store.md)

[<span data-ttu-id="706bb-387">robots.txt failų tvarkymas</span><span class="sxs-lookup"><span data-stu-id="706bb-387">Manage robots.txt files</span></span>](manage-robots-txt-files.md)

[<span data-ttu-id="706bb-388">Masinis URL peradresavimų nusiuntimas</span><span class="sxs-lookup"><span data-stu-id="706bb-388">Upload URL redirects in bulk</span></span>](upload-bulk-redirects.md)

[<span data-ttu-id="706bb-389">Vartotojo prisijungimo pasirinktinių puslapių sąranka</span><span class="sxs-lookup"><span data-stu-id="706bb-389">Set up custom pages for user logins</span></span>](custom-pages-user-logins.md)

[<span data-ttu-id="706bb-390">„Commerce” aplinkos kelių B2Ck nuomotojų konfigūravimas</span><span class="sxs-lookup"><span data-stu-id="706bb-390">Configure multiple B2C tenants in a Commerce environment</span></span>](configure-multi-B2C-tenants.md)

[<span data-ttu-id="706bb-391">Turinio pristatymo tinklo (CDN) palaikymo įtraukimas</span><span class="sxs-lookup"><span data-stu-id="706bb-391">Add support for a content delivery network (CDN)</span></span>](add-cdn-support.md)

[<span data-ttu-id="706bb-392">Parduotuvės nustatymo pagal vietą įgalinimas</span><span class="sxs-lookup"><span data-stu-id="706bb-392">Enable location-based store detection</span></span>](enable-store-detection.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
