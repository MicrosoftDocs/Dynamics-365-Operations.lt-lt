---
title: Įmonės koncepcija „Common Data Service“
description: Šioje temoje aprašomas įmonės duomenų integravimas tarp „Finance and Operations“ ir „Common Data Service“.
author: RamaKrishnamoorthy
manager: AnnBe
ms.date: 08/04/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: ramasri
ms.dyn365.ops.version: ''
ms.search.validFrom: 2019-07-15
ms.openlocfilehash: 444bfc1698a206ca34e67f742df63431a3b02649
ms.sourcegitcommit: 7da8811f1a7db858efb76edb0bdf857a47d07600
ms.translationtype: HT
ms.contentlocale: lt-LT
ms.lasthandoff: 08/27/2020
ms.locfileid: "3728418"
---
# <a name="company-concept-in-common-data-service"></a><span data-ttu-id="b51a1-103">Įmonės koncepcija „Common Data Service“</span><span class="sxs-lookup"><span data-stu-id="b51a1-103">Company concept in Common Data Service</span></span>

[!include [banner](../../includes/banner.md)]


<span data-ttu-id="b51a1-104">„Finance and Operations“ *įmonės* koncepcija yra tiek teisinis, tiek verslo konstruktas.</span><span class="sxs-lookup"><span data-stu-id="b51a1-104">In Finance and Operations, the concept of a *company* is both a legal construct and a business construct.</span></span> <span data-ttu-id="b51a1-105">Ji taip pat apibrėžia duomenų saugos ir matomumo ribas.</span><span class="sxs-lookup"><span data-stu-id="b51a1-105">It's also a security and visibility boundary for data.</span></span> <span data-ttu-id="b51a1-106">Vartotojai visada dirba vienos įmonės kontekste, o dauguma duomenų yra įmonės suskirstyti.</span><span class="sxs-lookup"><span data-stu-id="b51a1-106">Users always work in the context of a single company, and most of the data is striped by company.</span></span>

<span data-ttu-id="b51a1-107">„Common Data Service“ nenaudojama lygiavertė koncepcija.</span><span class="sxs-lookup"><span data-stu-id="b51a1-107">Common Data Service doesn't have an equivalent concept.</span></span> <span data-ttu-id="b51a1-108">Artimiausia koncepcija yra *verslo struktūros vienetas*, kuris pirmiausia apima vartotojo duomenų saugos ir matomumo ribas.</span><span class="sxs-lookup"><span data-stu-id="b51a1-108">The closest concept is *business unit*, which is primarily a security and visibility boundary for user data.</span></span> <span data-ttu-id="b51a1-109">Ši koncepcija neturi tokios pačios teisinės ar verslo reikšmės kaip įmonės koncepcija.</span><span class="sxs-lookup"><span data-stu-id="b51a1-109">This concept doesn't have the same legal or business implications as the company concept.</span></span>

<span data-ttu-id="b51a1-110">Verslo struktūros vienetas ir įmonė nėra lygiavertės koncepcijos, todėl „Common Data Service“ integracijos tikslais negalima taikyti jų vienas su vienu (1:1) susiejimo.</span><span class="sxs-lookup"><span data-stu-id="b51a1-110">Because business unit and company aren't equivalent concepts, it isn't possible to force a one-to-one (1:1) mapping between them for the purpose of Common Data Service integration.</span></span> <span data-ttu-id="b51a1-111">Tačiau vartotojai turi, kaip numatyta, galėti peržiūrėti tuos pačius įrašus programoje ir „Common Data Service“, todėl „Microsoft“ pristatė naują subjektą „Common Data Service”, kuris pavadintas cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="b51a1-111">However, because users must, by default, be able to see the same records in the application and Common Data Service, Microsoft has introduced a new entity in Common Data Service that is named cdm\_Company.</span></span> <span data-ttu-id="b51a1-112">Šis objektas yra lygiavertis įmonės objektui programoje.</span><span class="sxs-lookup"><span data-stu-id="b51a1-112">This entity is equivalent to the Company entity in the application.</span></span> <span data-ttu-id="b51a1-113">Siekiant užtikrinti įrašų matomumo lygiavertiškumą pradėjus naudoti programą ir „Common Data Service“, rekomenduojame toliau pateiktus „Common Data Service“ duomenų nustatymus.</span><span class="sxs-lookup"><span data-stu-id="b51a1-113">To help guarantee that visibility of records is equivalent between the application and Common Data Service out of the box, we recommend the following setup for data in Common Data Service:</span></span>

+ <span data-ttu-id="b51a1-114">Kiekvienam „Finance and Operations“ įmonės įrašui, kuris įgalintas dvigubam rašymui, sukuriamas susietas cdm\_Company įrašas.</span><span class="sxs-lookup"><span data-stu-id="b51a1-114">For each Finance and Operations Company record that is enabled for dual-write, an associated cdm\_Company record is created.</span></span>
+ <span data-ttu-id="b51a1-115">Sukūrus cdm\_Company įrašą ir įgalinus dvigubam rašymui, sukuriamas numatytasis verslo struktūros vienetas tuo pačiu pavadinimu.</span><span class="sxs-lookup"><span data-stu-id="b51a1-115">When a cdm\_Company record is created and enabled for dual-write, a default business unit is created that has the same name.</span></span> <span data-ttu-id="b51a1-116">Nors tam verslo struktūros vienetui automatiškai sukuriama numatytoji komanda, verslo struktūros vienetas nėra naudojamas.</span><span class="sxs-lookup"><span data-stu-id="b51a1-116">Although a default team is automatically created for that business unit, the business unit isn't used.</span></span>
+ <span data-ttu-id="b51a1-117">Sukuriama atskira savininko komanda tokiu pačiu pavadinimu.</span><span class="sxs-lookup"><span data-stu-id="b51a1-117">A separate owner team is created that has the same name.</span></span> <span data-ttu-id="b51a1-118">Ji taip pat susiejama su verslo struktūros vienetu.</span><span class="sxs-lookup"><span data-stu-id="b51a1-118">It's also associated with the business unit.</span></span>
+ <span data-ttu-id="b51a1-119">Pagal numatytuosius nustatymus, bet kurio įrašo, kuris sukuriamas ir įrašomas dvigubu rašymu „Common Data Service“, savininkas nustatomas į „DW Owner“ komandą, kuri susiejama su susijusiu verslo struktūros vienetu.</span><span class="sxs-lookup"><span data-stu-id="b51a1-119">By default, the owner of any record that is created and dual-written to Common Data Service is set to the "DW Owner" team that is linked to the associated business unit.</span></span>

<span data-ttu-id="b51a1-120">Tolesnėje iliustracijoje pateikiamas šio duomenų nustatymo „Common Data Service“ pavyzdys.</span><span class="sxs-lookup"><span data-stu-id="b51a1-120">The following illustration shows an example of this data setup in Common Data Service.</span></span>

![Duomenų nustatymas „Common Data Service“](media/dual-write-company-1.png)

<span data-ttu-id="b51a1-122">Dėl tokios konfigūracijos bet koks įrašas, susietas su USMF įmone, priklauso komandai, kuri yra susieta su USMF verslo struktūros vienetu „Common Data Service“.</span><span class="sxs-lookup"><span data-stu-id="b51a1-122">Because of this configuration, any record that is related to the USMF company will be owned by a team that is linked to the USMF business unit in Common Data Service.</span></span> <span data-ttu-id="b51a1-123">Todėl tuos įrašus gali matyti bet kuris vartotojas, kuris turi prieigą prie to verslo struktūros vieneto pasitelkiant saugos vaidmenį, kuris nustatytas verslo struktūros vieneto lygio matomumui.</span><span class="sxs-lookup"><span data-stu-id="b51a1-123">Therefore, any user who has access to that business unit through a security role that is set to business unit–level visibility can now see those records.</span></span> <span data-ttu-id="b51a1-124">Toliau pateikiamas pavyzdys, kaip komandos gali būti naudojamos norint suteikti tinkamą prieigą prie tų įrašų.</span><span class="sxs-lookup"><span data-stu-id="b51a1-124">The following example shows how teams can be used to provide the correct access to those records.</span></span>

+ <span data-ttu-id="b51a1-125">Vaidmuo „Pardavimo vadybininkas“ priskiriamas „USMF pardavimas“ komandos nariams.</span><span class="sxs-lookup"><span data-stu-id="b51a1-125">The "Sales Manager" role is assigned to members of the "USMF Sales" team.</span></span>
+ <span data-ttu-id="b51a1-126">Vartotojai, turintys vaidmenį „Pardavimo vadybininkas“, turi prieigą prie visų paskyros įrašų, kurie yra to paties verslo struktūros vieneto nariai.</span><span class="sxs-lookup"><span data-stu-id="b51a1-126">Users who have the "Sales Manager" role can access any account records that are members of the same business unit that they are members of.</span></span>
+ <span data-ttu-id="b51a1-127">„USMF pardavimas“ komanda susiejama su anksčiau minėtu USMF verslo struktūros vienetu.</span><span class="sxs-lookup"><span data-stu-id="b51a1-127">The "USMF Sales" team is linked to the USMF business unit that was mentioned earlier.</span></span>
+ <span data-ttu-id="b51a1-128">Todėl „USMF pardavimas“ komandos nariai gali matyti bet kurią paskyrą, priklausančią „USMF DW“ vartotojui, kuris būtų gautas iš USMF įmonės objekto naudojant „Finance and Operations“.</span><span class="sxs-lookup"><span data-stu-id="b51a1-128">Therefore, members of the "USMF Sales" team can see any account that is owned by the "USMF DW" user, which would have come from the USMF Company entity in Finance and Operations.</span></span>

![Komandų naudojimas](media/dual-write-company-2.png)

<span data-ttu-id="b51a1-130">Kaip parodyta ankstesnėje iliustracijoje, šis 1:1 susiejimas tarp verslo struktūros vieneto, įmonės ir komandos yra tik pradžios taškas.</span><span class="sxs-lookup"><span data-stu-id="b51a1-130">As the preceding illustration shows, this 1:1 mapping between business unit, company, and team is just a starting point.</span></span> <span data-ttu-id="b51a1-131">Tolesniame pavyzdyje naujas verslo struktūros vienetas „Europa“ rankiniu būdu sukuriamas „Common Data Service“ kaip DEMF ir ESMF pirminis elementas.</span><span class="sxs-lookup"><span data-stu-id="b51a1-131">In this example, a new "Europe" business unit is manually created in Common Data Service as the parent for both DEMF and ESMF.</span></span> <span data-ttu-id="b51a1-132">Šis naujas šakninis verslo struktūros vienetas nėra susijęs su dvigubu rašymu.</span><span class="sxs-lookup"><span data-stu-id="b51a1-132">This new root business unit is unrelated to dual-write.</span></span> <span data-ttu-id="b51a1-133">Tačiau jis gali būti naudojamas siekiant suteikti „EUR pardavimas“ komandos nariams prieigą prie paskyros duomenų tiek DEMF, tiek ESMF nustatant duomenų matomumą į **Pirminis/antrinis BU** susietam saugos vaidmeniui.</span><span class="sxs-lookup"><span data-stu-id="b51a1-133">However, it can be used to give members of the "EUR Sales" team access to account data in both DEMF and ESMF by setting the data visibility to **Parent/Child BU** in the associated security role.</span></span>

<span data-ttu-id="b51a1-134">Paskutinėje temoje aptariama, kaip dvigubas rašymas nustato, kuriai savininkų komandai reikėtų priskirti įrašus.</span><span class="sxs-lookup"><span data-stu-id="b51a1-134">A final topic to discuss is how dual-write determines which owner team it should assign records to.</span></span> <span data-ttu-id="b51a1-135">Šią veikseną kontroliuoja laukas **Numatytoji komanda savininkė** įraše cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="b51a1-135">This behavior is controlled by the **Default owning team** field on the cdm\_Company record.</span></span> <span data-ttu-id="b51a1-136">Kai cdm\_Company įrašas yra įgalintas dvigubam rašymui, priedas automatiškai sukuria susietą verslo struktūros vienetą ir savininko komandą (jei jos dar nėra) ir nustato lauką **Numatytoji komanda savininkė**.</span><span class="sxs-lookup"><span data-stu-id="b51a1-136">When a cdm\_Company record is enabled for dual-write, a plug-in automatically creates the associated business unit and owner team (if it doesn't already exist), and sets the **Default owning team** field.</span></span> <span data-ttu-id="b51a1-137">Administratorius gali pakeisti šį lauką kita reikšme.</span><span class="sxs-lookup"><span data-stu-id="b51a1-137">The admin can change this field to a different value.</span></span> <span data-ttu-id="b51a1-138">Tačiau administratorius negali išvalyti lauko tol, kol objektui įgalintas dvigubas rašymas.</span><span class="sxs-lookup"><span data-stu-id="b51a1-138">However, the admin can't clear the field as long as the entity is enabled for dual-write.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="b51a1-139">![Laukas Numatytoji komanda savininkė](media/dual-write-default-owning-team.jpg)</span><span class="sxs-lookup"><span data-stu-id="b51a1-139">![Default owning team field](media/dual-write-default-owning-team.jpg)</span></span>

## <a name="company-striping-and-bootstrapping"></a><span data-ttu-id="b51a1-140">Įmonės paskirstymas ir įkėlimas</span><span class="sxs-lookup"><span data-stu-id="b51a1-140">Company striping and bootstrapping</span></span>

<span data-ttu-id="b51a1-141">„Common Data Service“ integracija suteikia įmonės lygiavertiškumą naudojant įmonės identifikatorių, skirtą paskirstyti duomenis.</span><span class="sxs-lookup"><span data-stu-id="b51a1-141">Common Data Service integration brings company parity by using a company identifier to stripe data.</span></span> <span data-ttu-id="b51a1-142">Kaip parodyta toliau pateiktoje iliustracijoje, visi konkrečios įmonės objektai išplečiami taip, kad su cdm\_Company objektu turėtų ryšį „daugelis su vienu“ (N:1).</span><span class="sxs-lookup"><span data-stu-id="b51a1-142">As the following illustration shows, all company-specific entities are extended so that they have a many-to-one (N:1) relationship with the cdm\_Company entity.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="b51a1-143">![N:1 ryšys tarp konkrečios įmonės objekto ir cdm_Company objekto](media/dual-write-bootstrapping.png)</span><span class="sxs-lookup"><span data-stu-id="b51a1-143">![N:1 relationship between a company-specific entity and the cdm_Company entity](media/dual-write-bootstrapping.png)</span></span>

+ <span data-ttu-id="b51a1-144">Įtraukus ir įrašius įmonę įrašų reikšmė tampa skirta tik skaityti.</span><span class="sxs-lookup"><span data-stu-id="b51a1-144">For records, after a company is added and saved, the value becomes read-only.</span></span> <span data-ttu-id="b51a1-145">Todėl vartotojai turėtų įsitikinti, kad pasirinko tinkamą įmonę.</span><span class="sxs-lookup"><span data-stu-id="b51a1-145">Therefore, users should make sure that they select the correct company.</span></span>
+ <span data-ttu-id="b51a1-146">Tik tie įrašai, kurie apima įmonės duomenis, gali būti dvigubo rašymo tarp programos ir „Common Data Service“.</span><span class="sxs-lookup"><span data-stu-id="b51a1-146">Only records that have company data are eligible for dual-write between the application and Common Data Service.</span></span>
+ <span data-ttu-id="b51a1-147">Esamiems „Common Data Service“ duomenims netrukus bus teikiama administratoriaus vadovaujama įkėlimo patirtis.</span><span class="sxs-lookup"><span data-stu-id="b51a1-147">For existing Common Data Service data, an admin-led bootstrapping experience will soon be available.</span></span>


## <a name="autopopulate-company-name-in-customer-engagement-apps"></a><span data-ttu-id="b51a1-148">Automatinis įmonės pavadinimo įvedimas „Customer engagement” programoms</span><span class="sxs-lookup"><span data-stu-id="b51a1-148">Autopopulate company name in customer engagement apps</span></span>

<span data-ttu-id="b51a1-149">Yra keli būdai automatiškai įvesti įmonės pavadinimą „Customer Engagement” programose.</span><span class="sxs-lookup"><span data-stu-id="b51a1-149">There are several ways to auto-populate the company name in customer engagement apps.</span></span>

+ <span data-ttu-id="b51a1-150">Jei esate sistemos administratorius, galite nustatyti numatytąją įmonę eidami į **Išplėstiniai nustatymai > Sistema > Sauga > Vartotojai**.</span><span class="sxs-lookup"><span data-stu-id="b51a1-150">If you are a system administrator, you can set the default company by navigating to **Advanced Settings > System > Security > Users**.</span></span> <span data-ttu-id="b51a1-151">Atidarykite formą **Vartotojas** ir skyriuje **Organizacijos informacija** nustatykite **Įmonė kaip numatytoji formose** reikšmę.</span><span class="sxs-lookup"><span data-stu-id="b51a1-151">Open the **User** form, and in the **Organization Information** section, set the **Company to default on Forms** value.</span></span>

    :::image type="content" source="media/autopopulate-company-name-1.png" alt-text="Numatytosios įmonės nustatymas skyriuje Organizacijos informacija.":::

+ <span data-ttu-id="b51a1-153">Jei turite **Rašymo** prieigą prie **SystemUser** objekto **Verslo vieneto** lygiu, tada galite pakeisti numatytąją įmonę bet kurioje formoje pasirinkdami įmonę iš išplečiamojo meniu **Įmonė**.</span><span class="sxs-lookup"><span data-stu-id="b51a1-153">If you have **Write** access to the **SystemUser** entity for the **Business Unit** level, then you can change the default company on any form by selecting a company from the **Company** drop-down menu.</span></span>

    :::image type="content" source="media/autopopulate-company-name-2.png" alt-text="Įmonės vardo keitimas naujoje paskyroje.":::

+ <span data-ttu-id="b51a1-155">Jei turite **Rašymo** prieigą prie daugiau nei vienos įmonės duomenų, tada galite keisti numatytąją įmonę pasirinkdami įrašą, priklausantį kitai įmonei.</span><span class="sxs-lookup"><span data-stu-id="b51a1-155">If you have **Write** access to data in more than one company, then you can change the default company by choosing a record that belongs to different company.</span></span>

    :::image type="content" source="media/autopopulate-company-name-3.png" alt-text="Įrašo pasirinkimas pakeičia numatytąją įmonę.":::

+ <span data-ttu-id="b51a1-157">Jeigu esate sistemos konfigūratorius arba administratorius ir norite įvesti įmonės pavadinimą automatiškai pasirinktinėje formoje, galite naudoti [formų įvykius](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span><span class="sxs-lookup"><span data-stu-id="b51a1-157">If you are a system configurator or administrator, and you want to auto-populate company data on a custom form, then you can use [form events](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span></span> <span data-ttu-id="b51a1-158">Pridėkite JavaScript nuorodą į **msdyn_/DefaultCompany.js** ir naudokite šiuos įvykius.</span><span class="sxs-lookup"><span data-stu-id="b51a1-158">Add a JavaScript reference to **msdyn_/DefaultCompany.js** and use the following events.</span></span> <span data-ttu-id="b51a1-159">Galite naudoti bet kurią visiškai parengtą formą, pavyzdžiui **Paskyra** formą.</span><span class="sxs-lookup"><span data-stu-id="b51a1-159">You can use any out-of-the-box form, for example, the **Account** form.</span></span>

    + <span data-ttu-id="b51a1-160">**OnLoad** įvykis formai: nustatykite **defaultCompany** lauką.</span><span class="sxs-lookup"><span data-stu-id="b51a1-160">**OnLoad** event for the form: Set the **defaultCompany** field.</span></span>
    + <span data-ttu-id="b51a1-161">**OnChange** įvykis **Įmonės** laukui: nustatykite **updateDefaultCompany** lauką.</span><span class="sxs-lookup"><span data-stu-id="b51a1-161">**OnChange** event for the **Company** field: Set the **updateDefaultCompany** field.</span></span>

## <a name="apply-filtering-based-on-the-company-context"></a><span data-ttu-id="b51a1-162">Filtravimo, paremto įmonės kontekstu, taikymas</span><span class="sxs-lookup"><span data-stu-id="b51a1-162">Apply filtering based on the company context</span></span>

<span data-ttu-id="b51a1-163">Norėdami taikyti filtravimą, paremtą įmonės kontekstu Jūsų pasirinktinėse formose arba pasirinktiniuose peržvalgos laukuose, pridėtuose standartinėse formose, atidarykite formą ir naudokite skyrių **Susijusių įrašų filtravimas** įmonės filtro taikymui.</span><span class="sxs-lookup"><span data-stu-id="b51a1-163">To apply filtering based on the company context on your custom forms or on custom lookup fields added to the standard forms, open the form and use the **Related Records Filtering** section to apply the company filter.</span></span> <span data-ttu-id="b51a1-164">Turite tai nustatyti kiekvienam peržvalgos laukui, kuriam reikalingas filtravimas, paremtas esančia įmone pasirinktame įraše.</span><span class="sxs-lookup"><span data-stu-id="b51a1-164">You must set this for each lookup field that requires filtering based on the underlying company on a given record.</span></span> <span data-ttu-id="b51a1-165">Parametras rodomas dalyje **Paskyra** šioje iliustracijoje.</span><span class="sxs-lookup"><span data-stu-id="b51a1-165">The setting is shown for **Account** in the following illustration.</span></span>

:::image type="content" source="media/apply-company-context.png" alt-text="Įmonės konteksto taikymas":::

