---
title: Visos įmonės duomenų šaltiniai elektroninėse ataskaitose (ER)
description: Šioje temoje paaiškinta, kaip galima naudoti visos įmonės duomenų šaltinius elektroninėse ataskaitose (ER).
author: NickSelin
manager: AnnBe
ms.date: 05/25/2018
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERModelMappingDesigner, ERFormatMappingLegalEntityFilterTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-04-01
ms.dyn365.ops.version: Release 8.0
ms.openlocfilehash: 9eee9ba70e800c78622b774d8140b104fa0ad911
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: lt-LT
ms.lasthandoff: 03/09/2021
ms.locfileid: "5562267"
---
# <a name="cross-company-data-sources-in-electronic-reporting-er"></a><span data-ttu-id="d1327-103">Visos įmonės duomenų šaltiniai elektroninėse ataskaitose (ER)</span><span class="sxs-lookup"><span data-stu-id="d1327-103">Cross-company data sources in Electronic reporting (ER)</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="d1327-104">Galite sukurti elektroninių ataskaitų (ER) formatus, norėdami generuoti siunčiamus dokumentus įvairiais formatais.</span><span class="sxs-lookup"><span data-stu-id="d1327-104">You can design Electronic reporting (ER) formats to generate outgoing documents in various formats.</span></span> <span data-ttu-id="d1327-105">Kai dokumentas sugeneruotas, ER formatas iškviečia duomenų šaltinius, kurie buvo sukonfigūruoti atitinkamame ER modelio susiejime.</span><span class="sxs-lookup"><span data-stu-id="d1327-105">When a document is generated, an ER format calls data sources that were configured in a corresponding ER model mapping.</span></span> <span data-ttu-id="d1327-106">Norėdami sukonfigūruoti prieigą prie programos lentelių įrašams nuskaityti, galite naudoti ER duomenų šaltinius, kurių tipas yra **Lentelės įrašai**.</span><span class="sxs-lookup"><span data-stu-id="d1327-106">To configure access to application tables for record retrieval, you can use ER data sources of the **Table records** type.</span></span> <span data-ttu-id="d1327-107">Kai pasiekiama lentelė yra bendrai naudojama lentelė (t. y., lentelė, kurioje duomenys įrašomi be įmonės identifikatorius), šis duomenų šaltinis pateikia visus įrašus.</span><span class="sxs-lookup"><span data-stu-id="d1327-107">When the accessing table is a shared table (that is, a table where data is saved without a company identifier), this data source returns all records.</span></span> <span data-ttu-id="d1327-108">Kai pasiekiama lentelė yra nuo įmonės priklausanti lentelė (t. y., kai duomenys įrašomi vienoje įmonėje), šis duomenų šaltinis pateikia tik tuos įrašus, kurie buvo įrašyti šiai įmonei (t. y., pagal įmonės kontekstą, pagal kurį vykdomas ER formatas).</span><span class="sxs-lookup"><span data-stu-id="d1327-108">When the accessing table is a company-dependent table (that is, a table where data is saved per company), this data source returns only the records that have been saved for the current company (that is, the company context that the ER format is running under).</span></span>

<span data-ttu-id="d1327-109">Kiekvienas susiejimo modelio duomenų šaltinis, kurio tipas **Lentelės įrašai**, dabar gali būti pažymėtas kaip visos įmonės duomenų šaltinis.</span><span class="sxs-lookup"><span data-stu-id="d1327-109">Every data source of the **Table records** type in a model mapping can be now marked as a cross-company data source.</span></span> <span data-ttu-id="d1327-110">Todėl norėdami pasiekti visos įmonės duomenis programos lentelėse, galite naudoti duomenų šaltinius, kurių tipas yra **Lentelės įrašai**.</span><span class="sxs-lookup"><span data-stu-id="d1327-110">Therefore, you can use data sources of the **Table records** type to access cross-company data in application tables.</span></span>

<span data-ttu-id="d1327-111">Jei duomenų šaltinį pažymėsite kaip visos įmonės, taikomas toks veikimo būdas:</span><span class="sxs-lookup"><span data-stu-id="d1327-111">If you mark a data source as cross-company, the following behavior occurs:</span></span>

- <span data-ttu-id="d1327-112">Duomenų šaltinis, kuris nurodo bet kurią bendrai naudojamą lentelę, išskyrus „CompanyInfo“, duomenų šaltinis pateikia visus įrašus, esančius nurodytoje lentelėje.</span><span class="sxs-lookup"><span data-stu-id="d1327-112">For a data source that refers to any shared table except CompanyInfo, the data source returns all records that exist in the referenced table.</span></span> 
- <span data-ttu-id="d1327-113">Duomenų šaltinis, kuris nurodo lentelę „CompanyInfo“, net jei lentelė „CompanyInfo“ yra bendrai naudojama, duomenų šaltinis pateikia įrašus, kuriuose yra apibrėžtos srities įmonės identifikatorius.</span><span class="sxs-lookup"><span data-stu-id="d1327-113">For a data source that refers to the CompanyInfo table, even though CompanyInfo is a shared table, the data source returns the records that contain the identifier of a company from the defined scope.</span></span>
- <span data-ttu-id="d1327-114">Bet kurios nuo įmonės priklausančios lentelės duomenų šaltinis pateikia nurodytos lentelės įrašus, kuriuose yra apibrėžtos srities įmonės identifikatorius.</span><span class="sxs-lookup"><span data-stu-id="d1327-114">For any company-dependent table, the data source returns the records of the referenced table that contain the identifier of a company from the defined scope.</span></span>

<span data-ttu-id="d1327-115">Sistemos užklausos dialogo lange, kai įjungta parinktis **Prašyti užklausos**, bet kokiame duomenų šaltinyje, kuris pažymėtas kaip visos įmonės, galite rankiniu būdu pasirinkti vieną ar daugiau įmonių, įtrauktinų į skirtuką **Įmonės diapazonas**.</span><span class="sxs-lookup"><span data-stu-id="d1327-115">In the system query dialog box, when the **Ask for query** option is turned on for any data source that is marked as cross-company, you can manually select one or more companies to include on the **Company range** tab.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d1327-116">Kaip ir su kitais filtrais, vykdant ER formatą įmonės filtras išlaikomas kaip paskutinė naudota užklausų vertė.</span><span class="sxs-lookup"><span data-stu-id="d1327-116">Like other filters, the company filter is persisted as a last-used value for queries when you run an ER format.</span></span> <span data-ttu-id="d1327-117">Filtras nekeičiamas automatiškai, jei keičiate visos įmonės duomenų šaltinio vertę.</span><span class="sxs-lookup"><span data-stu-id="d1327-117">The filter isn't automatically changed if you change the cross-company value for a data source.</span></span> <span data-ttu-id="d1327-118">Norėdami naudoti kitą visos įmonės vertę kitam duomenų šaltiniui, panaikinkite atitinkamą konkretų vartotojo pasirinkimą.</span><span class="sxs-lookup"><span data-stu-id="d1327-118">To use a different cross-company value for another data source, delete the corresponding user-specific selection.</span></span>

<span data-ttu-id="d1327-119">Kiekvienam duomenų šaltiniui, kuris pažymėtas kaip visos įmonės, galite pasirinkti norimus įrašus ER išraiškose naudodami funkcijas **FILTRAS** ir **KUR**.</span><span class="sxs-lookup"><span data-stu-id="d1327-119">For every data source that is marked as cross-company, you can select the records that you want by using the **FILTER** and **WHERE** functions in ER expressions.</span></span> <span data-ttu-id="d1327-120">Lauką **dataAreaID** taip pat galima naudoti kaip įmonės identifikatorių.</span><span class="sxs-lookup"><span data-stu-id="d1327-120">The **dataAreaID** field can also be used as a company identifier.</span></span> <span data-ttu-id="d1327-121">Šiuo metu laukas **dataAreaID** yra apribotas pagal šių tipų sąlygas, kai naudojama funkcija **FILTRAS**:</span><span class="sxs-lookup"><span data-stu-id="d1327-121">Currently, the **dataAreaID** field is limited to the following types of conditions when the **FILTER** function is used:</span></span>

- <span data-ttu-id="d1327-122">Palaikomos tik tos sąlygos, kurios turi vieną lauko **dataAreaID** palyginimą.</span><span class="sxs-lookup"><span data-stu-id="d1327-122">Only conditions that have a single **dataAreaID** field comparison are supported.</span></span>
- <span data-ttu-id="d1327-123">Leidžiami tik tie palyginimai, kurie turi išraiškas, nepriklausančias nuo įrašų sąrašo elementų.</span><span class="sxs-lookup"><span data-stu-id="d1327-123">Only comparisons that have expressions that don't depend on records list items are allowed.</span></span>

<span data-ttu-id="d1327-124">Todėl toliau pateiktas įrašas yra tinkamas.</span><span class="sxs-lookup"><span data-stu-id="d1327-124">Therefore, the following expression is valid.</span></span>

```ER Expression
FILTER (MyTable, MyTable.dataAreaID = $StringUserInputParameter)
While shown below expressions will not pass the validation:
FILTER (MyTable, MyTable.dataAreaID = MyTable2RecordsList.MyField)
FILTER (MyTable, 
    OR(
        MyTable.dataAreaID = $StringUserInputParameter1,
        MyTable.dataAreaID = $StringUserInputParameter2
    )
)
```

<span data-ttu-id="d1327-125">Pagal numatytuosius nustatymus aprėptis apima visas dabartinės programos įmones.</span><span class="sxs-lookup"><span data-stu-id="d1327-125">By default, the scope includes all companies of the current application.</span></span> <span data-ttu-id="d1327-126">Tačiau ją galima apriboti.</span><span class="sxs-lookup"><span data-stu-id="d1327-126">However, it can be restricted.</span></span> <span data-ttu-id="d1327-127">Norėdami apriboti vieno ER formato visos įmonės duomenų prieigos aprėptį, formatui priskirkite konkrečią organizacijos hierarchiją.</span><span class="sxs-lookup"><span data-stu-id="d1327-127">To restrict the scope of cross-company data access for a single ER format, assign a specific organization hierarchy to the format.</span></span> <span data-ttu-id="d1327-128">Kai ER formatui nustatyta hierarchija, pateikiami tik tų juridinių subjektų, kurie pristatyti priskirtoje hierarchijoje, įrašai, net jei formatas iškviečia visos įmonės duomenų šaltinius.</span><span class="sxs-lookup"><span data-stu-id="d1327-128">When a hierarchy is defined for an ER format, only records for legal entities that are presented in the assigned hierarchy are returned, even though the format calls cross-company data sources.</span></span> <span data-ttu-id="d1327-129">Jei ER formatui apibrėžta nebeegzistuojanti hierarchija, taikoma numatytoji aprėptis, o formatas iškviečia visos įmonės duomenų šaltinius.</span><span class="sxs-lookup"><span data-stu-id="d1327-129">When a reference to a hierarchy that no longer exists is defined for an ER format, the default scope is applied, and the format calls cross-company data sources.</span></span> <span data-ttu-id="d1327-130">Tokiu atveju, pateikiami visų programos įmonių įrašai.</span><span class="sxs-lookup"><span data-stu-id="d1327-130">In this situation, records for all application companies are returned.</span></span>

<span data-ttu-id="d1327-131">Atkreipkite dėmesį, kad kai parinktis **Naudoti juodraštį** įjungta vienam ER formatui priskirtai organizacijos hierarchijai, juridiniai subjektai iš šios hierarchijos juodraščio versijos bus naudojami visos įmonės duomenų šaltinių aprėpčiai identifikuoti.</span><span class="sxs-lookup"><span data-stu-id="d1327-131">Note that when the **Use draft** option is turned on for the assigned to a single ER format organization hierarchy, the legal entities from the draft version of this hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="d1327-132">Jei juodraščio versijos nėra, tam bus naudojami juridiniai subjektai iš paskutinės publikuotos šios organizacijos hierarchijos versijos.</span><span class="sxs-lookup"><span data-stu-id="d1327-132">If the draft version does not exist, the legal entities from the last published version of this organization hierarchy will be used for this.</span></span>

<span data-ttu-id="d1327-133">Atkreipkite dėmesį, kad kai parinktis **Naudoti juodraštį** išjungta vienam ER formatui priskirtai organizacijos hierarchijai, juridiniai subjektai iš šios hierarchijos paskutinės publikuotos versijos bus naudojami visos įmonės duomenų šaltinių aprėpčiai identifikuoti.</span><span class="sxs-lookup"><span data-stu-id="d1327-133">Note that when the **Use draft** option is turned off for the assigned to a single ER format organization hierarchy, the legal entities from the last published version of this organization hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="d1327-134">ER sistemoje dar nepalaikomas organizacijos hierarchijos datos efektyvumas.</span><span class="sxs-lookup"><span data-stu-id="d1327-134">Date effectiveness of organization hierarchies is not supported yet in the ER framework.</span></span>

<span data-ttu-id="d1327-135">Hierarchiją formatui galima priskirti konkrečiame puslapyje, kurį galima pasiekti iš ER darbo srities arba naudojant meniu elementą **Organizacijos administravimas \> Elektroninės ataskaitos \> Juridinio subjekto filtras, skirtas formatams**.</span><span class="sxs-lookup"><span data-stu-id="d1327-135">The hierarchy can be assigned to a format in a specific page that can be accessed from the ER workspace or by using the **Organization administration \> Electronic reporting \> Legal entity filter for formats** menu item.</span></span> <span data-ttu-id="d1327-136">Norint patekti į puslapį, vartotojui turi būti suteikta teisė **Tvarkyti juridinio subjekto filtrus, skirtus formatams** (ERMaintainFormatMappingLegalEntityFilters).</span><span class="sxs-lookup"><span data-stu-id="d1327-136">To access the page, the **Maintain legal entity filters for format** privilege (ERMaintainFormatMappingLegalEntityFilters) must be granted to a user.</span></span> <span data-ttu-id="d1327-137">Pagal hierarchiją juridinių subjektų formato apimties apribojimo taikoma be apribojimų, kurią vartotojas gali nurodyti rankiniu būdu sistemos užklausos dialogo lange.</span><span class="sxs-lookup"><span data-stu-id="d1327-137">The scope restriction of hierarchy-based legal entities for the format is applied in addition to the restriction that the user can manually specify in the system query dialog box.</span></span> <span data-ttu-id="d1327-138">Šių apribojimų sankirta naudojama vykdant formatą.</span><span class="sxs-lookup"><span data-stu-id="d1327-138">The intersection of these restrictions is used when the format is run.</span></span>

<span data-ttu-id="d1327-139">Norėdami daugiau sužinoti apie šią funkciją, leiskite užduočių vedlį **Nuo įmonės priklausančių lentelių ER prieigos įrašai visos įmonės režimu**, kuris yra 7.5.4.3 Įsigyti / sukurti IT paslaugų ir sprendimų komponentų (10677) verslo proceso dalis ir gali būti atsisiųstas iš [„Microsoft“ atsisiuntimo centro](https://go.microsoft.com/fwlink/?linkid=874684).</span><span class="sxs-lookup"><span data-stu-id="d1327-139">To learn more about this feature, play the task guide, **ER Access records of company dependent tables in cross-company mode**, which is part of the 7.5.4.3 Acquire/Develop IT service/solution components (10677) business process, and can be downloaded from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span></span> <span data-ttu-id="d1327-140">Šis užduočių vedlys padės ER modelio susiejimo ir ER formato konfigūravimo proceso metu pasiekti programos lenteles visos įmonės režimu.</span><span class="sxs-lookup"><span data-stu-id="d1327-140">This task guide walks you through the process of configuring an ER model mapping and ER format to access application tables in cross-company mode.</span></span>

<span data-ttu-id="d1327-141">Atsisiųskite šiuos failus norėdami užbaigti užduočių vedlį:</span><span class="sxs-lookup"><span data-stu-id="d1327-141">Download the following files to complete the task guide:</span></span>

- [<span data-ttu-id="d1327-142">ER modelio konfigūracija – CrossCompanyDataAccessModel.xml</span><span class="sxs-lookup"><span data-stu-id="d1327-142">ER model configuration - CrossCompanyDataAccessModel.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)
- [<span data-ttu-id="d1327-143">ER formato konfigūracija – CrossCompanyDataAccessFormat.xml</span><span class="sxs-lookup"><span data-stu-id="d1327-143">ER format configuration - CrossCompanyDataAccessFormat.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]