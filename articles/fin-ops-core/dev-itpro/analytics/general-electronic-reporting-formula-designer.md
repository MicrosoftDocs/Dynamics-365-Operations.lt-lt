---
title: Elektroninių ataskaitų (ER) formulių kūrimo įrankis
description: Šioje temoje pateikiama informacija apie tai, kaip naudoti elektroninėse ataskaitose (ER) formulių kūrimo įrankį.
author: NickSelin
manager: kfend
ms.date: 12/05/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 14539ed6c00915b7d59a5a3c4870ab6d1a96ad95
ms.sourcegitcommit: 81a647904dd305c4be2e4b683689f128548a872d
ms.translationtype: HT
ms.contentlocale: lt-LT
ms.lasthandoff: 02/01/2020
ms.locfileid: "3002525"
---
# <a name="formula-designer-in-electronic-reporting-er"></a><span data-ttu-id="aa035-103">Elektroninių ataskaitų (ER) formulių kūrimo įrankis</span><span class="sxs-lookup"><span data-stu-id="aa035-103">Formula designer in Electronic reporting (ER)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="aa035-104">Šioje temoje paaiškinama, kaip naudoti formulių kūrimo įrankį teikiant elektronines ataskaitas (ER).</span><span class="sxs-lookup"><span data-stu-id="aa035-104">This topic explains how to use the formula designer in Electronic reporting (ER).</span></span> <span data-ttu-id="aa035-105">Kurdami ER konkretaus elektroninio dokumento formatą, naudodami formules galite transformuoti duomenis, kad jie atitiktų dokumento įvykdymo ir formatavimo reikalavimus.</span><span class="sxs-lookup"><span data-stu-id="aa035-105">When you design a format for a specific electronic document in ER, you can use formulas to transform data so that it meets the requirements for the document's fulfillment and formatting.</span></span> <span data-ttu-id="aa035-106">Šios formulės panašios į „Microsoft Excel“ formules.</span><span class="sxs-lookup"><span data-stu-id="aa035-106">These formulas resemble formulas in Microsoft Excel.</span></span> <span data-ttu-id="aa035-107">Formulėse palaikomos įvairių tipų funkcijos: tekstinės, datos ir laiko, matematinės, loginės, informacijos, duomenų tipo konvertavimo, ir kitos konkrečios verslo srities funkcijos.</span><span class="sxs-lookup"><span data-stu-id="aa035-107">Various types of functions are supported in the formulas: text, date and time, mathematical, logical, information, and data type conversion functions, and also other, business domain–specific functions.</span></span>

## <a name="formula-designer-overview"></a><span data-ttu-id="aa035-108">Formulių kūrimo įrankio apžvalga</span><span class="sxs-lookup"><span data-stu-id="aa035-108">Formula designer overview</span></span>

<span data-ttu-id="aa035-109">ER palaiko formulių kūrimo įrankį.</span><span class="sxs-lookup"><span data-stu-id="aa035-109">ER supports the formula designer.</span></span> <span data-ttu-id="aa035-110">Todėl kūrimo metu galite konfigūruoti išraiškas, kurias galima naudoti tolesnių užduočių vykdymo metu.</span><span class="sxs-lookup"><span data-stu-id="aa035-110">Therefore, at design time, you can configure expressions that can be used for the following tasks at runtime:</span></span>

- <span data-ttu-id="aa035-111">Transformuokite iš programos duomenų bazės gautus duomenis, kurie turėtų būti įvesti į ER duomenų modelį, sukurtą kaip ER formatų duomenų šaltinis.</span><span class="sxs-lookup"><span data-stu-id="aa035-111">Transform data that is received from an application database and that should be entered in an ER data model that is designed to be a data source for ER formats.</span></span> <span data-ttu-id="aa035-112">(Pavyzdžiui, toks transformavimas gali būti filtravimas, grupavimas ir duomenų tipo konvertavimas.)</span><span class="sxs-lookup"><span data-stu-id="aa035-112">(For example, these transformations might include filtering, grouping, and data type conversion.)</span></span>
- <span data-ttu-id="aa035-113">Duomenų, kurie turi būti siunčiami į generuojamą elektroninį dokumentą pagal konkretaus ER formato maketą ir sąlygas, formatavimas.</span><span class="sxs-lookup"><span data-stu-id="aa035-113">Format data that must be sent to a generating electronic document in accordance with the layout and conditions of a specific ER format.</span></span> <span data-ttu-id="aa035-114">(Pvz., formatuoti galima pagal norimą kalbą ar kultūrą, arba kodavimą).</span><span class="sxs-lookup"><span data-stu-id="aa035-114">(For example, the formatting might be done in accordance with the requested language or culture, or the encoding).</span></span>
- <span data-ttu-id="aa035-115">Elektroninių dokumentų kūrimo proceso kontroliavimas.</span><span class="sxs-lookup"><span data-stu-id="aa035-115">Control the process of creating electronic documents.</span></span> <span data-ttu-id="aa035-116">(Pavyzdžiui, pagal apdorojamus duomenis išraiškomis galima įjungti ar išjungti tam tikrus išvedamus formato elementus.</span><span class="sxs-lookup"><span data-stu-id="aa035-116">(For example, the expressions can enable or disable the output of specific elements of the format, depending on processing data.</span></span> <span data-ttu-id="aa035-117">Jomis taip pat galima pertraukti dokumentų kūrimo procesą, ar pateikti pranešimus vartotojams.)</span><span class="sxs-lookup"><span data-stu-id="aa035-117">They can also interrupt the document creation process or throw messages to users.)</span></span>

<span data-ttu-id="aa035-118">Puslapį **Formulių konstruktorius**galite atidaryti atlikdami bet kurį iš tolesnių veiksmų.</span><span class="sxs-lookup"><span data-stu-id="aa035-118">You can open the **Formula designer** page when you perform any of the following actions:</span></span>

- <span data-ttu-id="aa035-119">Susiejus duomenų šaltinio elementus su duomenų modelio komponentais.</span><span class="sxs-lookup"><span data-stu-id="aa035-119">Bind data source items to data model components.</span></span>
- <span data-ttu-id="aa035-120">Susiejus duomenų šaltinio elementus su formato komponentais.</span><span class="sxs-lookup"><span data-stu-id="aa035-120">Bind data source items to format components.</span></span>
- <span data-ttu-id="aa035-121">Atlikus apskaičiuotų laukų, kurie yra duomenų šaltinių dalis, priežiūrą.</span><span class="sxs-lookup"><span data-stu-id="aa035-121">Complete maintenance of calculated fields that are part of data sources.</span></span>
- <span data-ttu-id="aa035-122">Nurodžius vartotojo įvesties parametrų matomumo sąlygas.</span><span class="sxs-lookup"><span data-stu-id="aa035-122">Define the visibility conditions for user input parameters.</span></span>
- <span data-ttu-id="aa035-123">Sukūrus formato pakeitimus.</span><span class="sxs-lookup"><span data-stu-id="aa035-123">Design a format's transformations.</span></span>
- <span data-ttu-id="aa035-124">Nurodžius formato komponentus įgalinančių sąlygas.</span><span class="sxs-lookup"><span data-stu-id="aa035-124">Define the enabling conditions for the format's components.</span></span>
- <span data-ttu-id="aa035-125">Nurodžius formato FILE komponentų failų vardus.</span><span class="sxs-lookup"><span data-stu-id="aa035-125">Define the file names for the format's FILE components.</span></span>
- <span data-ttu-id="aa035-126">Nurodžius proceso kontrolės tikrinimų sąlygas.</span><span class="sxs-lookup"><span data-stu-id="aa035-126">Define the conditions for process control validations.</span></span>
- <span data-ttu-id="aa035-127">Nurodžius proceso kontrolės tikrinimų pranešimo tekstą.</span><span class="sxs-lookup"><span data-stu-id="aa035-127">Define the message text for process control validations.</span></span>

## <a name="Binding"></a><span data-ttu-id="aa035-128">Duomenų susiejimas</span><span class="sxs-lookup"><span data-stu-id="aa035-128">Data binding</span></span>

<span data-ttu-id="aa035-129">ER formulių kūrimo įrankį galima naudoti apibrėžiant išraišką, kuri transformuoja iš duomenų šaltinių gautus duomenis, kad tuos duomenis būtų galima įvesti į duomenų vartotoją vykdymo metu tokiais būdais:</span><span class="sxs-lookup"><span data-stu-id="aa035-129">The ER formula designer can be used to define an expression that transforms data that is received from data sources, so that the data can be entered in the data consumer in the following ways at runtime:</span></span>

- <span data-ttu-id="aa035-130">iš programos duomenų šaltinių ir vykdymo laiko parametrų į ER duomenų modelį;</span><span class="sxs-lookup"><span data-stu-id="aa035-130">From application data sources and runtime parameters to an ER data model</span></span>
- <span data-ttu-id="aa035-131">iš ER duomenų modelio į ER formatą;</span><span class="sxs-lookup"><span data-stu-id="aa035-131">From an ER data model to an ER format</span></span>
- <span data-ttu-id="aa035-132">iš programos duomenų šaltinių ir vykdymo laiko parametrų į ER formatą.</span><span class="sxs-lookup"><span data-stu-id="aa035-132">From application data sources and runtime parameters to an ER format</span></span>

<span data-ttu-id="aa035-133">Tolesnė iliustracija rodo šio tipo išraiškos kūrimą.</span><span class="sxs-lookup"><span data-stu-id="aa035-133">The following illustration shows the design of an expression of this type.</span></span> <span data-ttu-id="aa035-134">Šiame pavyzdyje išraiška suapvalina „Intrastat“ lentelės lauko **Intrastat.AmountMST** reikšmę iki dviejų skaičių po kablelio ir pateikia suapvalintą reikšmę.</span><span class="sxs-lookup"><span data-stu-id="aa035-134">In this example, the expression rounds the value of the **Intrastat.AmountMST** field in the Intrastat table to two decimal places and then returns the rounded value.</span></span>

<span data-ttu-id="aa035-135">[![Duomenų susiejimo išraiška](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span><span class="sxs-lookup"><span data-stu-id="aa035-135">[![Data binding expression](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span></span>

<span data-ttu-id="aa035-136">Tolesnėje iliustracijoje parodyta, kaip galima naudoti šio tipo išraišką.</span><span class="sxs-lookup"><span data-stu-id="aa035-136">The following illustration shows how an expression of this type can be used.</span></span> <span data-ttu-id="aa035-137">Šiame pavyzdyje sukurtos išraiškos rezultatas įvedamas į duomenų modelio **Mokesčių ataskaitos modelis** komponentą **Transaction.InvoicedAmount**.</span><span class="sxs-lookup"><span data-stu-id="aa035-137">In this example, the result of the designed expression is entered in the **Transaction.InvoicedAmount** component of the **Tax reporting model** data model.</span></span>

<span data-ttu-id="aa035-138">[![Naudojama duomenų susiejimo išraiška](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span><span class="sxs-lookup"><span data-stu-id="aa035-138">[![Data binding expression being used](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span></span>

<span data-ttu-id="aa035-139">Vykdymo metu sukurta formulė `ROUND (Intrastat.AmountMST, 2)` kiekvieno „Intrastat“ lentelės įrašo lauko **AmountMST** reikšmę suapvalina iki dviejų skaičių po kablelio.</span><span class="sxs-lookup"><span data-stu-id="aa035-139">At runtime, the designed formula, `ROUND (Intrastat.AmountMST, 2)`, rounds the value of the **AmountMST** field for each record in the Intrastat table to two decimal places.</span></span> <span data-ttu-id="aa035-140">Suapvalintą reikšmę ji tada įveda į duomenų modelio **Mokesčių ataskaitos** komponentą **Transaction.InvoicedAmount**.</span><span class="sxs-lookup"><span data-stu-id="aa035-140">It then enters the rounded value in the **Transaction.InvoicedAmount** component of the **Tax reporting** data model.</span></span>

## <a name="Transformation"></a><span data-ttu-id="aa035-141">Duomenų formatavimas</span><span class="sxs-lookup"><span data-stu-id="aa035-141">Data formatting</span></span>

<span data-ttu-id="aa035-142">ER formulių kūrimo įrankį galima naudoti apibrėžiant išraišką, kuri formatuoja iš duomenų šaltinių gautus duomenis, kad tuos duomenis būtų galima siųsti kaip generuojamo elektroninio dokumento dalį.</span><span class="sxs-lookup"><span data-stu-id="aa035-142">The ER formula designer can be used to define an expression that formats data that is received from data sources, so that the data can be sent as part of the generating electronic document.</span></span> <span data-ttu-id="aa035-143">Galite turėti formatavimą, kuris turi būti taikomas kaip įprasta pakartotinai naudojama formato taisyklė.</span><span class="sxs-lookup"><span data-stu-id="aa035-143">You might have formatting that must be applied as a typical rule that should be reused for a format.</span></span> <span data-ttu-id="aa035-144">Tokiu atveju šį formatavimą galite vienu kartu įvesti į formato konfigūraciją kaip įvardytąją transformaciją, kuri turi formatavimo išraišką.</span><span class="sxs-lookup"><span data-stu-id="aa035-144">In this case, you can introduce that formatting one time in the format configuration, as a named transformation that has a formatting expression.</span></span> <span data-ttu-id="aa035-145">Tada šią įvardytąją transformaciją galima susieti su daugeliu formato komponentų, kurių išvedami duomenys turi būti formatuojami pagal jūsų sukurtą formatavimo išraišką.</span><span class="sxs-lookup"><span data-stu-id="aa035-145">This named transformation can then be linked to many format components where the output must be formatted according to the formatting expression that you created.</span></span>

<span data-ttu-id="aa035-146">Tolesnė iliustracija rodo šio tipo pakeitimo kūrimą.</span><span class="sxs-lookup"><span data-stu-id="aa035-146">The following illustration shows the design of a transformation of this type.</span></span> <span data-ttu-id="aa035-147">Šiame pavyzdyje transformacija **TrimmedString** sutrumpina duomenų tipo *Eilutė* duomenis pašalindama priekinius ir galinius tarpus.</span><span class="sxs-lookup"><span data-stu-id="aa035-147">In this example, the **TrimmedString** transformation truncates incoming data of the *String* data type by removing leading and trailing spaces.</span></span> <span data-ttu-id="aa035-148">Tada ji pateikia sutrumpintą eilutės reikšmę.</span><span class="sxs-lookup"><span data-stu-id="aa035-148">It then returns the truncated string value.</span></span>

<span data-ttu-id="aa035-149">[![Transformacija](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span><span class="sxs-lookup"><span data-stu-id="aa035-149">[![Transformation](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span></span>

<span data-ttu-id="aa035-150">Tolesnė iliustracija parodo, kaip galima naudoti tipo transformaciją.</span><span class="sxs-lookup"><span data-stu-id="aa035-150">The following illustration shows how a transformation of this type can be used.</span></span> <span data-ttu-id="aa035-151">Šiame pavyzdyje keletas formato komponentų vykdymo metu siunčia tekstą kaip išeigą į generuojamą elektroninį dokumentą.</span><span class="sxs-lookup"><span data-stu-id="aa035-151">In this example, several format components send text as output to the generating electronic document at runtime.</span></span> <span data-ttu-id="aa035-152">Visi šie formato keitimai nurodo transformaciją **TrimmedString** pagal pavadinimą.</span><span class="sxs-lookup"><span data-stu-id="aa035-152">All these format components refer to the **TrimmedString** transformation by name.</span></span>

<span data-ttu-id="aa035-153">[![Naudojama transformacija](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span><span class="sxs-lookup"><span data-stu-id="aa035-153">[![Transformation being used](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span></span>

<span data-ttu-id="aa035-154">Kai formato komponentai, pvz., komponentas **partyName** ankstesnėje iliustracijoje, nurodo transformaciją **TrimmedString**, transformacija į generuojamą elektrinį dokumentą kaip išeigą siunčia tekstą.</span><span class="sxs-lookup"><span data-stu-id="aa035-154">When format components, such as the **partyName** component in the preceding illustration, refer to the **TrimmedString** transformation, the transformation sends text as output to the generating electronic document.</span></span> <span data-ttu-id="aa035-155">Šiame tekste nėra priekinių ir galinių tarpų.</span><span class="sxs-lookup"><span data-stu-id="aa035-155">This text doesn't include leading and trailing spaces.</span></span>

<span data-ttu-id="aa035-156">Jei formatavimą būtina taikyti atskirai, galite jį nustatyti kaip atskirą konkretaus formato komponento susiejimo išraišką.</span><span class="sxs-lookup"><span data-stu-id="aa035-156">If you have formatting that must be applied individually, you can introduce that formatting as an individual expression of a binding of a specific format component.</span></span> <span data-ttu-id="aa035-157">Tolesnė iliustracija rodo šio tipo išraišką.</span><span class="sxs-lookup"><span data-stu-id="aa035-157">The following illustration shows an expression of this type.</span></span> <span data-ttu-id="aa035-158">Šiame pavyzdyje formato komponentas **partyType** yra susietas su duomenų šaltiniu per išraišką, kuri konvertuoja iš duomenų šaltinyje esančio lauko **Model.Company.RegistrationType** gaunamus duomenis į tekstą didžiosiomis raidėmis.</span><span class="sxs-lookup"><span data-stu-id="aa035-158">In this example, the **partyType** format component is bound to the data source via an expression that converts incoming data from the **Model.Company.RegistrationType** field in the data source to uppercase text.</span></span> <span data-ttu-id="aa035-159">Tada išraiška šį tekstą kaip išeigą siunčia į elektroninį dokumentą.</span><span class="sxs-lookup"><span data-stu-id="aa035-159">The expression then sends that text as output to the electronic document.</span></span>

<span data-ttu-id="aa035-160">[![Formatavimo taikymas atskiram komponentui](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span><span class="sxs-lookup"><span data-stu-id="aa035-160">[![Applying formatting to an individual component](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span></span>

## <a name="Validation"></a><span data-ttu-id="aa035-161">Proceso eigos valdymas</span><span class="sxs-lookup"><span data-stu-id="aa035-161">Process flow control</span></span>

<span data-ttu-id="aa035-162">ER formulių dizaino įrankis gali būti naudojamas apibrėžiant išraiškas, kurios valdo elektroninių dokumentų generavimo proceso eigą.</span><span class="sxs-lookup"><span data-stu-id="aa035-162">The ER formula designer can be used to define expressions that control the process flow of generating electronic documents.</span></span> <span data-ttu-id="aa035-163">Galite atlikti šias užduotis:</span><span class="sxs-lookup"><span data-stu-id="aa035-163">You can perform the following tasks:</span></span>

- <span data-ttu-id="aa035-164">Apibrėžkite sąlygas, kurios lemia, kada sustabyti dokumentų kūrimo procesą.</span><span class="sxs-lookup"><span data-stu-id="aa035-164">Define conditions that determine when a document creation process must be stopped.</span></span>
- <span data-ttu-id="aa035-165">Nurodykite išraiškas, kurios kuria vartotojams skirtus pranešimus apie sustabdytus procesus arba pateikia vykdymo žurnalo pranešimus apie besitęsiantį ataskaitų generavimo procesą.</span><span class="sxs-lookup"><span data-stu-id="aa035-165">Specify expressions that either create messages for the user about stopped processes or throw execution log messages about the continuing process of report generation.</span></span>
- <span data-ttu-id="aa035-166">Nurodykite generuojamų elektroninių dokumentų failų pavadinimus ir kontroliuokite jų kūrimo sąlygas.</span><span class="sxs-lookup"><span data-stu-id="aa035-166">Specify the file names of generating electronic documents, and control the conditions of their creation.</span></span>

<span data-ttu-id="aa035-167">Kiekviena proceso eigos valdymo taisyklė sukuriama kaip atskiras tikrinimo elementas.</span><span class="sxs-lookup"><span data-stu-id="aa035-167">Each rule of the process flow control is designed as an individual validation.</span></span> <span data-ttu-id="aa035-168">Tolesnė iliustracija rodo šio tipo tikrinimą.</span><span class="sxs-lookup"><span data-stu-id="aa035-168">The following illustration shows a validation of this type.</span></span> <span data-ttu-id="aa035-169">Čia pateikiamas šiame pavyzdyje esančios konfigūracijos paaiškinimas:</span><span class="sxs-lookup"><span data-stu-id="aa035-169">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="aa035-170">Tikrinimas įvertinamas, kai generuojant XML failą sukuriamas mazgas **INSTAT**.</span><span class="sxs-lookup"><span data-stu-id="aa035-170">The validation is evaluated when the **INSTAT** node is created during generation of the XML file.</span></span>
- <span data-ttu-id="aa035-171">Jei operacijų sąrašas yra tuščias, tikrinimas sustabdo vykdymo procesą ir pateikia **FALSE**.</span><span class="sxs-lookup"><span data-stu-id="aa035-171">If the list of transactions is empty, the validation stops the execution process and returns **FALSE**.</span></span>
- <span data-ttu-id="aa035-172">Tikrinimas pateikia klaidos pranešimą, kuriame yra žymės SYS70894 tekstas vartotojo pageidaujama kalba.</span><span class="sxs-lookup"><span data-stu-id="aa035-172">The validation returns an error message that includes the text of label SYS70894 in the user's preferred language.</span></span>

<span data-ttu-id="aa035-173">[![Tikrinimas](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span><span class="sxs-lookup"><span data-stu-id="aa035-173">[![Validation](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span></span>

<span data-ttu-id="aa035-174">ER formulių kūrimo įrankį taip pat galima naudoti ir generuojamo elektroninio dokumento failo pavadinimui generuoti bei failų kūrimo procesui kontroliuoti.</span><span class="sxs-lookup"><span data-stu-id="aa035-174">The ER formula designer can also be used to generate a file name for a generating electronic document and to control the file creation process.</span></span> <span data-ttu-id="aa035-175">Tolesnė iliustracija rodo šio tipo proceso eigos valdymo kūrimą.</span><span class="sxs-lookup"><span data-stu-id="aa035-175">The following illustration shows the design of a process flow control of this type.</span></span> <span data-ttu-id="aa035-176">Čia pateikiamas šiame pavyzdyje esančios konfigūracijos paaiškinimas:</span><span class="sxs-lookup"><span data-stu-id="aa035-176">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="aa035-177">Duomenų šaltinio **model.Intrastat** įrašų sąrašas padalijamas į paketus.</span><span class="sxs-lookup"><span data-stu-id="aa035-177">The list of records from the **model.Intrastat** data source is divided into batches.</span></span> <span data-ttu-id="aa035-178">Kiekviename pakete yra iki 1000 įrašų.</span><span class="sxs-lookup"><span data-stu-id="aa035-178">Each batch contains up to 1,000 records.</span></span>
- <span data-ttu-id="aa035-179">Išeiga sukuria „zip“ failą, kuriame yra po vieną failą XML formatu kiekvienam sukurtam paketui.</span><span class="sxs-lookup"><span data-stu-id="aa035-179">The output creates a zip file that contains one file in XML format for every batch that was created.</span></span>
- <span data-ttu-id="aa035-180">Išraiška pateikia generuojamų elektroninių dokumentų failo pavadinimą sujungdama failo pavadinimą ir jo plėtinį.</span><span class="sxs-lookup"><span data-stu-id="aa035-180">An expression returns a file name for generating electronic documents by concatenating the file name and the file name extension.</span></span> <span data-ttu-id="aa035-181">Antrojo paketo ir visų vėlesnių paketų failo varde kaip priedėlis nurodytas paketo ID.</span><span class="sxs-lookup"><span data-stu-id="aa035-181">For the second batch and all subsequent batches, the file name contains the batch ID as a suffix.</span></span>
- <span data-ttu-id="aa035-182">Išraiška įgalina (pateikdama reikšmę **TRUE**) paketų, kuriuose yra bent vienas įrašas, failų kūrimo procesą.</span><span class="sxs-lookup"><span data-stu-id="aa035-182">An expression enables (by returning **TRUE**) the file creation process for batches that contain at least one record.</span></span>

<span data-ttu-id="aa035-183">[![Proceso eigos valdymas](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span><span class="sxs-lookup"><span data-stu-id="aa035-183">[![Process flow control](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span></span>

## <a name="Enabled"></a><span data-ttu-id="aa035-184">Dokumento turinio kontrolė</span><span class="sxs-lookup"><span data-stu-id="aa035-184">Document content control</span></span>

<span data-ttu-id="aa035-185">ER formulių kūrimo įrankį galima naudoti konfigūruojant išraiškas, kontroliuojančias duomenis, įtraukiamus į generuojamus elektroninius dokumentus vykdymo metu.</span><span class="sxs-lookup"><span data-stu-id="aa035-185">The ER formula designer can be used to configure expressions that control what data will be put into generated electronic documents at runtime.</span></span> <span data-ttu-id="aa035-186">Pagal išraiškas įjungiama arba išjungiama tam tikrų formato elementų išvestis, atsižvelgiant į apdorojamus duomenis ir sukonfigūruotą logiką.</span><span class="sxs-lookup"><span data-stu-id="aa035-186">The expressions can enable or disable the output of specific elements of the format, depending on processing data and configured logic.</span></span> <span data-ttu-id="aa035-187">Vieno formato elemento išraiškas galima įvesti lauke **Įjungta** skirtuke **Susiejimas** puslapyje **Operacijų kūrimo įrankis**.</span><span class="sxs-lookup"><span data-stu-id="aa035-187">These expressions can be entered for a single format element in the **Enabled** field on the **Mapping** tab of the **Operations designer** page.</span></span> <span data-ttu-id="aa035-188">Išraiškas galite įvesti kaip loginę sąlygą, kuri grąžina *Bulio logikos* reikšmę:</span><span class="sxs-lookup"><span data-stu-id="aa035-188">You can enter the expressions as a logic condition that returns a *Boolean* value:</span></span>

- <span data-ttu-id="aa035-189">Jei sąlyga grąžina **teisinga**, paleidžiamas dabartinis formato elementas.</span><span class="sxs-lookup"><span data-stu-id="aa035-189">If the condition returns **True**, the current format element is run.</span></span>
- <span data-ttu-id="aa035-190">Jei sąlyga grąžina **klaidinga**, praleidžiamas dabartinis formato elementas.</span><span class="sxs-lookup"><span data-stu-id="aa035-190">If the condition returns **False**, the current format element is skipped.</span></span>

<span data-ttu-id="aa035-191">Tolesnė iliustracija nurodo šio tipo išraiškas.</span><span class="sxs-lookup"><span data-stu-id="aa035-191">The following illustration shows expressions of this type.</span></span> <span data-ttu-id="aa035-192">(**ISO20022 kredito perdavimo (NO)** formato konfigūracijos, kurią teikia „Microsoft“, versija 11.12.11 naudojama kaip pavyzdys.) **XMLHeader** formato komponentas sukonfigūruotas apibrėžti kredito pervedimo pranešimo struktūrą pagal ISO 20022 XML pranešimo standartus.</span><span class="sxs-lookup"><span data-stu-id="aa035-192">(Version 11.12.11 of the **ISO20022 Credit transfer (NO)** format configuration that is provided by Microsoft is used as an example.) The **XMLHeader** format component is configured to describe the structure of the credit transfer message according to the ISO 20022 XML message standards.</span></span> <span data-ttu-id="aa035-193">Formato komponentas **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** konfigūruojamas į generuojamą pranešimą įtraukiant XML elementą **Ustrd** ir įtraukiant pavedimo informaciją nestruktūriniu formatu kaip toliau pateikiamų XML elementų tekstą.</span><span class="sxs-lookup"><span data-stu-id="aa035-193">The **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** format component is configured to add the **Ustrd** XML element to the generated message and to put the remittance information in an unstructured format as text of the following XML elements:</span></span>

- <span data-ttu-id="aa035-194">Komponentas **PaymentNotes** naudojamas generuojant mokėjimo pastabų tekstą.</span><span class="sxs-lookup"><span data-stu-id="aa035-194">The **PaymentNotes** component is used to generate the text of payment notes.</span></span>
- <span data-ttu-id="aa035-195">Nustačius komponentą **DelimitedSequence**, sugeneruojami kableliais atskirti sąskaitų faktūrų numeriai, naudojami apmokant esamą kredito pervedimą.</span><span class="sxs-lookup"><span data-stu-id="aa035-195">The **DelimitedSequence** component generates comma-separated invoice numbers that are used to settle the current credit transfer.</span></span>

<span data-ttu-id="aa035-196">[![„PaymentNotes“ ir „DelimitedSequence“ komponentai](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span><span class="sxs-lookup"><span data-stu-id="aa035-196">[![PaymentNotes and DelimitedSequence components](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="aa035-197">Komponentai **PaymentNotes** ir **DelimitedSequence** pažymėti klaustukais.</span><span class="sxs-lookup"><span data-stu-id="aa035-197">The **PaymentNotes** and **DelimitedSequence** components are labeled by using a question mark.</span></span> <span data-ttu-id="aa035-198">Klaustukas rodo, kad komponento naudojimas yra sąlyginis.</span><span class="sxs-lookup"><span data-stu-id="aa035-198">A question mark indicates that the use of a component is conditional.</span></span> <span data-ttu-id="aa035-199">Šiuo atveju komponentai naudojami remiantis šiais kriterijais:</span><span class="sxs-lookup"><span data-stu-id="aa035-199">In this case, use of the components is based on the following criteria:</span></span>
>
> - <span data-ttu-id="aa035-200">Išraiška `@.PaymentsNotes <> ""`, kurios apibrėžtis skirta komponentui **PaymentNotes**, įgalina (gavus **TEISINGA**) XML elementą **Ustrd** užpildymui mokėjimo pastabų tekstu, jei dabartinio kredito pervedimo tekstas nėra tuščias.</span><span class="sxs-lookup"><span data-stu-id="aa035-200">The `@.PaymentsNotes <> ""` expression that is defined for the **PaymentNotes** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with the text of payment notes, if that text isn't blank for the current credit transfer.</span></span>
>
>    <span data-ttu-id="aa035-201">[![„PaymentNotes“ komponento išraiška](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span><span class="sxs-lookup"><span data-stu-id="aa035-201">[![Expression for the PaymentNotes component](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span></span>
>
> - <span data-ttu-id="aa035-202">Išraiška `@.PaymentsNotes = ""`, kurios apibrėžtis skirta komponentui **DelimitedSequence**, įgalina (gavus **TEISINGA**) XML elementą **Ustrd** užpildymui sąskaitų faktūrų kableliais atskirtų numerių sąrašais, naudojamais  apmokant esamą kredito pervedimą, jei to kredito pervedimo mokėjimo pastabų tekstas yra tuščias.</span><span class="sxs-lookup"><span data-stu-id="aa035-202">The `@.PaymentsNotes = ""` expression that is defined for the **DelimitedSequence** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with a comma-separated list of the invoice numbers that are used to settle the current credit transfer, if the text of payment notes for that credit transfer is blank.</span></span>
>
>    <span data-ttu-id="aa035-203">[![„DelimitedSequence“ komponento išraiška](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span><span class="sxs-lookup"><span data-stu-id="aa035-203">[![Expression for the DelimitedSequence component](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span></span>
> 
> <span data-ttu-id="aa035-204">Remiantis šia sąranka, į kiekvieno skolininko mokėjimo generuojamą pranešimą, XML elementą **Ustrd** bus įtrauktas arba mokėjimo pastabų tekstas, arba, kai toks tekstas yra tuščias, kableliais atskirtų sąskaitų faktūrų numerių, naudojamų atliekant šį mokėjimą, tekstas.</span><span class="sxs-lookup"><span data-stu-id="aa035-204">Based on this setup, the message that is generated for each debtor payment, the **Ustrd** XML element, will contain either the text of payment notes or, when that text is blank, a comma-separated list of the invoice numbers that are used to settle the payment.</span></span>

## <a name="TestFormula"></a><span data-ttu-id="aa035-205">Sukonfigūruotų formulių tikrinimas</span><span class="sxs-lookup"><span data-stu-id="aa035-205">Validation of configured formulas</span></span>

<span data-ttu-id="aa035-206">Puslapyje **Formulių kūrimo įrankis** pasirinkite **Bandymas**, kad patikrintumėte, kaip veikia sukonfigūruota formulė.</span><span class="sxs-lookup"><span data-stu-id="aa035-206">On the **Formula designer** page, select **Test** to validate how the configured formula works.</span></span>

<span data-ttu-id="aa035-207">[![Bandymo pasirinkimas tikrinant formulę](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span><span class="sxs-lookup"><span data-stu-id="aa035-207">[![Selecting Test to validate a forumula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span></span>

<span data-ttu-id="aa035-208">Kai reikia argumentų formulės reikšmių, galite atidaryti dialogo langą **Tikrinimo išraiškos**puslapyje **Formulių kūrimo įrankis**.</span><span class="sxs-lookup"><span data-stu-id="aa035-208">When the values of formula arguments are required, you can open the **Test expression** dialog box from the **Formula designer** page.</span></span> <span data-ttu-id="aa035-209">Daugeliu atvejų šiuos argumentus reikia nustatyti neautomatiniu būdu, nes sukonfigūruoti susiejimai nepaleidžiami kūrimo metu.</span><span class="sxs-lookup"><span data-stu-id="aa035-209">In most cases, these arguments must be manually defined, because the configured bindings aren't run at design time.</span></span> <span data-ttu-id="aa035-210">Skirtuko **Bandymo rezultatas** puslapyje **Formulių kūrimo įrankis** rodomas sukonfigūruotos formulės vykdymo rezultatas.</span><span class="sxs-lookup"><span data-stu-id="aa035-210">The **Test result** tab on the **Formula designer** page shows the result from execution of the configured formula.</span></span>

<span data-ttu-id="aa035-211">Toliau pateikiamas pavyzdys, kaip patikrinti formulę, kuri sukonfigūruota užsienio prekybos domenui, kad įsitikintumėte, jog „Intrastat“ prekės kode yra tik skaitmenys.</span><span class="sxs-lookup"><span data-stu-id="aa035-211">The following example shows how you can test the formula that is configured for the foreign trade domain to make sure that the Intrastat commodity code contains only digits.</span></span>

<span data-ttu-id="aa035-212">Kai išbandote šią formulę, galite naudoti dialogo langą **Tikrinimo išraiška** norėdami nurodyti „Intrastat“ prekės testavimo kodo vertę.</span><span class="sxs-lookup"><span data-stu-id="aa035-212">When you test this formula, you can use the **Test expression** dialog box to specify the value of the Intrastat commodity code for testing.</span></span>

<span data-ttu-id="aa035-213">[![„Intrastat“ prekės testavimo kodo nurodymas](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span><span class="sxs-lookup"><span data-stu-id="aa035-213">[![Specifying the Intrastat commodity code for testing](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span></span>

<span data-ttu-id="aa035-214">Nurodę „Intrastat“ prekės kodą ir pasirinkę **Gerai**, skirtuko **Bandymo rezultatas** puslapyje **Formulės kūrimo įrankis** rodomas sukonfigūruotos formulės vykdymo rezultatas.</span><span class="sxs-lookup"><span data-stu-id="aa035-214">After you specify the Intrastat commodity code and select **OK**, the **Test result** tab on the **Formula designer** page shows the result of execution of the configured formula.</span></span> <span data-ttu-id="aa035-215">Tada galite įvertinti, ar rezultatas yra priimtinas.</span><span class="sxs-lookup"><span data-stu-id="aa035-215">You can then evaluate whether the result is acceptable.</span></span> <span data-ttu-id="aa035-216">Jei rezultatas nėra priimtinas, galite atnaujinti formulę ir tikrinti ją dar kartą.</span><span class="sxs-lookup"><span data-stu-id="aa035-216">If the result isn't acceptable, you can update the formula and test it again.</span></span>

<span data-ttu-id="aa035-217">[![Bandymo rezultatas](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span><span class="sxs-lookup"><span data-stu-id="aa035-217">[![Test result](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span></span>

<span data-ttu-id="aa035-218">Kai kurios formulės negali būti išbandytos kūrimo metu.</span><span class="sxs-lookup"><span data-stu-id="aa035-218">Some formulas can't be tested at design time.</span></span> <span data-ttu-id="aa035-219">Pvz., formulė gali grąžinto duomenų tipo, kurio negalima parodyti skirtuke **Bandymo rezultatas**, rezultatą. Tokiu atveju parodomas klaidos pranešimas, kuriame nurodoma, kad formulė negali būti išbandyta.</span><span class="sxs-lookup"><span data-stu-id="aa035-219">For example, a formula might return a result of a data type that can't be shown on the **Test result** tab. In this case, you receive an error message that states that the formula can't be tested.</span></span>

<span data-ttu-id="aa035-220">[![Klaidos pranešimas](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span><span class="sxs-lookup"><span data-stu-id="aa035-220">[![Error message](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="aa035-221">Papildomi ištekliai</span><span class="sxs-lookup"><span data-stu-id="aa035-221">Additional resources</span></span>

- [<span data-ttu-id="aa035-222">Elektroninių ataskaitų apžvalga</span><span class="sxs-lookup"><span data-stu-id="aa035-222">Electronic Reporting overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="aa035-223">Elektroninių ataskaitų formulių kalba</span><span class="sxs-lookup"><span data-stu-id="aa035-223">Electronic reporting formula language</span></span>](er-formula-language.md)
