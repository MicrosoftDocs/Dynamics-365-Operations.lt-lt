---
title: ER šablonų atsarginių kopijų saugykla
description: Šioje temoje paaiškinta, kaip naudoti elektroninių ataskaitų (ER) atsarginių kopijų saugyklą šablonų atkūrimui.
author: NickSelin
manager: AnnBe
ms.date: 08/19/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Operations
ms.custom: 27621
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-08-13
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 8b4e783f79b02c77a27fc59c2f4be8a192f2f476
ms.sourcegitcommit: 2460d0da812c45fce67a061386db52e0ae46b0f3
ms.translationtype: HT
ms.contentlocale: lt-LT
ms.lasthandoff: 09/30/2019
ms.locfileid: "2248705"
---
# <a name="backup-storage-of-er-templates"></a><span data-ttu-id="100d3-103">ER šablonų atsarginių kopijų saugykla</span><span class="sxs-lookup"><span data-stu-id="100d3-103">Backup storage of ER templates</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="100d3-104">[Elektroninių ataskaitų (ER) sistema](general-electronic-reporting.md) leidžia verslo vartotojams konfigūruoti siunčiamų dokumentų formatus pagal įvairių šalių bei regionų teisinius reikalavimus.</span><span class="sxs-lookup"><span data-stu-id="100d3-104">The [Electronic reporting (ER) framework](general-electronic-reporting.md) lets business users configure formats for outbound documents according to the legal requirements of various countries and regions.</span></span> <span data-ttu-id="100d3-105">Sukonfigūruotiems ER formatams galima naudoti iš anksto apibrėžtus šablonus, kurie leidžia generuoti įvairių formatų siunčiamus dokumentus, pvz., „Microsoft Excel“ darbaknyges, „Microsoft Word“ dokumentus arba PDF dokumentus.</span><span class="sxs-lookup"><span data-stu-id="100d3-105">Configured ER formats can use predefined templates to generate outbound documents in various formats, such as Microsoft Excel workbooks, Microsoft Word documents, or PDF documents.</span></span> <span data-ttu-id="100d3-106">Šablonai yra užpildomi duomenimis, kurių generuojamiems dokumentams reikalauja sukonfigūruotas duomenų srautas.</span><span class="sxs-lookup"><span data-stu-id="100d3-106">The templates are filled with data that the configured dataflow for generated documents requires.</span></span>

<span data-ttu-id="100d3-107">Kiekvienas sukonfigūruotas formatas gali būti publikuojamas kaip ER sprendimo dalis.</span><span class="sxs-lookup"><span data-stu-id="100d3-107">Each configured format can be published as part of an ER solution.</span></span> <span data-ttu-id="100d3-108">Kiekvienas ER sprendimas gali būti eksportuojamas iš vieno „Finance and Operations“ egzemplioriaus ir importuojamas į kitą egzempliorių.</span><span class="sxs-lookup"><span data-stu-id="100d3-108">Each ER solution can be exported from one instance of Finance and Operations and imported into another instance.</span></span>

<span data-ttu-id="100d3-109">ER sistema naudoja [dokumentų valdymo sistemą](../../fin-and-ops/organization-administration/configure-document-management.md) saugoti esamam „Finance and Operations“ egzemplioriui reikalingus šablonus.</span><span class="sxs-lookup"><span data-stu-id="100d3-109">The ER framework uses the [Document management framework](../../fin-and-ops/organization-administration/configure-document-management.md) to keep the required templates for the current Finance and Operations instance.</span></span> <span data-ttu-id="100d3-110">Atsižvelgiant į ER sistemos nustatymus, kaip fizinę pirminę šablonų saugyklos vietą galima pasirinkti „Microsoft Azure“ didelių dvejetainių objektų saugyklą arba „Microsoft SharePoint“ aplanką.</span><span class="sxs-lookup"><span data-stu-id="100d3-110">Depending on the settings of the ER framework, Microsoft Azure Blob storage or a Microsoft SharePoint folder can be selected as the physical primary storage location for templates.</span></span> <span data-ttu-id="100d3-111">(Norėdami gauti daugiau informacijos, žr. [žr. ER sistemos konfigūravimas](electronic-reporting-er-configure-parameters.md).) DocuValue lentelėje kiekvienam šablonui saugomas atskiras įrašas.</span><span class="sxs-lookup"><span data-stu-id="100d3-111">(For more information, see [Configure the ER framework](electronic-reporting-er-configure-parameters.md).) The DocuValue table holds an individual record for each template.</span></span> <span data-ttu-id="100d3-112">Kiekviename įraše esančiame lauke **AccessInformation** saugomas šablono failo, esančio sukonfigūruotoje saugyklos vietoje, kelias.</span><span class="sxs-lookup"><span data-stu-id="100d3-112">In each record, the **AccessInformation** field stores the path of a template file that is located in the configured storage location.</span></span>

<span data-ttu-id="100d3-113">Valdydami savo „Finance and Operations“ egzempliorius, galbūt nuspręsite perkelti dabartinį egzempliorių į kitą vietą.</span><span class="sxs-lookup"><span data-stu-id="100d3-113">When you manage your Finance and Operations instances, you might decide to migrate the current instance to another location.</span></span> <span data-ttu-id="100d3-114">Pavyzdžiui, galite perkelti gamybos egzempliorių į naują smėlio dėžės aplinką.</span><span class="sxs-lookup"><span data-stu-id="100d3-114">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="100d3-115">Jei sukonfigūruosite, kad ER sistema saugotų šablonus didelių dvejetainių objektų saugykloje, DocuValue lentelėje, esančioje naujojoje smėlio dėžės aplinkoje, bus nuoroda į didelių dvejetainių objektų saugyklos egzempliorių gamybos aplinkoje.</span><span class="sxs-lookup"><span data-stu-id="100d3-115">If you configured the ER framework to store templates in Blob storage, the DocuValue table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="100d3-116">Tačiau šio egzemplioriaus negalima pasiekti iš smėlio dėžės aplinkos, nes perkėlimo procesas nepalaiko artefaktų perkėlimo didelių dvejetainių objektų saugykloje.</span><span class="sxs-lookup"><span data-stu-id="100d3-116">However, this instance can't be accessed from the sandbox environment, because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="100d3-117">Todėl, pasirinkus ER formatą, kuris naudoja šabloną generuoti verslo dokumentams, įvyksta išimtis ir informuojama apie trūkstamą šabloną.</span><span class="sxs-lookup"><span data-stu-id="100d3-117">Therefore, if you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="100d3-118">Taip pat rekomenduojama naudoti ER valymo įrankį, kad panaikintumėte, o tada iš naujo importuotumėte ER konfigūraciją, kurioje yra šablonas.</span><span class="sxs-lookup"><span data-stu-id="100d3-118">You're also guided to use the ER cleanup tool to delete and then re-import the ER format configuration that contains the template.</span></span> <span data-ttu-id="100d3-119">Kadangi gali būti kelios ER formato konfigūracijos, šis procesas gali užtrukti.</span><span class="sxs-lookup"><span data-stu-id="100d3-119">Because you might have several ER format configurations, this process can be time consuming.</span></span>

<span data-ttu-id="100d3-120">ER šablonų atsarginių kopijų saugyklos funkcija gali padėti kurti šablonus, kad juos visada galėtumėte panaudoti verslo dokumentams generuoti.</span><span class="sxs-lookup"><span data-stu-id="100d3-120">The Backup storage of ER templates feature can help you make your templates so that they are always available to generate business documents.</span></span>

> [!NOTE]
> <span data-ttu-id="100d3-121">Šią funkciją galima naudoti tik tada, kai kaip fizinė ER šablonų saugyklos vieta yra pasirinkta didelių dvejetainių objektų saugykla.</span><span class="sxs-lookup"><span data-stu-id="100d3-121">This feature can be used only when Blob storage has been selected as the physical storage location for ER templates.</span></span>

<span data-ttu-id="100d3-122">Naudojant šią funkciją, kiekvienas naujos ER formato konfigūracijos šablonas dabartinėje aplinkoje automatiškai įrašomas į šablonams skirtą atsarginių kopijų saugojimo vietą (duomenų bazės lentelė ERDocuDatabaseStorage), kai įvyksta šie įvykiai:</span><span class="sxs-lookup"><span data-stu-id="100d3-122">For this feature, every template of a new ER format configuration in the current environment is automatically saved to the backup storage location for templates (the ERDocuDatabaseStorage database table) when the following events occur:</span></span>

- <span data-ttu-id="100d3-123">Importuojate naują ER formato konfigūraciją, kurioje yra šablonas.</span><span class="sxs-lookup"><span data-stu-id="100d3-123">You import a new ER format configuration that contains a template.</span></span>
- <span data-ttu-id="100d3-124">Užbaigiate ER formato konfigūracijos, kurioje yra šablonas, juodraštinę versiją.</span><span class="sxs-lookup"><span data-stu-id="100d3-124">You complete the draft version of an ER format configuration that contains a template.</span></span>

<span data-ttu-id="100d3-125">Šablonų atsarginės kopijos perkeliamos į naują „Finance and Operations“ egzempliorių kaip programos duomenų bazės dalis.</span><span class="sxs-lookup"><span data-stu-id="100d3-125">Backup copies of templates are migrated to a new instance of Finance and Operations as part of the application database.</span></span>

<span data-ttu-id="100d3-126">Jei ER formato šablono, pavyzdžiui, norint apdoroti tiekėjo mokėjimus, reikia siunčiamų dokumentų generavimui, įskaitant mokėjimo pažymos ir kontrolės ataskaitų generavimą, tačiau reikiamo šablono nepavyksta rasti pirminėje saugojimo vietoje, įvyksta šie įvykiai:</span><span class="sxs-lookup"><span data-stu-id="100d3-126">If a template of an ER format is required for generation of outbound documents, to process vendor payments including generation of payment advice and control reports, for example, but the required template isn't found in the primary storage location, the following events occur:</span></span>

- <span data-ttu-id="100d3-127">Jei šablonas yra atsarginių kopijų saugojimo vietoje, jis automatiškai iš atsarginių kopijų saugojimo vietos atkuriamas pirminėje saugojimo vietoje ir yra naudojamas vykdymui.</span><span class="sxs-lookup"><span data-stu-id="100d3-127">If the template is available in the backup storage location, it is automatically taken from the backup storage location, restored to the primary storage location, and used for the current execution.</span></span>
- <span data-ttu-id="100d3-128">Kiekvienam vartotojui, kuriam priskirtas vaidmuo **Elektroninių ataskaitų kūrėjas** arba **Sistemos administratorius**, veiksmų centre pranešama apie problemą dėl trūkstamo šablono.</span><span class="sxs-lookup"><span data-stu-id="100d3-128">Every user who is assigned to the **Electronic reporting developer** or **System administrator** role is notified about the missing template issue through the Action center.</span></span> <span data-ttu-id="100d3-129">Rodomas pranešimas priklauso nuo parametro **Automatiškai kaip paketą vykdyti sugadintų šablonų atkūrimo procedūrą**:</span><span class="sxs-lookup"><span data-stu-id="100d3-129">The message that appears depends on the value of the **Automatically run the procedure of restoring the broken templates in batch** parameter:</span></span>

    - <span data-ttu-id="100d3-130">Jei nustatyta šio parametro reikšmė **išjungta**, pranešime rekomenduojama pradėti paketinį procesą, kad būt automatiškai išspręstos panašios problemos, susijusios su kitais ER formato konfigūracijos šablonais.</span><span class="sxs-lookup"><span data-stu-id="100d3-130">If this parameter is set to **Off**, the message recommends that you start the batch process to automatically fix similar issues for other ER format configuration templates.</span></span> <span data-ttu-id="100d3-131">Pranešime yra nuoroda, kurią galite naudoti, kad pradėtumėte paketinį procesą.</span><span class="sxs-lookup"><span data-stu-id="100d3-131">The message includes a link that you can use to start the batch process.</span></span>
    - <span data-ttu-id="100d3-132">Jei šio parametro reikšmė yra **Įjungta**, pranešime informuojama apie problemą dėl trūkstamų šablonų ir kad buvo automatiškai suplanuotas naujas paketinis procesas **Atkurti sugadintus šablonus iš vidinės duomenų bazės atsarginės kopijos**.</span><span class="sxs-lookup"><span data-stu-id="100d3-132">If this parameter is set to **On**, the message notifies you that a missing templates issue has been discovered, and that a new batch process, **Restore broken templates from internal database backup**, has been automatically scheduled.</span></span> <span data-ttu-id="100d3-133">Šis paketinis procesas automatiškai ištaisys panašias problemas su kitas šablonais.</span><span class="sxs-lookup"><span data-stu-id="100d3-133">This batch process will automatically fix similar issues for other templates.</span></span>

<span data-ttu-id="100d3-134">Norėdami nustatyti parametrą **Automatiškai kaip paketą vykdyti sugadintų šablonų atkūrimo procedūrą**, atlikite šiuos veiksmus:</span><span class="sxs-lookup"><span data-stu-id="100d3-134">To set up the he **Automatically run the procedure of restoring the broken templates in batch** parameter, complete the following steps:</span></span>

1. <span data-ttu-id="100d3-135">„Finance and Operations“ atidarykite **Organizacijos administravimas \> Elektroninės ataskaitos \> Konfigūracijų puslapis**.</span><span class="sxs-lookup"><span data-stu-id="100d3-135">In Finance and Operations, open the **Organization administration \> Electronic reporting \> Configurations page**.</span></span>
2. <span data-ttu-id="100d3-136">Puslapio **Konfigūracijos** veiksmų srities skirtuke **Konfigūracijos**, grupėje **Papildomi parametrai** pasirinkite **Vartotojo parametrai**.</span><span class="sxs-lookup"><span data-stu-id="100d3-136">On the **Configurations** page, on the Action Pane, on the **Configurations** tab, in the **Advanced settings** group, select **User parameters**.</span></span>
3. <span data-ttu-id="100d3-137">Dialogo lange **Vartotojo parametrai** nustatykite reikiamą parametro **Automatiškai kaip paketą vykdyti sugadintų šablonų atkūrimo procedūrą** reikšmę.</span><span class="sxs-lookup"><span data-stu-id="100d3-137">In the **User parameters** dialog box, set the required value for the **Automatically run the procedure of restoring the broken templates in batch** parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="100d3-138">Šis parametras nurodomas kaip būdingas konkrečiam programos vartotojui ir prisijungusiai įmonei.</span><span class="sxs-lookup"><span data-stu-id="100d3-138">This parameter is defined as application user and logged company specific.</span></span>

![ER konfigūracijų puslapis](./media/GER-BackupTemplates-1.png)

<span data-ttu-id="100d3-140">Toliau esančiame paveikslėlyje pateiktas pranešimo, kuris rodomas, kai nustatyta parametro **Automatiškai kaip paketą vykdyti sugadintų šablonų atkūrimo procedūrą** reikšmė yra **Įjungta**, pavyzdys.</span><span class="sxs-lookup"><span data-stu-id="100d3-140">The following illustration shows an example of the message that appears when the **Automatically run the procedure of restoring the broken templates in batch** parameter is set to **On**.</span></span>

![Tiekėjo mokėjimų žurnalo puslapis](./media/GER-BackupTemplates-2.png)

<span data-ttu-id="100d3-142">Toliau esančiame paveikslėlyje parodytas paketinis procesas **Atkurti sugadintus šablonus iš vidinės duomenų bazės atsarginės kopijos** puslapyje **Paketinė užduotis**.</span><span class="sxs-lookup"><span data-stu-id="100d3-142">The following illustration shows the **Restore broken templates from internal database backup** batch process on the **Batch job** page.</span></span>

![Paketinės užduoties puslapis](./media/GER-BackupTemplates-3.png)

<span data-ttu-id="100d3-144">Įvykdytų **Atkurti sugadintus šablonus iš vidinės duomenų bazės atsarginės kopijos** paketinių procesų vykdymo žurnalas apima informaciją apie šablonus, kurie buvo atkurti iš atsarginės kopijos saugojimo vietos į pirminę saugojimo vietą.</span><span class="sxs-lookup"><span data-stu-id="100d3-144">The execution log of the completed **Restore broken templates from internal database backup** batch process includes information about the templates that have been restored from the backup storage location to the primary storage location.</span></span>

![Paketinės užduoties retrospektyvos puslapis](./media/GER-BackupTemplates-4.png)

<span data-ttu-id="100d3-146">Esant numatytiesiems nustatymams, automatinio šablonų, naudojamų ER formato konfigūracijose, atsarginių kopijų kūrimo procesas yra įjungtas.</span><span class="sxs-lookup"><span data-stu-id="100d3-146">By default, the process of automatically creating backup copies of templates that reside in ER format configurations is turned on.</span></span> <span data-ttu-id="100d3-147">Norėdami, kad šablonų atsarginės kopijos nebūtų daromos, nustatykite parinkties **Nebekurti šablono atsarginių kopijų** reikšmę **Taip**; ši parinktis pasiekiama kortelėje **Priedai**, esančioje puslapyje **Elektroninių ataskaitų parametrai**.</span><span class="sxs-lookup"><span data-stu-id="100d3-147">To stop making backup copies of templates, set the **Stop making backup copies of template** option to **Yes** on the **Attachments** tab of the **Electronic reporting parameters** page.</span></span> <span data-ttu-id="100d3-148">Šį puslapį galite atidaryti iš darbo srities **Elektroninės ataskaitos**.</span><span class="sxs-lookup"><span data-stu-id="100d3-148">You can open this page from the **Electronic reporting** workspace.</span></span>

<span data-ttu-id="100d3-149">Norėdami nustatyti parinkties **Nebekurti šablonų atsarginių kopijų** reikšmę **Taip** ir nebesaugoti anksčiau sukurtų šablonų atsarginių kopijų, pasirinkite **Valyti atsarginių kopijų saugyklą** puslapyje **Elektroninių ataskaitų parametrai**.</span><span class="sxs-lookup"><span data-stu-id="100d3-149">If you set the **Stop making backup copies of templates** option to **Yes** and don't want to keep the backup copies that were previously made of templates, select **Clean up backup storage** on the **Electronic reporting parameters** page.</span></span>

<span data-ttu-id="100d3-150">Jei savo aplinką atnaujinote į „Finance and Operations“ 10.0.5 (2019 m. spalio) versiją ir norite pereiti prie naujos aplinkos, kuri apima vykdytinas ER formato konfigūracijas, prieš vykdydami perkėlimą, pasirinkite **Užpildyti atsarginių kopijų saugyklą** puslapyje **Elektroninių ataskaitų parametrai**.</span><span class="sxs-lookup"><span data-stu-id="100d3-150">If you upgraded your environment to Finance and Operations version 10.0.5 (October 2019) and want to migrate to a new environment that includes ER format configurations that can be run, select **Fill in backup storage** on the **Electronic reporting parameters** page before the migration occurs.</span></span> <span data-ttu-id="100d3-151">Šiuo mygtuku pradedamas visų galimų šablonų atsarginių kopijų kūrimo procesas, kad jie galėtų būti išsaugoti šablonų ER atsarginių kopijų saugojimo vietoje.</span><span class="sxs-lookup"><span data-stu-id="100d3-151">This button starts the process of making backup copies of all available templates, so that they can be stored in the ER backup storage location for templates.</span></span>

![Elektroninių ataskaitų parametrų puslapis](./media/GER-BackupTemplates-5.png)

## <a name="supported-deployments"></a><span data-ttu-id="100d3-153">Palaikomi diegimai</span><span class="sxs-lookup"><span data-stu-id="100d3-153">Supported deployments</span></span>

<span data-ttu-id="100d3-154">„Finance and Operations“ 10.0.5 versijoje ER šablonų atsarginių kopijų saugojimo funkcija yra prieinama tik debesyje veikiančioms sistemoms.</span><span class="sxs-lookup"><span data-stu-id="100d3-154">In Finance and Operations version 10.0.5, the Backup storage of ER templates feature is available only in cloud deployments.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="100d3-155">Papildomi ištekliai</span><span class="sxs-lookup"><span data-stu-id="100d3-155">Additional resources</span></span>

[<span data-ttu-id="100d3-156">Elektroninių ataskaitų apžvalga</span><span class="sxs-lookup"><span data-stu-id="100d3-156">Electronic reporting overview</span></span>](general-electronic-reporting.md)

[<span data-ttu-id="100d3-157">Elektroninių ataskaitų sistemos konfigūravimas</span><span class="sxs-lookup"><span data-stu-id="100d3-157">Configure the Electronic reporting framework</span></span>](electronic-reporting-er-configure-parameters.md)
