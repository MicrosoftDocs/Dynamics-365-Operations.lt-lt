---
title: Mašininio mokymo modelių rezultatai (peržiūros versija)
description: Šioje temoje aptariamos supainiojimo matricos, klasifikavimo problemos ir mašininio mokymo (ML) modelių tikslumas. Siekiama, kad geriau suprastumėte ML prognozavimo rezultatų tikslumą.
author: ShivamPandey-msft
manager: AnnBe
ms.date: 06/05/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: roschlom
ms.custom: 14151
ms.assetid: 3d43ba40-780c-459a-a66f-9a01d556e674
ms.search.region: Global
ms.author: shpandey
ms.search.validFrom: 2020-07-14
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: 5223bdfbc0f5828b5dccac30362783075ce8157f
ms.sourcegitcommit: f59df61799915f6a79aec7e3e8664c02df6597da
ms.translationtype: HT
ms.contentlocale: lt-LT
ms.lasthandoff: 01/22/2021
ms.locfileid: "5044377"
---
# <a name="results-of-machine-learning-models-preview"></a><span data-ttu-id="1c3dc-104">Mašininio mokymo modelių rezultatai (peržiūros versija)</span><span class="sxs-lookup"><span data-stu-id="1c3dc-104">Results of machine learning models (preview)</span></span>

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

<span data-ttu-id="1c3dc-105">Šioje temoje aptariamos supainiojimo matricos, klasifikavimo problemos ir mašininio mokymo (ML) modelių tikslumas.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-105">This topic discusses confusion matrices, classification problems, and accuracy in machine learning (ML) models.</span></span> <span data-ttu-id="1c3dc-106">Siekiama, kad geriau suprastumėte ML prognozavimo rezultatų tikslumą.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-106">The purpose is to enhance your understanding of accuracy in ML prediction results.</span></span> <span data-ttu-id="1c3dc-107">Tikslinė auditorija apima inžinierius, analitikus ir vadovus, kurie nori plėtoti savo žinias ir įgūdžius duomenų mokslo srityje.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-107">The target audience includes engineers, analysts, and managers who want to build their knowledge and skills in data science.</span></span>

## <a name="confusion-matrix"></a><span data-ttu-id="1c3dc-108">Supainiojimo matrica</span><span class="sxs-lookup"><span data-stu-id="1c3dc-108">Confusion matrix</span></span>
<span data-ttu-id="1c3dc-109">Kai prižiūrimos ML problemos išmokoma naudojant istorinių duomenų rinkinį, ji išbandoma naudojantis duomenimis, kurie nėra įtraukiami į mokymo procesą.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-109">After a supervised ML problem is trained on a set of historical data, it's tested by using data that is withheld from the training process.</span></span> <span data-ttu-id="1c3dc-110">Tokiu būdu galite palyginti išmokyto modelio prognozes su faktinėmis reikšmėmis.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-110">In this way, you can compare the predictions from the trained model with the actual values.</span></span> <span data-ttu-id="1c3dc-111">Supainiojimo matrica suteikia priemonių vertinti, kiek sėkminga yra klasifikacijos problema ir kur daroma klaidų (t. y., kur susipainiojama).</span><span class="sxs-lookup"><span data-stu-id="1c3dc-111">The confusion matrix provides a means of evaluating how successful a classification problem is and where it makes mistakes (that is, where it becomes "confused").</span></span>

<span data-ttu-id="1c3dc-112">Pavyzdžiui, jūsų tikslas yra nuspėti, ar augintinis yra šuo, ar katė, remiantis tam tikrais fiziniais bei elgesio atributais.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-112">For example, your objective is to predict whether a pet is a dog or a cat, based on some physical and behavioral attributes.</span></span> <span data-ttu-id="1c3dc-113">Jei naudojamas bandomasis duomenų rinkinys, kuriame yra 30 šunų ir 20 kačių, supainiojimo matrica gali būti panaši į šį paveikslėlį.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-113">If you have a test dataset that contains 30 dogs and 20 cats, the confusion matrix might resemble the following illustration.</span></span>

![Rūšių prognozavimo pavyzdys](media/species-prediction-matrix.png)

<span data-ttu-id="1c3dc-115">Žalių langelių skaičiai atitinka teisingas prognozes.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-115">The numbers in the green cells represent correct predictions.</span></span> <span data-ttu-id="1c3dc-116">Kaip matote, modelis teisingai prognozuoja didesnę faktinių kačių procentinę dalį.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-116">As you can see, the model predicted a higher percentage of the actual cats correctly.</span></span> <span data-ttu-id="1c3dc-117">Bendrą modelio tikslumą yra lengva apskaičiuoti.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-117">The overall accuracy of the model is easy to calculate.</span></span> <span data-ttu-id="1c3dc-118">Šiuo atveju: 42 ÷ 50 arba 0,84.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-118">In this case, it's 42 ÷ 50, or 0.84.</span></span>

### <a name="multi-class-classifiers-in-a-confusion-matrix"></a><span data-ttu-id="1c3dc-119">Kelių klasių klasifikatoriai supainiojimo matricoje</span><span class="sxs-lookup"><span data-stu-id="1c3dc-119">Multi-class classifiers in a confusion matrix</span></span>

<span data-ttu-id="1c3dc-120">Dauguma diskusijų apie supainiojimo matricą yra sutelktos į dvejetainius klasifikatorius, kaip ankstesniame pavyzdyje.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-120">Most discussions about the confusion matrix are focused on binary classifiers, as in the preceding example.</span></span> <span data-ttu-id="1c3dc-121">Šis atvejis yra specialus, nes galima atsižvelgti į kitą metriką, pvz., jautrumą ir atitiktį.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-121">This case is a special case where other metrics can be considered, such as sensitivity and recall.</span></span>

<span data-ttu-id="1c3dc-122">Toliau apsvarstysime finansinės situacijos klasifikavimo problemą, apimančią tris būsenas.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-122">Next, we will consider a classification problem for a finance scenario that has three states.</span></span> <span data-ttu-id="1c3dc-123">Modelis prognozuoja, ar kliento SF bus sumokėta laiku, pavėluotai ar labai pavėluotai.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-123">The model predicts whether a customer invoice will be paid on time, late, or very late.</span></span> <span data-ttu-id="1c3dc-124">Pavyzdžiui, iš 100 bandomųjų SF 50 yra apmokamos laiku, 35 apmokamos pavėluotai, o 15 – labai pavėluotai.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-124">For example, out of 100 test invoices, 50 are paid on time, 35 are paid late, and 15 are paid very late.</span></span> <span data-ttu-id="1c3dc-125">Šiuo atveju modelis gali sukurti supainiojimo matricą, kuri panaši į šį paveikslėlį.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-125">In this case, a model might produce a confusion matrix that resembles the following illustration.</span></span>

![1 modelis](media/payment-prediction-matrix.png)<span data-ttu-id="1c3dc-127">]</span><span class="sxs-lookup"><span data-stu-id="1c3dc-127">]</span></span>

<span data-ttu-id="1c3dc-128">Supainiojimo matrica suteikia daug daugiau informacijos, nei paprasta tikslumo metrika.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-128">A confusion matrix provides significantly more information than a simple accuracy metric.</span></span> <span data-ttu-id="1c3dc-129">Tačiau ją vis tiek gana lengva suprasti.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-129">However, it's still relatively easy to understand.</span></span> <span data-ttu-id="1c3dc-130">Supainiojimo matrica nurodo, ar turite subalansuotą duomenų rinkinį, kai pateikiamų klasių skaičiai yra panašūs.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-130">A confusion matrix tells you whether you have a balanced dataset where the output classes have similar counts.</span></span> <span data-ttu-id="1c3dc-131">Naudojant kelių klasių scenarijų, ji nurodo, kaip toli nuo prognozės ji gali būti, kai pateikiamos klasės yra kelintiniai skaičiai, kaip ankstesniame pavyzdyje apie kliento mokėjimus.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-131">For the multi-class scenario, it tells you how far off a prediction might be when the output classes are ordinal, as in the preceding example about customer payments.</span></span>

## <a name="model-accuracy"></a><span data-ttu-id="1c3dc-132">Modelio tikslumas</span><span class="sxs-lookup"><span data-stu-id="1c3dc-132">Model accuracy</span></span> 
<span data-ttu-id="1c3dc-133">Įvairi tikslumo metrika pranašesnė tuo, kad gali kiekybiškai įvertinti modelio kokybę.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-133">Different accuracy metrics have the advantage of quantifying the model quality.</span></span> 

<span data-ttu-id="1c3dc-134">Kadangi tikslumas yra paprasta suprasti metrika, jis yra geras pradžios taškas aiškinant modelį kitiems žmonėms, ypač modelio vartotojams, kurie nėra duomenų mokslininkai.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-134">Because accuracy is an easy metric to understand, it's a good starting point for explaining a model to other people, especially to users of the model who aren't data scientists.</span></span> <span data-ttu-id="1c3dc-135">Norint suprasti modelio tikslumą, nėra būtina suprasti statistinius duomenis.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-135">No understanding of statistics is required to understand the model's accuracy.</span></span> <span data-ttu-id="1c3dc-136">Kai galima supainiojimo matrica, ji suteikia papildomų įžvalgų apie modelio našumą.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-136">When a confusion matrix is available, it provides further insight into the model's performance.</span></span>

<span data-ttu-id="1c3dc-137">Tačiau, siekiant geresnio supratimo, reikia atkreipti dėmesį į keletą su tikslumu susijusių iššūkių.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-137">However, for a more thorough understanding, several challenges that are associated with accuracy should be noted.</span></span> <span data-ttu-id="1c3dc-138">Metrikos naudingumas priklauso nuo problemos konteksto.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-138">The usefulness of the metric depends on the context of the problem.</span></span> <span data-ttu-id="1c3dc-139">Dažnai dėl modelio našumo kyla klausimas „Kiek geras modelis yra?“</span><span class="sxs-lookup"><span data-stu-id="1c3dc-139">A question that often arises in relation to model performance is, "How good is the model?"</span></span> <span data-ttu-id="1c3dc-140">Tačiau atsakymas į šį klausimą ne visada yra paprastas.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-140">However, the answer to this question isn't necessarily straightforward.</span></span> <span data-ttu-id="1c3dc-141">Apsvarstykite tolesnę supainiojimo matricą (2 modelis).</span><span class="sxs-lookup"><span data-stu-id="1c3dc-141">Consider the following confusion matrix (model 2).</span></span>

![Apmokėjimo prognozės pavyzdys su didesne imtimi](media/payment-prediction-matrix-2.png)

<span data-ttu-id="1c3dc-143">Greitai suskaičiavus matoma, kad šio modelio tikslumas yra (70 + 10 + 3) ÷ 100 arba 0,83.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-143">A quick calculation shows that this model's accuracy is (70 + 10 + 3) ÷ 100, or 0.83.</span></span> <span data-ttu-id="1c3dc-144">Iš pirmo žvilgsnio šis rezultatas atrodo geresnis nei ankstesnio kelių klasių modelio (1 modelis) rezultatas, kurio tikslumas buvo 0,73.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-144">On the surface, this result seems better than result for the previous multi-class model (model 1), which has an accuracy of 0.73.</span></span> <span data-ttu-id="1c3dc-145">Tačiau ar jis yra geresnis?</span><span class="sxs-lookup"><span data-stu-id="1c3dc-145">But is it better?</span></span>

<span data-ttu-id="1c3dc-146">Norėdami pradėti spręsti šį klausimą, atsižvelkite į paprasto spėjimo tikslumą.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-146">To begin to address this question, consider the accuracy of a naïve guess.</span></span> <span data-ttu-id="1c3dc-147">Sprendžiant klasifikacijos problemą, paprastas spėjimas visada prognozuos dažniausią klasę.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-147">For a classification problem, a simple guess will always predict the most common class.</span></span> <span data-ttu-id="1c3dc-148">1 modelio atveju spėjimas bus „laiku“, o jo tikslumas bus 0,50.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-148">For model 1, that guess will be "on time," and it will produce an accuracy of 0.50.</span></span> <span data-ttu-id="1c3dc-149">2 modelio spėjimas taip pat bus „laiku“, o jo tikslumas bus 0,80.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-149">The guess for model 2 will also be "on time," and it will produce an accuracy of 0.80.</span></span> <span data-ttu-id="1c3dc-150">Kadangi 1 modelis už paprastą spėjimą yra geresnis 0,73 – 0,50 = 0,23, o 2 modelis už paprastą spėjimą geresnis 0,83 – 0,80 = 0,03, 1 modelis yra geresnis, nors jo tikslumas ir yra mažesnis.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-150">Because model 1 improves on the naïve guess by 0.73 – 0.50 = 0.23, whereas model 2 improves on the naïve guess by 0.83 – 0.80 = 0.03, model 1 is a better model, even though it has lower accuracy.</span></span> <span data-ttu-id="1c3dc-151">Apskaičiavus matyti, kad, norint efektyviai įvertinti modelio kokybę, reikia atsižvelgti į platesnį kontekstą nei tikslumo reikšmė.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-151">The calculation reveals that effective assessment of a model's quality requires more context than the accuracy value.</span></span>

<span data-ttu-id="1c3dc-152">Verta pažymėti dar vieną aspektą.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-152">Another aspect is worth noting.</span></span> <span data-ttu-id="1c3dc-153">Įsivaizduokite situaciją, kai paciento liga nustatoma atliekant medicininį tyrimą.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-153">Consider a scenario where a medical test is used to detect a disease in a patient.</span></span> <span data-ttu-id="1c3dc-154">Ši problema yra dvejetainio klasifikavimo problema, kai teigiamas rezultatas rodo, kad pacientas serga liga.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-154">This problem is a binary classification problem where a positive result indicates that the patient has the disease.</span></span> <span data-ttu-id="1c3dc-155">Šioje situacijoje turite pagalvoti apie tolesnių klaidų poveikį.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-155">In this scenario, you must think about the impact of the following errors:</span></span>

- <span data-ttu-id="1c3dc-156">Klaidingai teigiami rezultatai, kai tyrimu nustatoma, kad pacientas serga liga, bet iš tikrųjų jis neserga</span><span class="sxs-lookup"><span data-stu-id="1c3dc-156">False positives, where the test says that a patient has the disease, but she doesn't really have it</span></span>
- <span data-ttu-id="1c3dc-157">Klaidingai neigiami rezultatai, kai tyrimu nustatoma, kad pacientas neserga liga, bet iš tikrųjų jis serga</span><span class="sxs-lookup"><span data-stu-id="1c3dc-157">False negatives, where the test says that a patient doesn't have the disease, but he really does have it</span></span>

<span data-ttu-id="1c3dc-158">Akivaizdu, kad abu klaidų tipai yra nepageidautini, tačiau kuris iš jų yra blogesnis?</span><span class="sxs-lookup"><span data-stu-id="1c3dc-158">Obviously, both types of error are undesirable, but which is worse?</span></span> <span data-ttu-id="1c3dc-159">Tai vėl priklauso nuo aplinkybių.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-159">Again, it depends.</span></span> <span data-ttu-id="1c3dc-160">Tuo atveju, kad liga yra pavojinga gyvybei ir ją reikia greitai gydyti, svarbiau yra sumažinti klaidinga neigiamų rezultatų skaičių (tada geriausia atlikti papildomų tyrimų).</span><span class="sxs-lookup"><span data-stu-id="1c3dc-160">In the case of a life-threatening disease that requires fast treatment, minimization of false negatives (hopefully followed by additional tests) takes priority.</span></span> <span data-ttu-id="1c3dc-161">Kitose mažiau svarbiose situacijose modelių kūrėjai gali sumažinti klaidingai teigiamų rezultatų skaičių.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-161">In other, less critical situations, the model creators might minimize false positives instead.</span></span> <span data-ttu-id="1c3dc-162">Bet kokiu atveju galima daryti pagrįstą išvadą, kad, norint veiksmingai nustatyti modelio kokybę, reikia daugiau informacijos nei pateikia tikslumo metrika.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-162">At any rate, a reasonable conclusion is that to effectively determine a model's quality, you must have more information than an accuracy metric provides.</span></span>

### <a name="recommendations"></a><span data-ttu-id="1c3dc-163">Rekomendacijos</span><span class="sxs-lookup"><span data-stu-id="1c3dc-163">Recommendations</span></span>

<span data-ttu-id="1c3dc-164">Tikslumas yra svarbi priemonė bendraujant su sričių ekspertais, kurie nėra susipažinę su statistika.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-164">Accuracy is an important tool for communicating with domain experts who aren't familiar with statistics.</span></span> <span data-ttu-id="1c3dc-165">Tačiau, norint, kad informacija būtų naudinga, svarbu kartu su tikslumo reikšme pateikti papildomo konteksto.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-165">However, to make the information useful, it's critical that additional context be provided together with the accuracy value.</span></span>

<span data-ttu-id="1c3dc-166">Mokėjimo prognozavimo situacijoje galite nustatyti ML modelio tikslą, apimantį skirtingo apmokėjimo elgesio veiksnius.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-166">For the payment prediction scenario, you can set a target for the ML model that includes factors in different payment behaviors.</span></span> <span data-ttu-id="1c3dc-167">Tikslas yra toks: modelis turi pagerinti paprastą spėjimą, bent 50 procentų sumažindamas neteisingų atsakymų skaičių.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-167">The target is that the model should improve upon a naïve guess by reducing the number of incorrect answers by at least 50 percent.</span></span> <span data-ttu-id="1c3dc-168">Kitaip tariant, norite, kad tikslinis tikslumas būtų maždaug per vidurį tarp paprasto spėjimo tikslumo ir 100 procentų tikslumo esanti reikšmė.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-168">In other words, you want a target accuracy that splits the different between the accuracy of a naïve guess and 100 percent.</span></span>

<span data-ttu-id="1c3dc-169">Tolesnėje lentelėje apibendrinamas šis principas, taikomas šioje temoje aprašomoms supainiojimo matricoms.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-169">The following table summarizes this principle for the confusion matrices in this topic.</span></span>

| <span data-ttu-id="1c3dc-170">Modelis</span><span class="sxs-lookup"><span data-stu-id="1c3dc-170">Model</span></span>   | <span data-ttu-id="1c3dc-171">Paprastas spėjimas</span><span class="sxs-lookup"><span data-stu-id="1c3dc-171">Naïve guess</span></span> | <span data-ttu-id="1c3dc-172">Uždavinys</span><span class="sxs-lookup"><span data-stu-id="1c3dc-172">Target</span></span> | <span data-ttu-id="1c3dc-173">Modelio tikslumas</span><span class="sxs-lookup"><span data-stu-id="1c3dc-173">Model accuracy</span></span> | <span data-ttu-id="1c3dc-174">Ar tikslas pasiektas?</span><span class="sxs-lookup"><span data-stu-id="1c3dc-174">Is the goal met?</span></span>                                          |
|---------|-------------|--------|----------------|-----------------------------------------------------------|
| <span data-ttu-id="1c3dc-175">1 modelis</span><span class="sxs-lookup"><span data-stu-id="1c3dc-175">Model 1</span></span> | <span data-ttu-id="1c3dc-176">0.50</span><span class="sxs-lookup"><span data-stu-id="1c3dc-176">0.50</span></span>        | <span data-ttu-id="1c3dc-177">0.75</span><span class="sxs-lookup"><span data-stu-id="1c3dc-177">0.75</span></span>   | <span data-ttu-id="1c3dc-178">0.73</span><span class="sxs-lookup"><span data-stu-id="1c3dc-178">0.73</span></span>           | <span data-ttu-id="1c3dc-179">Beveik.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-179">Almost.</span></span> <span data-ttu-id="1c3dc-180">Šis modelis iš esmės pagerina spėjimą.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-180">This model significantly improves upon the guess.</span></span> |
| <span data-ttu-id="1c3dc-181">2 modelis</span><span class="sxs-lookup"><span data-stu-id="1c3dc-181">Model 2</span></span> | <span data-ttu-id="1c3dc-182">0.80</span><span class="sxs-lookup"><span data-stu-id="1c3dc-182">0.80</span></span>        | <span data-ttu-id="1c3dc-183">0.90</span><span class="sxs-lookup"><span data-stu-id="1c3dc-183">0.90</span></span>   | <span data-ttu-id="1c3dc-184">0.83</span><span class="sxs-lookup"><span data-stu-id="1c3dc-184">0.83</span></span>           | <span data-ttu-id="1c3dc-185">Nr.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-185">No.</span></span> <span data-ttu-id="1c3dc-186">Reikia tobulinti.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-186">Improvement is required.</span></span>                              |

## <a name="classification-f1-accuracy"></a><span data-ttu-id="1c3dc-187">Klasifikacijos F1 tikslumas</span><span class="sxs-lookup"><span data-stu-id="1c3dc-187">Classification F1 accuracy</span></span>

<span data-ttu-id="1c3dc-188">Galiausiai šioje temoje panagrinėsime pažangesnę klasifikavimo ML našumo priemonę, vadinamą F1 tikslumu.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-188">The final consideration in this topic is a more advanced measure of classification ML performance that is known as F1 accuracy.</span></span>

<span data-ttu-id="1c3dc-189">Kad būtų galima apibrėžti F1 tikslumą, reikia įvesti dvi papildomas metrikas: tikslumo ir atitikties.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-189">Before F1 accuracy can be defined, two additional metrics must be introduced: precision and recall.</span></span> <span data-ttu-id="1c3dc-190">Tikslumas nurodo, kiek visų prognozių, kurios nurodytos kaip teigiamos, yra tinkamai priskirta.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-190">Precision indicates how many of the total number of predictions that are specified as positive are correctly assigned.</span></span> <span data-ttu-id="1c3dc-191">Ši metrika taip pat vadinama teigiama prognozavimo reikšme.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-191">This metric is also known as the positive predictive value.</span></span> <span data-ttu-id="1c3dc-192">Atitiktis yra bendrasis faktinių teigiamų atvejų skaičius, kuris buvo teisingas nuspėtas.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-192">Recall is the total number of the actual positive cases that were predicted correctly.</span></span> <span data-ttu-id="1c3dc-193">Ši metrika taip pat vadinama jautrumu.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-193">This metric is also known as sensitivity.</span></span>

<span data-ttu-id="1c3dc-194">[![Teisingi rezultatai, palyginti su klaidingais rezultatais](./media/tn-fn.png)](./media/tn-fn.png)</span><span class="sxs-lookup"><span data-stu-id="1c3dc-194">[![True results vs. false results](./media/tn-fn.png)](./media/tn-fn.png)</span></span>

<span data-ttu-id="1c3dc-195">Pirmesnėje iliustracijoje pateiktoje supainiojimo matricoje ši metrika apskaičiuojamos taip:</span><span class="sxs-lookup"><span data-stu-id="1c3dc-195">In the confusion matrix in the preceding illustration, these metrics are calculated in the following way:</span></span>

- <span data-ttu-id="1c3dc-196">Tikslumas = TP ÷ (TP + FP)</span><span class="sxs-lookup"><span data-stu-id="1c3dc-196">Precision = TP ÷ (TP + FP)</span></span>
- <span data-ttu-id="1c3dc-197">Atitiktis = TP ÷ (TP + FN)</span><span class="sxs-lookup"><span data-stu-id="1c3dc-197">Recall = TP ÷ (TP + FN)</span></span>

<span data-ttu-id="1c3dc-198">F1 priemonė sujungia tikslumą ir atitiktį.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-198">The F1 measure combines precision and recall.</span></span> <span data-ttu-id="1c3dc-199">Rezultatas yra dviejų reikšmių harmoninis vidurkis.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-199">The result is the harmonic mean of the two values.</span></span> <span data-ttu-id="1c3dc-200">Jis apskaičiuojamas taip:</span><span class="sxs-lookup"><span data-stu-id="1c3dc-200">It's calculated in the following way:</span></span>

- <span data-ttu-id="1c3dc-201">F1 = 2 × (tikslumas × atitiktis) ÷ (tikslumas + atitiktis)</span><span class="sxs-lookup"><span data-stu-id="1c3dc-201">F1 = 2 × (Precision × Recall) ÷ (Precision + Recall)</span></span>

<span data-ttu-id="1c3dc-202">Pažvelkime į konkretų pavyzdį.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-202">Let's look at a concrete example.</span></span> <span data-ttu-id="1c3dc-203">Anksčiau šioje temoje buvo pateiktas modelio pavyzdys, kuris prognozavo, ar gyvūnas buvo šuo, ar katė.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-203">Earlier in this topic, there was an example of a model that predicted whether an animal was a dog or a cat.</span></span> <span data-ttu-id="1c3dc-204">Iliustracija pakartojama čia.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-204">The illustration is repeated here.</span></span>

<span data-ttu-id="1c3dc-205">[![Rūšių spėjimo pavyzdys (pakartotinas)](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span><span class="sxs-lookup"><span data-stu-id="1c3dc-205">[![Species prediction example (repeated)](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span></span>

<span data-ttu-id="1c3dc-206">Toliau pateikiami rezultatai, jei kaip teigiamas atsakymas naudojamas „Šuo“.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-206">Here are the results if "Dog" is used as the positive answer.</span></span>

- <span data-ttu-id="1c3dc-207">Tikslumas = 24 ÷ (24 + 2) = 0,9231</span><span class="sxs-lookup"><span data-stu-id="1c3dc-207">Precision = 24 ÷ (24 + 2) = 0.9231</span></span>
- <span data-ttu-id="1c3dc-208">Atitiktis = 24 ÷ (24 + 6) = 0,8</span><span class="sxs-lookup"><span data-stu-id="1c3dc-208">Recall = 24 ÷ (24 + 6) = 0.8</span></span>
- <span data-ttu-id="1c3dc-209">F1 = 2 × (0,9231 × 0,8) ÷ (0,9231 + 0,8) = 0,8572</span><span class="sxs-lookup"><span data-stu-id="1c3dc-209">F1 = 2 × (0.9231 × 0.8) ÷ (0.9231 + 0.8) = 0.8572</span></span>

<span data-ttu-id="1c3dc-210">Kaip matote, F1 reikšmė yra tarp tikslumo ir atitikties reikšmių.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-210">As you can see, the F1 value is between the values for precision and recall.</span></span>

<span data-ttu-id="1c3dc-211">Nors F1 tikslumą nėra taip lengva suprasti, jis pagrindinį tikslumo skaičių patikslina.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-211">Although F1 accuracy isn't as easy to understand, it adds nuance to the basic accuracy number.</span></span> <span data-ttu-id="1c3dc-212">Jis taip pat gali padėti naudojant nesubalansuotus duomenų rinkinius, kaip bus aptarta toliau.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-212">It can also help with unbalanced datasets, as the following discussion will show.</span></span>

<span data-ttu-id="1c3dc-213">Šios temos skyriuje [Modelio tikslumas](#model-accuracy) buvo palygintos tolesnės dvi supainiojimo matricos.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-213">The [Model accuracy](#model-accuracy) section of this topic compared the following two confusion matrices.</span></span> <span data-ttu-id="1c3dc-214">Nepaisant to, kad pirmo modelio tikslumas buvo mažesnis, jis buvo laikomas naudingesniu, nes jis pasirodė esantis tobulesnis už numatytąjį spėjimą dėl vienkartinio mokėjimo.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-214">Even though the first model had lower accuracy, it was deemed a more useful model because it showed more improvement than the default guess of an on-time payment.</span></span>

![Apmokėjimo prognozavimas, palyginti su faktiniais duomenimis (pavyzdys)](media/payment-prediction-matrix.png)

![Mokėjimo spėjimo pavyzdys su didesniu pavyzdžiu (pakartotinas)](media/payment-prediction-matrix-2.png)

<span data-ttu-id="1c3dc-217">Pažiūrėkime, kaip šie du modeliai atrodo, kai naudojamas F1 balas.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-217">Let's see how these two models compare when the F1 score is used.</span></span> <span data-ttu-id="1c3dc-218">Į F1 balą įskaičiuojamas kiekvienos būsenos tikslumas ir atitiktis, o F1 makroskaičiavimais tada nustatomas vidutinis visų būsenų F1 balas, kad būtų galima nustatyti bendrąjį F1 balą.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-218">The F1 score factors in precision and recall for each state, and the F1 macro calculation then averages the F1 score across the states to determine an overall F1 score.</span></span> <span data-ttu-id="1c3dc-219">Yra ir kitų F1 variantų, tačiau naudingiau panagrinėti makroversiją, atsižvelgiant į vienodą visų trijų būsenų nagrinėjimą.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-219">There are other F1 variants, but it's of greater interest to consider the macro version, given the equal consideration that is given to all three states.</span></span>

<span data-ttu-id="1c3dc-220">Norint supaprastinti skaičiavimus, buvo sukurti imčių masyvai, kad būtų sugretintos faktinės ir prognozuojamos reikšmės.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-220">To simplify the calculations, sample arrays were built to match the actual and predicted values.</span></span> <span data-ttu-id="1c3dc-221">Šie masyvai reikšmėms apskaičiuoti naudojo „Python“ „sklearn“ metrikos biblioteką.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-221">These arrays used sklearn's metrics library in Python to calculate the values.</span></span> <span data-ttu-id="1c3dc-222">Toliau parodytas rezultatas.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-222">Here is the result.</span></span>

| <span data-ttu-id="1c3dc-223">Modelis</span><span class="sxs-lookup"><span data-stu-id="1c3dc-223">Model</span></span>   | <span data-ttu-id="1c3dc-224">Paprastas spėjimas</span><span class="sxs-lookup"><span data-stu-id="1c3dc-224">Naive guess</span></span> | <span data-ttu-id="1c3dc-225">Tikslumas</span><span class="sxs-lookup"><span data-stu-id="1c3dc-225">Accuracy</span></span> | <span data-ttu-id="1c3dc-226">F1 makro</span><span class="sxs-lookup"><span data-stu-id="1c3dc-226">F1 macro</span></span> |
|---------|-------------|----------|----------|
| <span data-ttu-id="1c3dc-227">1 modelis</span><span class="sxs-lookup"><span data-stu-id="1c3dc-227">Model 1</span></span> | <span data-ttu-id="1c3dc-228">0.5</span><span class="sxs-lookup"><span data-stu-id="1c3dc-228">0.5</span></span>         | <span data-ttu-id="1c3dc-229">0.73</span><span class="sxs-lookup"><span data-stu-id="1c3dc-229">0.73</span></span>     | <span data-ttu-id="1c3dc-230">0.67</span><span class="sxs-lookup"><span data-stu-id="1c3dc-230">0.67</span></span>     |
| <span data-ttu-id="1c3dc-231">2 modelis</span><span class="sxs-lookup"><span data-stu-id="1c3dc-231">Model 2</span></span> | <span data-ttu-id="1c3dc-232">0.80</span><span class="sxs-lookup"><span data-stu-id="1c3dc-232">0.80</span></span>        | <span data-ttu-id="1c3dc-233">0.83</span><span class="sxs-lookup"><span data-stu-id="1c3dc-233">0.83</span></span>     | <span data-ttu-id="1c3dc-234">0.66</span><span class="sxs-lookup"><span data-stu-id="1c3dc-234">0.66</span></span>     |

<span data-ttu-id="1c3dc-235">Kad galėtumėte daugiau sužinoti apie tai, kaip šis skaičiavimas veikia, toliau pateikiama 1 modelio sklearn.metrics klasifikacijos ataskaita.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-235">For more detail about how this calculation works, here is the sklearn.metrics classification report for model 1.</span></span> <span data-ttu-id="1c3dc-236">Tris būsenas „Laiku“, „Vėluoja“ ir „Labai vėluoja“ atitinka eilutės, atitinkamai pažymėtos 1, 2 ir 3.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-236">The three states, "On time," "Late," and "Very late," are represented by the rows that are labeled 1, 2, and 3, respectively.</span></span> <span data-ttu-id="1c3dc-237">Makrovidurkis yra tik stulpelio „F1-score“ vidurkis.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-237">The macro average is just the average of the "f1-score" column.</span></span>

|           | <span data-ttu-id="1c3dc-238">tikslumas</span><span class="sxs-lookup"><span data-stu-id="1c3dc-238">precision</span></span> | <span data-ttu-id="1c3dc-239">atitiktis</span><span class="sxs-lookup"><span data-stu-id="1c3dc-239">recall</span></span>   | <span data-ttu-id="1c3dc-240">f1-score</span><span class="sxs-lookup"><span data-stu-id="1c3dc-240">f1-score</span></span> |
|-----------|-----------|----------|----------|
| <span data-ttu-id="1c3dc-241">**1**</span><span class="sxs-lookup"><span data-stu-id="1c3dc-241">**1**</span></span>     | <span data-ttu-id="1c3dc-242">0.83</span><span class="sxs-lookup"><span data-stu-id="1c3dc-242">0.83</span></span>      | <span data-ttu-id="1c3dc-243">0.80</span><span class="sxs-lookup"><span data-stu-id="1c3dc-243">0.80</span></span>     | <span data-ttu-id="1c3dc-244">0.82</span><span class="sxs-lookup"><span data-stu-id="1c3dc-244">0.82</span></span>     |
| <span data-ttu-id="1c3dc-245">**2**</span><span class="sxs-lookup"><span data-stu-id="1c3dc-245">**2**</span></span>     | <span data-ttu-id="1c3dc-246">0.68</span><span class="sxs-lookup"><span data-stu-id="1c3dc-246">0.68</span></span>      | <span data-ttu-id="1c3dc-247">0.71</span><span class="sxs-lookup"><span data-stu-id="1c3dc-247">0.71</span></span>     | <span data-ttu-id="1c3dc-248">0.69</span><span class="sxs-lookup"><span data-stu-id="1c3dc-248">0.69</span></span>     |
| <span data-ttu-id="1c3dc-249">**3**</span><span class="sxs-lookup"><span data-stu-id="1c3dc-249">**3**</span></span>     | <span data-ttu-id="1c3dc-250">0.50</span><span class="sxs-lookup"><span data-stu-id="1c3dc-250">0.50</span></span>      | <span data-ttu-id="1c3dc-251">0.50</span><span class="sxs-lookup"><span data-stu-id="1c3dc-251">0.50</span></span>     | <span data-ttu-id="1c3dc-252">0.50</span><span class="sxs-lookup"><span data-stu-id="1c3dc-252">0.50</span></span>     |

<span data-ttu-id="1c3dc-253">Kaip rodo šie rezultatai, šių dviejų modelių F1 makrotikslumo balai yra beveik vienodi.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-253">As these results show, the two models have nearly identical F1 macro accuracy scores.</span></span> <span data-ttu-id="1c3dc-254">Šiuo ir daugeliu kitų atvejų F1 tikslumas yra geresnis modelio pajėgumo rodiklis.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-254">In this and many other cases, F1 accuracy provides a better indicator of a model's capability.</span></span> <span data-ttu-id="1c3dc-255">Tikslumo atžvilgiu, interpretuojant rezultatus reikia suprasti, ką svarbiausia nagrinėti modelyje.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-255">As for accuracy, interpretation of the results requires that you understand what is most important to consider in the model.</span></span>

#### <a name="privacy-notice"></a><span data-ttu-id="1c3dc-256">Privatumo pranešimas</span><span class="sxs-lookup"><span data-stu-id="1c3dc-256">Privacy notice</span></span>
<span data-ttu-id="1c3dc-257">Peržiūros versijos (1) gali naudoti mažiau privatumo ir mažiau saugos priemonių nei „Dynamics 365 Finance and Operations“ paslauga, (2) jos nėra įtrauktos į aptarnavimo lygio sutartį (SLA), (3) jos neturėtų būti naudojamos apdoroti asmens duomenims ar kitiems duomenims, kuriems taikomi teisiniai ir atitikimo teisės aktai (4) ir jų palaikymas yra ribotas.</span><span class="sxs-lookup"><span data-stu-id="1c3dc-257">Previews (1) might use less privacy and fewer security measures than the Dynamics 365 Finance and Operations service, (2) aren't included in the service level agreement (SLA) for this service, (3) should not be used to process personal data or other data that is subject to legal or regulatory compliance requirements, and (4) have limited support.</span></span>
